var Kb=Object.defineProperty,Zb=Object.defineProperties;var Xb=Object.getOwnPropertyDescriptors;var Ng=Object.getOwnPropertySymbols;var Qb=Object.prototype.hasOwnProperty,Jb=Object.prototype.propertyIsEnumerable;var Rg=(e,n,t)=>n in e?Kb(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,F=(e,n)=>{for(var t in n||={})Qb.call(n,t)&&Rg(e,t,n[t]);if(Ng)for(var t of Ng(n))Jb.call(n,t)&&Rg(e,t,n[t]);return e},$=(e,n)=>Zb(e,Xb(n));var ed;function td(){return ed}function Sn(e){let n=ed;return ed=e,n}var eC=Symbol("NotFound"),Ga=class extends Error{name="\u0275NotFound";constructor(n){super(n)}};function Yr(e){return e===eC||e?.name==="\u0275NotFound"}function od(e,n){return Object.is(e,n)}var xe=null,Ua=!1,sd=1,tC=null,Et=Symbol("SIGNAL");function G(e){let n=xe;return xe=e,n}function Wa(){return xe}var Pi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function us(e){if(Ua)throw new Error("");if(xe===null)return;xe.consumerOnSignalRead(e);let n=xe.nextProducerIndex++;if(Ya(xe),n<xe.producerNode.length&&xe.producerNode[n]!==e&&cs(xe)){let t=xe.producerNode[n];za(t,xe.producerIndexOfThis[n])}xe.producerNode[n]!==e&&(xe.producerNode[n]=e,xe.producerIndexOfThis[n]=cs(xe)?Pg(e,xe,n):0),xe.producerLastReadVersion[n]=e.version}function kg(){sd++}function ad(e){if(!(cs(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===sd)){if(!e.producerMustRecompute(e)&&!Kr(e)){rd(e);return}e.producerRecomputeValue(e),rd(e)}}function ld(e){if(e.liveConsumerNode===void 0)return;let n=Ua;Ua=!0;try{for(let t of e.liveConsumerNode)t.dirty||nC(t)}finally{Ua=n}}function cd(){return xe?.consumerAllowSignalWrites!==!1}function nC(e){e.dirty=!0,ld(e),e.consumerMarkedDirty?.(e)}function rd(e){e.dirty=!1,e.lastCleanEpoch=sd}function Fi(e){return e&&(e.nextProducerIndex=0),G(e)}function qr(e,n){if(G(n),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(cs(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)za(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Kr(e){Ya(e);for(let n=0;n<e.producerNode.length;n++){let t=e.producerNode[n],r=e.producerLastReadVersion[n];if(r!==t.version||(ad(t),r!==t.version))return!0}return!1}function Zr(e){if(Ya(e),cs(e))for(let n=0;n<e.producerNode.length;n++)za(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Pg(e,n,t){if(Fg(e),e.liveConsumerNode.length===0&&Lg(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=Pg(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(t),e.liveConsumerNode.push(n)-1}function za(e,n){if(Fg(e),e.liveConsumerNode.length===1&&Lg(e))for(let r=0;r<e.producerNode.length;r++)za(e.producerNode[r],e.producerIndexOfThis[r]);let t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[n],i=e.liveConsumerNode[n];Ya(i),i.producerIndexOfThis[r]=n}}function cs(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ya(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Fg(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Lg(e){return e.producerNode!==void 0}function ud(e){tC?.(e)}function qa(e,n){let t=Object.create(iC);t.computation=e,n!==void 0&&(t.equal=n);let r=()=>{if(ad(t),us(t),t.value===$a)throw t.error;return t.value};return r[Et]=t,ud(t),r}var nd=Symbol("UNSET"),id=Symbol("COMPUTING"),$a=Symbol("ERRORED"),iC=$(F({},Pi),{value:nd,dirty:!0,error:null,equal:od,kind:"computed",producerMustRecompute(e){return e.value===nd||e.value===id},producerRecomputeValue(e){if(e.value===id)throw new Error("");let n=e.value;e.value=id;let t=Fi(e),r,i=!1;try{r=e.computation(),G(null),i=n!==nd&&n!==$a&&r!==$a&&e.equal(n,r)}catch(o){r=$a,e.error=o}finally{qr(e,t)}if(i){e.value=n;return}e.value=r,e.version++}});function rC(){throw new Error}var Vg=rC;function jg(e){Vg(e)}function dd(e){Vg=e}var oC=null;function fd(e,n){let t=Object.create(Ka);t.value=e,n!==void 0&&(t.equal=n);let r=()=>Bg(t);return r[Et]=t,ud(t),[r,s=>ds(t,s),s=>Hg(t,s)]}function Bg(e){return us(e),e.value}function ds(e,n){cd()||jg(e),e.equal(e.value,n)||(e.value=n,sC(e))}function Hg(e,n){cd()||jg(e),ds(e,n(e.value))}var Ka=$(F({},Pi),{equal:od,value:void 0,kind:"signal"});function sC(e){e.version++,kg(),ld(e),oC?.(e)}function U(e){return typeof e=="function"}function Za(e){let t=e(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Xa=Za(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Li(e,n){if(e){let t=e.indexOf(n);0<=t&&e.splice(t,1)}}var We=class e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(o){n=o instanceof Xa?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Gg(o)}catch(s){n=n??[],s instanceof Xa?n=[...n,...s.errors]:n.push(s)}}if(n)throw new Xa(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Gg(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(n)}}_hasParent(n){let{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){let{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Li(t,n)}remove(n){let{_finalizers:t}=this;t&&Li(t,n),n instanceof e&&n._removeParent(this)}};We.EMPTY=(()=>{let e=new We;return e.closed=!0,e})();var hd=We.EMPTY;function Qa(e){return e instanceof We||e&&"closed"in e&&U(e.remove)&&U(e.add)&&U(e.unsubscribe)}function Gg(e){U(e)?e():e.unsubscribe()}var Zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xr={setTimeout(e,n,...t){let{delegate:r}=Xr;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){let{delegate:n}=Xr;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ja(e){Xr.setTimeout(()=>{let{onUnhandledError:n}=Zt;if(n)n(e);else throw e})}function In(){}var Ug=pd("C",void 0,void 0);function $g(e){return pd("E",void 0,e)}function Wg(e){return pd("N",e,void 0)}function pd(e,n,t){return{kind:e,value:n,error:t}}var Vi=null;function Qr(e){if(Zt.useDeprecatedSynchronousErrorHandling){let n=!Vi;if(n&&(Vi={errorThrown:!1,error:null}),e(),n){let{errorThrown:t,error:r}=Vi;if(Vi=null,t)throw r}}else e()}function zg(e){Zt.useDeprecatedSynchronousErrorHandling&&Vi&&(Vi.errorThrown=!0,Vi.error=e)}var ji=class extends We{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Qa(n)&&n.add(this)):this.destination=cC}static create(n,t,r){return new Jr(n,t,r)}next(n){this.isStopped?md(Wg(n),this):this._next(n)}error(n){this.isStopped?md($g(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?md(Ug,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aC=Function.prototype.bind;function gd(e,n){return aC.call(e,n)}var vd=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){el(r)}}error(n){let{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){el(r)}else el(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){el(t)}}},Jr=class extends ji{constructor(n,t,r){super();let i;if(U(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Zt.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&gd(n.next,o),error:n.error&&gd(n.error,o),complete:n.complete&&gd(n.complete,o)}):i=n}this.destination=new vd(i)}};function el(e){Zt.useDeprecatedSynchronousErrorHandling?zg(e):Ja(e)}function lC(e){throw e}function md(e,n){let{onStoppedNotification:t}=Zt;t&&Xr.setTimeout(()=>t(e,n))}var cC={closed:!0,next:In,error:lC,complete:In};var eo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ei(e){return e}function Yg(e){return e.length===0?ei:e.length===1?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}var ie=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=dC(t)?t:new Jr(t,r,i);return Qr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=qg(r),new r((i,o)=>{let s=new Jr({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[eo](){return this}pipe(...t){return Yg(t)(this)}toPromise(t){return t=qg(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=n=>new e(n),e})();function qg(e){var n;return(n=e??Zt.Promise)!==null&&n!==void 0?n:Promise}function uC(e){return e&&U(e.next)&&U(e.error)&&U(e.complete)}function dC(e){return e&&e instanceof ji||uC(e)&&Qa(e)}function fC(e){return U(e?.lift)}function he(e){return n=>{if(fC(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(e,n,t,r,i){return new yd(e,n,t,r,i)}var yd=class extends ji{constructor(n,t,r,i,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){n.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};var Kg=Za(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=(()=>{class e extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new tl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Kg}next(t){Qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?hd:(this.currentObservers=null,o.push(t),new We(()=>{this.currentObservers=null,Li(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ie;return t.source=this,t}}return e.create=(n,t)=>new tl(n,t),e})(),tl=class extends Oe{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,n)}error(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,n)}complete(){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||t===void 0||t.call(n)}_subscribe(n){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(n))!==null&&r!==void 0?r:hd}};var to=class extends Oe{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){let{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var _d={now(){return(_d.delegate||Date).now()},delegate:void 0};var nl=class extends We{constructor(n,t){super()}schedule(n,t=0){return this}};var fs={setInterval(e,n,...t){let{delegate:r}=fs;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){let{delegate:n}=fs;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};var il=class extends nl{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,r=0){return fs.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&fs.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(n,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let r=!1,i;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Li(r,this),n!=null&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}};var no=class e{constructor(n,t=e.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}};no.now=_d.now;var rl=class extends no{constructor(n,t=no.now){super(n,t),this.actions=[],this._active=!1}flush(n){let{actions:t}=this;if(this._active){t.push(n);return}let r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}};var Ed=new rl(il),Zg=Ed;var Bi=new ie(e=>e.complete());function ol(e){return e&&U(e.schedule)}function Xg(e){return e[e.length-1]}function sl(e){return U(Xg(e))?e.pop():void 0}function al(e){return ol(Xg(e))?e.pop():void 0}function Jg(e,n,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(e,n||[])).next())})}function Qg(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hi(e){return this instanceof Hi?(this.v=e,this):new Hi(e)}function em(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(e,n||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(y){return new Promise(function(v,_){o.push([h,y,v,_])>1||l(h,y)})},g&&(i[h]=g(i[h])))}function l(h,g){try{c(r[h](g))}catch(y){p(o[0][3],y)}}function c(h){h.value instanceof Hi?Promise.resolve(h.value.v).then(u,d):p(o[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function p(h,g){h(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}function tm(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof Qg=="function"?Qg(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(s){return new Promise(function(a,l){s=e[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var io=e=>e&&typeof e.length=="number"&&typeof e!="function";function ll(e){return U(e?.then)}function cl(e){return U(e[eo])}function ul(e){return Symbol.asyncIterator&&U(e?.[Symbol.asyncIterator])}function dl(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fl=hC();function hl(e){return U(e?.[fl])}function pl(e){return em(this,arguments,function*(){let t=e.getReader();try{for(;;){let{value:r,done:i}=yield Hi(t.read());if(i)return yield Hi(void 0);yield yield Hi(r)}}finally{t.releaseLock()}})}function gl(e){return U(e?.getReader)}function de(e){if(e instanceof ie)return e;if(e!=null){if(cl(e))return pC(e);if(io(e))return gC(e);if(ll(e))return mC(e);if(ul(e))return nm(e);if(hl(e))return vC(e);if(gl(e))return yC(e)}throw dl(e)}function pC(e){return new ie(n=>{let t=e[eo]();if(U(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gC(e){return new ie(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}function mC(e){return new ie(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Ja)})}function vC(e){return new ie(n=>{for(let t of e)if(n.next(t),n.closed)return;n.complete()})}function nm(e){return new ie(n=>{_C(e,n).catch(t=>n.error(t))})}function yC(e){return nm(pl(e))}function _C(e,n){var t,r,i,o;return Jg(this,void 0,void 0,function*(){try{for(t=tm(e);r=yield t.next(),!r.done;){let s=r.value;if(n.next(s),n.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})}function kt(e,n,t,r=0,i=!1){let o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function ml(e,n=0){return he((t,r)=>{t.subscribe(ue(r,i=>kt(r,e,()=>r.next(i),n),()=>kt(r,e,()=>r.complete(),n),i=>kt(r,e,()=>r.error(i),n)))})}function vl(e,n=0){return he((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function im(e,n){return de(e).pipe(vl(n),ml(n))}function rm(e,n){return de(e).pipe(vl(n),ml(n))}function om(e,n){return new ie(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}function sm(e,n){return new ie(t=>{let r;return kt(t,n,()=>{r=e[fl](),kt(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function yl(e,n){if(!e)throw new Error("Iterable cannot be null");return new ie(t=>{kt(t,n,()=>{let r=e[Symbol.asyncIterator]();kt(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function am(e,n){return yl(pl(e),n)}function lm(e,n){if(e!=null){if(cl(e))return im(e,n);if(io(e))return om(e,n);if(ll(e))return rm(e,n);if(ul(e))return yl(e,n);if(hl(e))return sm(e,n);if(gl(e))return am(e,n)}throw dl(e)}function Gi(e,n){return n?lm(e,n):de(e)}function Mn(...e){let n=al(e);return Gi(e,n)}function cm(e){return e instanceof Date&&!isNaN(e)}function Se(e,n){return he((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(e.call(n,o,i++))}))})}var{isArray:EC}=Array;function bC(e,n){return EC(n)?e(...n):e(n)}function um(e){return Se(n=>bC(e,n))}function dm(e,n,t,r,i,o,s,a){let l=[],c=0,u=0,d=!1,p=()=>{d&&!l.length&&!c&&n.complete()},h=y=>c<r?g(y):l.push(y),g=y=>{o&&n.next(y),c++;let v=!1;de(t(y,u++)).subscribe(ue(n,_=>{i?.(_),o?h(_):n.next(_)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<r;){let _=l.shift();s?kt(n,s,()=>g(_)):g(_)}p()}catch(_){n.error(_)}}))};return e.subscribe(ue(n,h,()=>{d=!0,p()})),()=>{a?.()}}function Xt(e,n,t=1/0){return U(n)?Xt((r,i)=>Se((o,s)=>n(r,o,i,s))(de(e(r,i))),t):(typeof n=="number"&&(t=n),he((r,i)=>dm(r,i,e,t)))}function fm(e=1/0){return Xt(ei,e)}function hm(){return fm(1)}function _l(...e){return hm()(Gi(e,al(e)))}var CC=["addListener","removeListener"],DC=["addEventListener","removeEventListener"],wC=["on","off"];function ze(e,n,t,r){if(U(t)&&(r=t,t=void 0),r)return ze(e,n,t).pipe(um(r));let[i,o]=IC(e)?DC.map(s=>a=>e[s](n,a,t)):TC(e)?CC.map(pm(e,n)):SC(e)?wC.map(pm(e,n)):[];if(!i&&io(e))return Xt(s=>ze(s,n,t))(de(e));if(!i)throw new TypeError("Invalid event target");return new ie(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return i(a),()=>o(a)})}function pm(e,n){return t=>r=>e[t](n,r)}function TC(e){return U(e.addListener)&&U(e.removeListener)}function SC(e){return U(e.on)&&U(e.off)}function IC(e){return U(e.addEventListener)&&U(e.removeEventListener)}function hs(e=0,n,t=Zg){let r=-1;return n!=null&&(ol(n)?t=n:r=n),new ie(i=>{let o=cm(e)?+e-t.now():e;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}var{isArray:MC}=Array;function El(e){return e.length===1&&MC(e[0])?e[0]:e}function hn(e,n){return he((t,r)=>{let i=0;t.subscribe(ue(r,o=>e.call(n,o,i++)&&r.next(o)))})}function bl(...e){return e=El(e),e.length===1?de(e[0]):new ie(AC(e))}function AC(e){return n=>{let t=[];for(let r=0;t&&!n.closed&&r<e.length;r++)t.push(de(e[r]).subscribe(ue(n,i=>{if(t){for(let o=0;o<t.length;o++)o!==r&&t[o].unsubscribe();t=null}n.next(i)})))}}function ps(...e){let n=sl(e),t=El(e);return t.length?new ie(r=>{let i=t.map(()=>[]),o=t.map(()=>!1);r.add(()=>{i=o=null});for(let s=0;!r.closed&&s<t.length;s++)de(t[s]).subscribe(ue(r,a=>{if(i[s].push(a),i.every(l=>l.length)){let l=i.map(c=>c.shift());r.next(n?n(...l):l),i.some((c,u)=>!c.length&&o[u])&&r.complete()}},()=>{o[s]=!0,!i[s].length&&r.complete()}));return()=>{i=o=null}}):Bi}function bd(e,n){return U(n)?Xt(e,n,1):Xt(e,1)}function An(e){return e<=0?()=>Bi:he((n,t)=>{let r=0;n.subscribe(ue(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function gm(){return he((e,n)=>{e.subscribe(ue(n,In))})}function mm(e){return Se(()=>e)}function Cd(e,n){return n?t=>_l(n.pipe(An(1),gm()),t.pipe(Cd(e))):Xt((t,r)=>de(e(t,r)).pipe(An(1),mm(t)))}function Dd(e,n=Ed){let t=hs(e,n);return Cd(()=>t)}function wd(...e){return n=>_l(n,Mn(...e))}function Cl(e){return he((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function gs(e,n){return he((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ue(r,l=>{i?.unsubscribe();let c=0,u=o++;de(e(l,u)).subscribe(i=ue(r,d=>r.next(n?n(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ye(e){return he((n,t)=>{de(e).subscribe(ue(t,()=>t.complete(),In)),!t.closed&&n.subscribe(t)})}function Dl(e,n,t){let r=U(e)||n||t?{next:e,error:n,complete:t}:e;return r?he((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ei}function ms(...e){let n=sl(e);return he((t,r)=>{let i=e.length,o=new Array(i),s=e.map(()=>!1),a=!1;for(let l=0;l<i;l++)de(e[l]).subscribe(ue(r,c=>{o[l]=c,!a&&!s[l]&&(s[l]=!0,(a=s.every(ei))&&(s=null))},In));t.subscribe(ue(r,l=>{if(a){let c=[l,...o];r.next(n?n(...c):c)}}))})}var Ml="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(n,t){super(bs(n,t)),this.code=n}};function xC(e){return`NG0${Math.abs(e)}`}function bs(e,n){return`${xC(e)}${n?": "+n:""}`}function Ee(e){for(let n in e)if(e[n]===Ee)return n;throw Error("")}function Em(e,n){for(let t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Tt(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Tt).join(", ")}]`;if(e==null)return""+e;let n=e.overriddenName||e.name;if(n)return`${n}`;let t=e.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Al(e,n){return e?n?`${e} ${n}`:e:n||""}var OC=Ee({__forward_ref__:Ee});function qi(e){return e.__forward_ref__=qi,e.toString=function(){return Tt(this())},e}function qe(e){return Pd(e)?e():e}function Pd(e){return typeof e=="function"&&e.hasOwnProperty(OC)&&e.__forward_ref__===qi}function bm(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(r==null?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}function H(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Qt(e){return{providers:e.providers||[],imports:e.imports||[]}}function xl(e){return NC(e,Ol)}function NC(e,n){return e.hasOwnProperty(n)&&e[n]||null}function RC(e){let n=e?.[Ol]??null;return n||null}function Sd(e){return e&&e.hasOwnProperty(Tl)?e[Tl]:null}var Ol=Ee({\u0275prov:Ee}),Tl=Ee({\u0275inj:Ee}),W=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,t){this._desc=n,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fd(e){return e&&!!e.\u0275providers}var Ld=Ee({\u0275cmp:Ee}),Vd=Ee({\u0275dir:Ee}),jd=Ee({\u0275pipe:Ee});var ys=Ee({\u0275fac:Ee}),Ki=Ee({__NG_ELEMENT_ID__:Ee}),vm=Ee({__NG_ENV_ID__:Ee});function Cs(e){return typeof e=="string"?e:e==null?"":String(e)}function Cm(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Cs(e)}function Bd(e,n){throw new j(-200,e)}function Nl(e,n){throw new j(-201,!1)}var Id;function Dm(){return Id}function wt(e){let n=Id;return Id=e,n}function Hd(e,n,t){let r=xl(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(n!==void 0)return n;Nl(e,"Injector")}var kC={},Ui=kC,PC="__NG_DI_FLAG__",Md=class{injector;constructor(n){this.injector=n}retrieve(n,t){let r=$i(t)||0;try{return this.injector.get(n,r&8?null:Ui,r)}catch(i){if(Yr(i))return i;throw i}}},Sl="ngTempTokenPath",FC="ngTokenPath",LC=/\n/gm,VC="\u0275",ym="__source";function jC(e,n=0){let t=td();if(t===void 0)throw new j(-203,!1);if(t===null)return Hd(e,void 0,n);{let r=BC(n),i=t.retrieve(e,r);if(Yr(i)){if(r.optional)return null;throw i}return i}}function q(e,n=0){return(Dm()||jC)(qe(e),n)}function w(e,n){return q(e,$i(n))}function $i(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function BC(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Ad(e){let n=[];for(let t=0;t<e.length;t++){let r=qe(e[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=HC(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}n.push(q(i,o))}else n.push(q(r))}return n}function HC(e){return e[PC]}function GC(e,n,t,r){let i=e[Sl];throw n[ym]&&i.unshift(n[ym]),e.message=UC(`
`+e.message,i,t,r),e[FC]=i,e[Sl]=null,e}function UC(e,n,t,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==VC?e.slice(2):e;let i=Tt(n);if(Array.isArray(n))i=n.map(Tt).join(" -> ");else if(typeof n=="object"){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Tt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(LC,`
  `)}`}function Wi(e,n){let t=e.hasOwnProperty(ys);return t?e[ys]:null}function wm(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Tm(e){return e.flat(Number.POSITIVE_INFINITY)}function Rl(e,n){e.forEach(t=>Array.isArray(t)?Rl(t,n):n(t))}function Gd(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Ds(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Sm(e,n){let t=[];for(let r=0;r<e;r++)t.push(n);return t}function Im(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(i===1)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;){let o=i-2;e[i]=e[o],i--}e[n]=t,e[n+1]=r}}function kl(e,n,t){let r=oo(e,n);return r>=0?e[r|1]=t:(r=~r,Im(e,r,n,t)),r}function Pl(e,n){let t=oo(e,n);if(t>=0)return e[t|1]}function oo(e,n){return $C(e,n,1)}function $C(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<t];if(n===s)return o<<t;s>n?i=o:r=o+1}return~(i<<t)}var ni={},ct=[],ii=new W(""),Ud=new W("",-1),$d=new W(""),_s=class{get(n,t=Ui){if(t===Ui)throw new Ga(`NullInjectorError: No provider for ${Tt(n)}!`);return t}};function ri(e){return e[Ld]||null}function Wd(e){return e[Vd]||null}function Mm(e){return e[jd]||null}function Zi(e){return{\u0275providers:e}}function Am(e){return Zi([{provide:ii,multi:!0,useValue:e}])}function xm(...e){return{\u0275providers:zd(!0,e),\u0275fromNgModule:!0}}function zd(e,...n){let t=[],r=new Set,i,o=s=>{t.push(s)};return Rl(n,s=>{let a=s;Il(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Om(i,o),t}function Om(e,n){for(let t=0;t<e.length;t++){let{ngModule:r,providers:i}=e[t];Yd(i,o=>{n(o,r)})}}function Il(e,n,t,r){if(e=qe(e),!e)return!1;let i=null,o=Sd(e),s=!o&&ri(e);if(!o&&!s){let l=e.ngModule;if(o=Sd(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Il(c,n,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Rl(o.imports,u=>{Il(u,n,t,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Om(c,n)}if(!a){let c=Wi(i)||(()=>new i);n({provide:i,useFactory:c,deps:ct},i),n({provide:$d,useValue:i,multi:!0},i),n({provide:ii,useValue:()=>q(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=e;Yd(l,u=>{n(u,c)})}}else return!1;return i!==e&&e.providers!==void 0}function Yd(e,n){for(let t of e)Fd(t)&&(t=t.\u0275providers),Array.isArray(t)?Yd(t,n):n(t)}var WC=Ee({provide:String,useValue:Ee});function Nm(e){return e!==null&&typeof e=="object"&&WC in e}function zC(e){return!!(e&&e.useExisting)}function YC(e){return!!(e&&e.useFactory)}function zi(e){return typeof e=="function"}function Rm(e){return!!e.useClass}var ws=new W(""),wl={},_m={},Td;function so(){return Td===void 0&&(Td=new _s),Td}var Ke=class{},Yi=class extends Ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Od(n,s=>this.processProvider(s)),this.records.set(Ud,ro(void 0,this)),i.has("environment")&&this.records.set(Ke,ro(void 0,this));let o=this.records.get(ws);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get($d,ct,{self:!0}))}retrieve(n,t){let r=$i(t)||0;try{return this.get(n,Ui,r)}catch(i){if(Yr(i))return i;throw i}}destroy(){vs(this),this._destroyed=!0;let n=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(n)}}onDestroy(n){return vs(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){vs(this);let t=Sn(this),r=wt(void 0),i;try{return n()}finally{Sn(t),wt(r)}}get(n,t=Ui,r){if(vs(this),n.hasOwnProperty(vm))return n[vm](this);let i=$i(r),o,s=Sn(this),a=wt(void 0);try{if(!(i&4)){let c=this.records.get(n);if(c===void 0){let u=QC(n)&&xl(n);u&&this.injectableDefInScope(u)?c=ro(xd(n),wl):c=null,this.records.set(n,c)}if(c!=null)return this.hydrate(n,c)}let l=i&2?so():this.parent;return t=i&8&&t===Ui?null:t,l.get(n,t)}catch(l){if(Yr(l)){if((l[Sl]=l[Sl]||[]).unshift(Tt(n)),s)throw l;return GC(l,n,"R3InjectorError",this.source)}else throw l}finally{wt(a),Sn(s)}}resolveInjectorInitializers(){let n=G(null),t=Sn(this),r=wt(void 0),i;try{let o=this.get(ii,ct,{self:!0});for(let s of o)s()}finally{Sn(t),wt(r),G(n)}}toString(){let n=[],t=this.records;for(let r of t.keys())n.push(Tt(r));return`R3Injector[${n.join(", ")}]`}processProvider(n){n=qe(n);let t=zi(n)?n:qe(n&&n.provide),r=KC(n);if(!zi(n)&&n.multi===!0){let i=this.records.get(t);i||(i=ro(void 0,wl,!0),i.factory=()=>Ad(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){let r=G(null);try{return t.value===_m?Bd(Tt(n)):t.value===wl&&(t.value=_m,t.value=t.factory()),typeof t.value=="object"&&t.value&&XC(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{G(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let t=qe(n.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){let t=this._onDestroyHooks.indexOf(n);t!==-1&&this._onDestroyHooks.splice(t,1)}};function xd(e){let n=xl(e),t=n!==null?n.factory:Wi(e);if(t!==null)return t;if(e instanceof W)throw new j(204,!1);if(e instanceof Function)return qC(e);throw new j(204,!1)}function qC(e){if(e.length>0)throw new j(204,!1);let t=RC(e);return t!==null?()=>t.factory(e):()=>new e}function KC(e){if(Nm(e))return ro(void 0,e.useValue);{let n=qd(e);return ro(n,wl)}}function qd(e,n,t){let r;if(zi(e)){let i=qe(e);return Wi(i)||xd(i)}else if(Nm(e))r=()=>qe(e.useValue);else if(YC(e))r=()=>e.useFactory(...Ad(e.deps||[]));else if(zC(e))r=()=>q(qe(e.useExisting));else{let i=qe(e&&(e.useClass||e.provide));if(ZC(e))r=()=>new i(...Ad(e.deps));else return Wi(i)||xd(i)}return r}function vs(e){if(e.destroyed)throw new j(205,!1)}function ro(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function ZC(e){return!!e.deps}function XC(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function QC(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Od(e,n){for(let t of e)Array.isArray(t)?Od(t,n):t&&Fd(t)?Od(t.\u0275providers,n):n(t)}function ao(e,n){let t;e instanceof Yi?(vs(e),t=e):t=new Md(e);let r,i=Sn(t),o=wt(void 0);try{return n()}finally{Sn(i),wt(o)}}function Kd(){return Dm()!==void 0||td()!=null}function Zd(e){if(!Kd())throw new j(-203,!1)}var Jt=0,z=1,B=2,Ne=3,Ft=4,ut=5,Xi=6,lo=7,we=8,Qi=9,pn=10,be=11,co=12,Xd=13,Ji=14,dt=15,oi=16,er=17,gn=18,Ts=19,Qd=20,xn=21,Fl=22,On=23,It=24,tr=25,nt=26,km=1,Jd=6,si=7,Ss=8,nr=9,je=10;function Nn(e){return Array.isArray(e)&&typeof e[km]=="object"}function en(e){return Array.isArray(e)&&e[km]===!0}function ef(e){return(e.flags&4)!==0}function ai(e){return e.componentOffset>-1}function Ll(e){return(e.flags&1)===1}function mn(e){return!!e.template}function uo(e){return(e[B]&512)!==0}function ir(e){return(e[B]&256)===256}var Pm="svg",Fm="math";function Lt(e){for(;Array.isArray(e);)e=e[Jt];return e}function tf(e,n){return Lt(n[e])}function tn(e,n){return Lt(n[e.index])}function Is(e,n){return e.data[n]}function nn(e,n){let t=n[e];return Nn(t)?t:t[Jt]}function Lm(e){return(e[B]&4)===4}function Vl(e){return(e[B]&128)===128}function Vm(e){return en(e[Ne])}function li(e,n){return n==null?null:e[n]}function nf(e){e[er]=0}function rf(e){e[B]&1024||(e[B]|=1024,Vl(e)&&ci(e))}function jm(e,n){for(;e>0;)n=n[Ji],e--;return n}function Ms(e){return!!(e[B]&9216||e[It]?.dirty)}function jl(e){e[pn].changeDetectionScheduler?.notify(8),e[B]&64&&(e[B]|=1024),Ms(e)&&ci(e)}function ci(e){e[pn].changeDetectionScheduler?.notify(0);let n=ti(e);for(;n!==null&&!(n[B]&8192||(n[B]|=8192,!Vl(n)));)n=ti(n)}function of(e,n){if(ir(e))throw new j(911,!1);e[xn]===null&&(e[xn]=[]),e[xn].push(n)}function Bm(e,n){if(e[xn]===null)return;let t=e[xn].indexOf(n);t!==-1&&e[xn].splice(t,1)}function ti(e){let n=e[Ne];return en(n)?n[Ne]:n}function sf(e){return e[lo]??=[]}function af(e){return e.cleanup??=[]}function Hm(e,n,t,r){let i=sf(n);i.push(t),e.firstCreatePass&&af(e).push(r,i.length-1)}var Z={lFrame:tv(null),bindingsEnabled:!0,skipHydrationRootTNode:null},As=function(e){return e[e.Off=0]="Off",e[e.Exhaustive=1]="Exhaustive",e[e.OnlyDirtyViews=2]="OnlyDirtyViews",e}(As||{}),JC=0,Nd=!1;function Gm(){return Z.lFrame.elementDepthCount}function Um(){Z.lFrame.elementDepthCount++}function $m(){Z.lFrame.elementDepthCount--}function lf(){return Z.bindingsEnabled}function cf(){return Z.skipHydrationRootTNode!==null}function Wm(e){return Z.skipHydrationRootTNode===e}function zm(){Z.skipHydrationRootTNode=null}function K(){return Z.lFrame.lView}function Ie(){return Z.lFrame.tView}function pe(e){return Z.lFrame.contextLView=e,e[we]}function ge(e){return Z.lFrame.contextLView=null,e}function bt(){let e=uf();for(;e!==null&&e.type===64;)e=e.parent;return e}function uf(){return Z.lFrame.currentTNode}function Ym(){let e=Z.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function fo(e,n){let t=Z.lFrame;t.currentTNode=e,t.isParent=n}function df(){return Z.lFrame.isParent}function ff(){Z.lFrame.isParent=!1}function hf(e){bm("Must never be called in production mode"),JC=e}function pf(){return Nd}function ho(e){let n=Nd;return Nd=e,n}function qm(){let e=Z.lFrame,n=e.bindingRootIndex;return n===-1&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Km(e){return Z.lFrame.bindingIndex=e}function rr(){return Z.lFrame.bindingIndex++}function gf(e){let n=Z.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function Zm(){return Z.lFrame.inI18n}function Xm(e,n){let t=Z.lFrame;t.bindingIndex=t.bindingRootIndex=e,Bl(n)}function Qm(){return Z.lFrame.currentDirectiveIndex}function Bl(e){Z.lFrame.currentDirectiveIndex=e}function Jm(e){let n=Z.lFrame.currentDirectiveIndex;return n===-1?null:e[n]}function mf(){return Z.lFrame.currentQueryIndex}function Hl(e){Z.lFrame.currentQueryIndex=e}function eD(e){let n=e[z];return n.type===2?n.declTNode:n.type===1?e[ut]:null}function vf(e,n,t){if(t&4){let i=n,o=e;for(;i=i.parent,i===null&&!(t&1);)if(i=eD(o),i===null||(o=o[Ji],i.type&10))break;if(i===null)return!1;n=i,e=o}let r=Z.lFrame=ev();return r.currentTNode=n,r.lView=e,!0}function Gl(e){let n=ev(),t=e[z];Z.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function ev(){let e=Z.lFrame,n=e===null?null:e.child;return n===null?tv(e):n}function tv(e){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=n),n}function nv(){let e=Z.lFrame;return Z.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var yf=nv;function Ul(){let e=nv();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function iv(e){return(Z.lFrame.contextLView=jm(e,Z.lFrame.contextLView))[we]}function Rn(){return Z.lFrame.selectedIndex}function ui(e){Z.lFrame.selectedIndex=e}function $l(){let e=Z.lFrame;return Is(e.tView,e.selectedIndex)}function rv(){return Z.lFrame.currentNamespace}var ov=!0;function Wl(){return ov}function zl(e){ov=e}function Rd(e,n=null,t=null,r){let i=sv(e,n,t,r);return i.resolveInjectorInitializers(),i}function sv(e,n=null,t=null,r,i=new Set){let o=[t||ct,xm(e)];return r=r||(typeof e=="object"?void 0:Tt(e)),new Yi(o,n||so(),r||null,i)}var Re=class e{static THROW_IF_NOT_FOUND=Ui;static NULL=new _s;static create(n,t){if(Array.isArray(n))return Rd({name:""},t,n,"");{let r=n.name??"";return Rd({name:r},n.parent,n.providers,r)}}static \u0275prov=H({token:e,providedIn:"any",factory:()=>q(Ud)});static __NG_ELEMENT_ID__=-1},Me=new W(""),rn=(()=>{class e{static __NG_ELEMENT_ID__=tD;static __NG_ENV_ID__=t=>t}return e})(),Es=class extends rn{_lView;constructor(n){super(),this._lView=n}get destroyed(){return ir(this._lView)}onDestroy(n){let t=this._lView;return of(t,n),()=>Bm(t,n)}};function tD(){return new Es(K())}var St=class{_console=console;handleError(n){this._console.error("ERROR",n)}},vn=new W("",{providedIn:"root",factory:()=>{let e=w(Ke),n;return t=>{n??=e.get(St),n.handleError(t)}}}),av={provide:ii,useValue:()=>void w(St),multi:!0},nD=new W("",{providedIn:"root",factory:()=>{let e=w(Me).defaultView;if(!e)return;let n=w(vn),t=o=>{n(o.reason),o.preventDefault()},r=o=>{o.error?n(o.error):n(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",t),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),w(rn).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",t)})}});function _f(){return Zi([Am(()=>void w(nD))])}function ke(e,n){let[t,r,i]=fd(e,n?.equal),o=t,s=o[Et];return o.set=r,o.update=i,o.asReadonly=Ef.bind(o),o}function Ef(){let e=this[Et];if(e.readonlyFn===void 0){let n=()=>this();n[Et]=e,e.readonlyFn=n}return e.readonlyFn}var Pt=class{},xs=new W("",{providedIn:"root",factory:()=>!1});var bf=new W(""),Yl=new W("");var po=(()=>{class e{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=iD}return e})();function iD(){return new po(K(),bt())}var or=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new to(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ie(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:e,providedIn:"root",factory:()=>new e})}return e})(),Os=(()=>{class e{internalPendingTasks=w(or);scheduler=w(Pt);errorHandler=w(vn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:e,providedIn:"root",factory:()=>new e})}return e})();function sr(...e){}var Ns=(()=>{class e{static \u0275prov=H({token:e,providedIn:"root",factory:()=>new kd})}return e})(),kd=class{dirtyEffectCount=0;queues=new Map;add(n){this.enqueue(n),this.schedule(n)}schedule(n){n.dirty&&this.dirtyEffectCount++}remove(n){let t=n.zone,r=this.queues.get(t);r.has(n)&&(r.delete(n),n.dirty&&this.dirtyEffectCount--)}enqueue(n){let t=n.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(n)||r.add(n)}flush(){for(;this.dirtyEffectCount>0;){let n=!1;for(let[t,r]of this.queues)t===null?n||=this.flushQueue(r):n||=t.run(()=>this.flushQueue(r));n||(this.dirtyEffectCount=0)}}flushQueue(n){let t=!1;for(let r of n)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Us(e){return{toString:e}.toString()}function gD(e){return typeof e=="function"}var Jl=class{previousValue;currentValue;firstChange;constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Lv(e,n,t,r){n!==null?n.applyValueToInputSignal(n,r):e[t]=r}var $s=(()=>{let e=()=>Vv;return e.ngInherit=!0,e})();function Vv(e){return e.type.prototype.ngOnChanges&&(e.setInput=vD),mD}function mD(){let e=Bv(this),n=e?.current;if(n){let t=e.previous;if(t===ni)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function vD(e,n,t,r,i){let o=this.declaredInputs[r],s=Bv(e)||yD(e,{previous:ni,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Jl(c&&c.currentValue,t,l===ni),Lv(e,n,i,t)}var jv="__ngSimpleChanges__";function Bv(e){return e[jv]||null}function yD(e,n){return e[jv]=n}var lv=[];var ae=function(e,n=null,t){for(let r=0;r<lv.length;r++){let i=lv[r];i(e,n,t)}};function _D(e,n,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){let s=Vv(n);(t.preOrderHooks??=[]).push(e,s),(t.preOrderCheckHooks??=[]).push(e,s)}i&&(t.preOrderHooks??=[]).push(0-e,i),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}function Hv(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){let o=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-t,s),a&&((e.contentHooks??=[]).push(t,a),(e.contentCheckHooks??=[]).push(t,a)),l&&(e.viewHooks??=[]).push(-t,l),c&&((e.viewHooks??=[]).push(t,c),(e.viewCheckHooks??=[]).push(t,c)),u!=null&&(e.destroyHooks??=[]).push(t,u)}}function Kl(e,n,t){Gv(e,n,3,t)}function Zl(e,n,t,r){(e[B]&3)===t&&Gv(e,n,t,r)}function Cf(e,n){let t=e[B];(t&3)===n&&(t&=16383,t+=1,e[B]=t)}function Gv(e,n,t,r){let i=r!==void 0?e[er]&65535:0,o=r??-1,s=n.length-1,a=0;for(let l=i;l<s;l++)if(typeof n[l+1]=="number"){if(a=n[l],r!=null&&a>=r)break}else n[l]<0&&(e[er]+=65536),(a<o||o==-1)&&(ED(e,t,n,l),e[er]=(e[er]&4294901760)+l+2),l++}function cv(e,n){ae(4,e,n);let t=G(null);try{n.call(e)}finally{G(t),ae(5,e,n)}}function ED(e,n,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=e[s];i?e[B]>>14<e[er]>>16&&(e[B]&3)===n&&(e[B]+=16384,cv(a,o)):cv(a,o)}var mo=-1,lr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,t,r){this.factory=n,this.canSeeViewProviders=t,this.injectImpl=r}};function bD(e){return(e.flags&8)!==0}function CD(e){return(e.flags&16)!==0}function DD(e,n,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];e.setAttribute(n,s,a,o)}else{let o=i,s=t[++r];TD(o)?e.setProperty(n,o,s):e.setAttribute(n,o,s),r++}}return r}function wD(e){return e===3||e===4||e===6}function TD(e){return e.charCodeAt(0)===64}function Ps(e,n){if(!(n===null||n.length===0))if(e===null||e.length===0)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){let i=n[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?uv(e,t,i,null,n[++r]):uv(e,t,i,null,null))}}return e}function uv(e,n,t,r,i){let o=0,s=e.length;if(n===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===n){s=-1;break}else if(a>n){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===t){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,n),o=s+1),e.splice(o++,0,t),i!==null&&e.splice(o++,0,i)}function Uv(e){return e!==mo}function ec(e){return e&32767}function SD(e){return e>>16}function tc(e,n){let t=SD(e),r=n;for(;t>0;)r=r[Ji],t--;return r}var Rf=!0;function dv(e){let n=Rf;return Rf=e,n}var ID=256,$v=ID-1,Wv=5,MD=0,yn={};function AD(e,n,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ki)&&(r=t[Ki]),r==null&&(r=t[Ki]=MD++);let i=r&$v,o=1<<i;n.data[e+(i>>Wv)]|=o}function nc(e,n){let t=zv(e,n);if(t!==-1)return t;let r=n[z];r.firstCreatePass&&(e.injectorIndex=n.length,Df(r.data,e),Df(n,null),Df(r.blueprint,null));let i=uh(e,n),o=e.injectorIndex;if(Uv(i)){let s=ec(i),a=tc(i,n),l=a[z].data;for(let c=0;c<8;c++)n[o+c]=a[s+c]|l[s+c]}return n[o+8]=i,o}function Df(e,n){e.push(0,0,0,0,0,0,0,0,n)}function zv(e,n){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||n[e.injectorIndex+8]===null?-1:e.injectorIndex}function uh(e,n){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;i!==null;){if(r=Xv(i),r===null)return mo;if(t++,i=i[Ji],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return mo}function kf(e,n,t){AD(e,n,t)}function Yv(e,n,t){if(t&8||e!==void 0)return e;Nl(n,"NodeInjector")}function qv(e,n,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=e[Qi],o=wt(void 0);try{return i?i.get(n,r,t&8):Hd(n,r,t&8)}finally{wt(o)}}return Yv(r,n,t)}function Kv(e,n,t,r=0,i){if(e!==null){if(n[B]&2048&&!(r&2)){let s=RD(e,n,t,r,yn);if(s!==yn)return s}let o=Zv(e,n,t,r,yn);if(o!==yn)return o}return qv(n,t,r,i)}function Zv(e,n,t,r,i){let o=OD(t);if(typeof o=="function"){if(!vf(n,e,r))return r&1?Yv(i,t,r):qv(n,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Nl(t);else return s}finally{yf()}}else if(typeof o=="number"){let s=null,a=zv(e,n),l=mo,c=r&1?n[dt][ut]:null;for((a===-1||r&4)&&(l=a===-1?uh(e,n):n[a+8],l===mo||!hv(r,!1)?a=-1:(s=n[z],a=ec(l),n=tc(l,n)));a!==-1;){let u=n[z];if(fv(o,a,u.data)){let d=xD(a,n,t,s,r,c);if(d!==yn)return d}l=n[a+8],l!==mo&&hv(r,n[z].data[a+8]===c)&&fv(o,a,n)?(s=u,a=ec(l),n=tc(l,n)):a=-1}}return i}function xD(e,n,t,r,i,o){let s=n[z],a=s.data[e+8],l=r==null?ai(a)&&Rf:r!=s&&(a.type&3)!==0,c=i&1&&o===a,u=Xl(a,s,t,l,c);return u!==null?Fs(n,s,u,a):yn}function Xl(e,n,t,r,i){let o=e.providerIndexes,s=n.data,a=o&1048575,l=e.directiveStart,c=e.directiveEnd,u=o>>20,d=r?a:a+u,p=i?a+u:c;for(let h=d;h<p;h++){let g=s[h];if(h<l&&t===g||h>=l&&g.type===t)return h}if(i){let h=s[l];if(h&&mn(h)&&h.type===t)return l}return null}function Fs(e,n,t,r){let i=e[t],o=n.data;if(i instanceof lr){let s=i;s.resolving&&Bd(Cm(o[t]));let a=dv(s.canSeeViewProviders);s.resolving=!0;let l=o[t].type||o[t],c,u=s.injectImpl?wt(s.injectImpl):null,d=vf(e,r,0);try{i=e[t]=s.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&_D(t,o[t],n)}finally{u!==null&&wt(u),dv(a),s.resolving=!1,yf()}}return i}function OD(e){if(typeof e=="string")return e.charCodeAt(0)||0;let n=e.hasOwnProperty(Ki)?e[Ki]:void 0;return typeof n=="number"?n>=0?n&$v:ND:n}function fv(e,n,t){let r=1<<e;return!!(t[n+(e>>Wv)]&r)}function hv(e,n){return!(e&2)&&!(e&1&&n)}var ar=class{_tNode;_lView;constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return Kv(this._tNode,this._lView,n,$i(r),t)}};function ND(){return new ar(bt(),K())}function gc(e){return Us(()=>{let n=e.prototype.constructor,t=n[ys]||Pf(n),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[ys]||Pf(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Pf(e){return Pd(e)?()=>{let n=Pf(qe(e));return n&&n()}:Wi(e)}function RD(e,n,t,r,i){let o=e,s=n;for(;o!==null&&s!==null&&s[B]&2048&&!uo(s);){let a=Zv(o,s,t,r|2,yn);if(a!==yn)return a;let l=o.parent;if(!l){let c=s[Qd];if(c){let u=c.get(t,yn,r);if(u!==yn)return u}l=Xv(s),s=s[Ji]}o=l}return i}function Xv(e){let n=e[z],t=n.type;return t===2?n.declTNode:t===1?e[ut]:null}function kD(){return Eo(bt(),K())}function Eo(e,n){return new rt(tn(e,n))}var rt=(()=>{class e{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=kD}return e})();function PD(e){return e instanceof rt?e.nativeElement:e}function FD(){return this._results[Symbol.iterator]()}var ic=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Oe}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;let r=Tm(n);(this._changesDetected=!wm(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=FD};function Qv(e){return(e.flags&128)===128}var dh=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(dh||{}),Jv=new Map,LD=0;function VD(){return LD++}function jD(e){Jv.set(e[Ts],e)}function Ff(e){Jv.delete(e[Ts])}var pv="__ngContext__";function Ws(e,n){Nn(n)?(e[pv]=n[Ts],jD(n)):e[pv]=n}function ey(e){return ny(e[co])}function ty(e){return ny(e[Ft])}function ny(e){for(;e!==null&&!en(e);)e=e[Ft];return e}var Lf;function fh(e){Lf=e}function iy(){if(Lf!==void 0)return Lf;if(typeof document<"u")return document;throw new j(210,!1)}var mc=new W("",{providedIn:"root",factory:()=>BD}),BD="ng",vc=new W(""),dr=new W("",{providedIn:"platform",factory:()=>"unknown"});var yc=new W("",{providedIn:"root",factory:()=>iy().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var HD="h",GD="b";var ry="r";var oy="di";var sy=!1,ay=new W("",{providedIn:"root",factory:()=>sy});var UD=(e,n,t,r)=>{};function $D(e,n,t,r){UD(e,n,t,r)}var WD=()=>null;function ly(e,n,t=!1){return WD(e,n,t)}function cy(e,n){let t=e.contentQueries;if(t!==null){let r=G(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=e.data[s];Hl(o),a.contentQueries(2,n[s],s)}}}finally{G(r)}}}function Vf(e,n,t){Hl(0);let r=G(null);try{n(e,t)}finally{G(r)}}function uy(e,n,t){if(ef(n)){let r=G(null);try{let i=n.directiveStart,o=n.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{G(r)}}}var kn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(kn||{});var rc=class{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ml})`}};function _c(e){return e instanceof rc?e.changingThisBreaksApplicationSecurity:e}function dy(e,n){let t=fy(e);if(t!=null&&t!==n){if(t==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Ml})`)}return t===n}function fy(e){return e instanceof rc&&e.getTypeName()||null}var zD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hy(e){return e=String(e),e.match(zD)?e:"unsafe:"+e}var hh=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(hh||{});function hi(e){let n=YD();return n?n.sanitize(hh.URL,e)||"":dy(e,"URL")?_c(e):hy(Cs(e))}function YD(){let e=K();return e&&e[pn].sanitizer}function qD(e,n,t){let r=e.length;for(;;){let i=e.indexOf(n,t);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}var py="ng-template";function KD(e,n,t,r){let i=0;if(r){for(;i<n.length&&typeof n[i]=="string";i+=2)if(n[i]==="class"&&qD(n[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ph(e))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&typeof(o=n[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function ph(e){return e.type===4&&e.value!==py}function ZD(e,n,t){let r=e.type===4&&!t?py:e.value;return n===r}function XD(e,n,t){let r=4,i=e.attrs,o=i!==null?e1(i):0,s=!1;for(let a=0;a<n.length;a++){let l=n[a];if(typeof l=="number"){if(!s&&!on(r)&&!on(l))return!1;if(s&&on(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!ZD(e,l,t)||l===""&&n.length===1){if(on(r))return!1;s=!0}}else if(r&8){if(i===null||!KD(e,i,l,t)){if(on(r))return!1;s=!0}}else{let c=n[++a],u=QD(l,i,ph(e),t);if(u===-1){if(on(r))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(on(r))return!1;s=!0}}}}return on(r)||s}function on(e){return(e&1)===0}function QD(e,n,t,r){if(n===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){let s=n[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=n[++i];for(;typeof a=="string";)a=n[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return t1(n,e)}function gy(e,n,t=!1){for(let r=0;r<n.length;r++)if(XD(e,n[r],t))return!0;return!1}function JD(e){let n=e.attrs;if(n!=null){let t=n.indexOf(5);if((t&1)===0)return n[t+1]}return null}function e1(e){for(let n=0;n<e.length;n++){let t=e[n];if(wD(t))return n}return e.length}function t1(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){let r=e[t];if(typeof r=="number")return-1;if(r===n)return t;t++}return-1}function n1(e,n){e:for(let t=0;t<n.length;t++){let r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function gv(e,n){return e?":not("+n.trim()+")":n}function i1(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let s=e[t];if(typeof s=="string")if(r&2){let a=e[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!on(s)&&(n+=gv(o,i),i=""),r=s,o=o||!on(r);t++}return i!==""&&(n+=gv(o,i)),n}function r1(e){return e.map(i1).join(",")}function o1(e){let n=[],t=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&n.push(o,e[++r]):i===8&&t.push(o);else{if(!on(i))break;i=o}r++}return t.length&&n.push(1,...t),n}var Vt={};function s1(e,n){return e.createText(n)}function a1(e,n,t){e.setValue(n,t)}function my(e,n,t){return e.createElement(n,t)}function oc(e,n,t,r,i){e.insertBefore(n,t,r,i)}function vy(e,n,t){e.appendChild(n,t)}function mv(e,n,t,r,i){r!==null?oc(e,n,t,r,i):vy(e,n,t)}function yy(e,n,t){e.removeChild(null,n,t)}function l1(e,n,t){e.setAttribute(n,"style",t)}function c1(e,n,t){t===""?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function _y(e,n,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&DD(e,n,r),i!==null&&c1(e,n,i),o!==null&&l1(e,n,o)}function gh(e,n,t,r,i,o,s,a,l,c,u){let d=nt+r,p=d+i,h=u1(d,p),g=typeof c=="function"?c():c;return h[z]={type:e,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}function u1(e,n){let t=[];for(let r=0;r<n;r++)t.push(r<e?null:Vt);return t}function d1(e){let n=e.tView;return n===null||n.incompleteFirstPass?e.tView=gh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function mh(e,n,t,r,i,o,s,a,l,c,u){let d=n.blueprint.slice();return d[Jt]=i,d[B]=r|4|128|8|64|1024,(c!==null||e&&e[B]&2048)&&(d[B]|=2048),nf(d),d[Ne]=d[Ji]=e,d[we]=t,d[pn]=s||e&&e[pn],d[be]=a||e&&e[be],d[Qi]=l||e&&e[Qi]||null,d[ut]=o,d[Ts]=VD(),d[Xi]=u,d[Qd]=c,d[dt]=n.type==2?e[dt]:d,d}function f1(e,n,t){let r=tn(n,e),i=d1(t),o=e[pn].rendererFactory,s=vh(e,mh(e,i,null,Ey(t),r,n,null,o.createRenderer(r,t),null,null,null));return e[n.index]=s}function Ey(e){let n=16;return e.signals?n=4096:e.onPush&&(n=64),n}function by(e,n,t,r){if(t===0)return-1;let i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function vh(e,n){return e[co]?e[Xd][Ft]=n:e[co]=n,e[Xd]=n,n}function L(e=1){Cy(Ie(),K(),Rn()+e,!1)}function Cy(e,n,t,r){if(!r)if((n[B]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Kl(n,o,t)}else{let o=e.preOrderHooks;o!==null&&Zl(n,o,0,t)}ui(t)}var Ec=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Ec||{});function jf(e,n,t,r){let i=G(null);try{let[o,s,a]=e.inputs[t],l=null;(s&Ec.SignalBased)!==0&&(l=n[o][Et]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(n,r)),e.setInput!==null?e.setInput(n,l,r,t,o):Lv(n,l,o,r)}finally{G(i)}}function Dy(e,n,t,r,i){let o=Rn(),s=r&2;try{ui(-1),s&&n.length>nt&&Cy(e,n,nt,!1),ae(s?2:0,i,t),t(r,i)}finally{ui(o),ae(s?3:1,i,t)}}function yh(e,n,t){_1(e,n,t),(t.flags&64)===64&&E1(e,n,t)}function wy(e,n,t=tn){let r=n.localNames;if(r!==null){let i=n.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(n,e):e[s];e[i++]=a}}}function h1(e,n,t,r){let o=r.get(ay,sy)||t===kn.ShadowDom,s=e.selectRootElement(n,o);return p1(s),s}function p1(e){g1(e)}var g1=()=>null;function m1(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function v1(e,n,t,r,i,o){let s=n[z];if(_h(e,s,n,t,r)){ai(e)&&y1(n,e.index);return}Ty(e,n,t,r,i,o)}function Ty(e,n,t,r,i,o){if(e.type&3){let s=tn(e,n);t=m1(t),r=o!=null?o(r,e.value||"",t):r,i.setProperty(s,t,r)}else e.type&12}function y1(e,n){let t=nn(n,e);t[B]&16||(t[B]|=64)}function _1(e,n,t){let r=t.directiveStart,i=t.directiveEnd;ai(t)&&f1(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||nc(t,n);let o=t.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],l=Fs(n,e,s,t);if(Ws(l,n),o!==null&&w1(n,s-r,l,a,t,o),mn(a)){let c=nn(t.index,n);c[we]=Fs(n,e,s,t)}}}function E1(e,n,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Qm();try{ui(o);for(let a=r;a<i;a++){let l=e.data[a],c=n[a];Bl(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&b1(l,c)}}finally{ui(-1),Bl(s)}}function b1(e,n){e.hostBindings!==null&&e.hostBindings(1,n)}function Sy(e,n){let t=e.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];gy(n,o.selectors,!1)&&(r??=[],mn(o)?r.unshift(o):r.push(o))}return r}function C1(e,n,t,r,i,o){let s=tn(e,n);D1(n[be],s,o,e.value,t,r,i)}function D1(e,n,t,r,i,o,s){if(o==null)e.removeAttribute(n,i,t);else{let a=s==null?Cs(o):s(o,r||"",i);e.setAttribute(n,i,a,t)}}function w1(e,n,t,r,i,o){let s=o[n];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];jf(r,t,l,c)}}function T1(e,n){let t=e[Qi];if(!t)return;t.get(vn,null)?.(n)}function _h(e,n,t,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=n.data[c];jf(d,t[c],u,i),a=!0}if(o)for(let l of o){let c=t[l],u=n.data[l];jf(u,c,r,i),a=!0}return a}function S1(e,n){let t=nn(n,e),r=t[z];I1(r,t);let i=t[Jt];i!==null&&t[Xi]===null&&(t[Xi]=ly(i,t[Qi])),ae(18),Eh(r,t,t[we]),ae(19,t[we])}function I1(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}function Eh(e,n,t){Gl(n);try{let r=e.viewQuery;r!==null&&Vf(1,r,t);let i=e.template;i!==null&&Dy(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[gn]?.finishViewCreation(e),e.staticContentQueries&&cy(e,n),e.staticViewQueries&&Vf(2,e.viewQuery,t);let o=e.components;o!==null&&M1(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[B]&=-5,Ul()}}function M1(e,n){for(let t=0;t<n.length;t++)S1(e,n[t])}function zs(e,n,t,r){let i=G(null);try{let o=n.tView,a=e[B]&4096?4096:16,l=mh(e,o,t,a,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=e[n.index];l[oi]=c;let u=e[gn];return u!==null&&(l[gn]=u.createEmbeddedView(o)),Eh(o,l,t),l}finally{G(i)}}function vo(e,n){return!n||n.firstChild===null||Qv(e)}var vv=!1,A1=new W(""),x1;function bh(e,n){return x1(e,n)}var Pn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Pn||{});function bc(e){return(e.flags&32)===32}function go(e,n,t,r,i){if(r!=null){let o,s=!1;en(r)?o=r:Nn(r)&&(s=!0,r=r[Jt]);let a=Lt(r);e===0&&t!==null?i==null?vy(n,t,a):oc(n,t,a,i||null,!0):e===1&&t!==null?oc(n,t,a,i||null,!0):e===2?yy(n,a,s):e===3&&n.destroyNode(a),o!=null&&B1(n,e,o,t,i)}}function O1(e,n){Iy(e,n),n[Jt]=null,n[ut]=null}function N1(e,n,t,r,i,o){r[Jt]=i,r[ut]=n,Dc(e,r,t,1,i,o)}function Iy(e,n){n[pn].changeDetectionScheduler?.notify(9),Dc(e,n,n[be],2,null,null)}function R1(e){let n=e[co];if(!n)return wf(e[z],e);for(;n;){let t=null;if(Nn(n))t=n[co];else{let r=n[je];r&&(t=r)}if(!t){for(;n&&!n[Ft]&&n!==e;)Nn(n)&&wf(n[z],n),n=n[Ne];n===null&&(n=e),Nn(n)&&wf(n[z],n),t=n&&n[Ft]}n=t}}function Ch(e,n){let t=e[nr],r=t.indexOf(n);t.splice(r,1)}function Cc(e,n){if(ir(n))return;let t=n[be];t.destroyNode&&Dc(e,n,t,3,null,null),R1(n)}function wf(e,n){if(ir(n))return;let t=G(null);try{n[B]&=-129,n[B]|=256,n[It]&&Zr(n[It]),P1(e,n),k1(e,n),n[z].type===1&&n[be].destroy();let r=n[oi];if(r!==null&&en(n[Ne])){r!==n[Ne]&&Ch(r,n);let i=n[gn];i!==null&&i.detachView(e)}Ff(n)}finally{G(t)}}function k1(e,n){let t=e.cleanup,r=n[lo];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(n[lo]=null);let i=n[xn];if(i!==null){n[xn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=n[On];if(o!==null){n[On]=null;for(let s of o)s.destroy()}}function P1(e,n){let t;if(e!=null&&(t=e.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=n[t[r]];if(!(i instanceof lr)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];ae(4,a,l);try{l.call(a)}finally{ae(5,a,l)}}else{ae(4,i,o);try{o.call(i)}finally{ae(5,i,o)}}}}}function My(e,n,t){return F1(e,n.parent,t)}function F1(e,n,t){let r=n;for(;r!==null&&r.type&168;)n=r,r=n.parent;if(r===null)return t[Jt];if(ai(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===kn.None||i===kn.Emulated)return null}return tn(r,t)}function Ay(e,n,t){return V1(e,n,t)}function L1(e,n,t){return e.type&40?tn(e,t):null}var V1=L1,yv;function Dh(e,n,t,r){let i=My(e,r,n),o=n[be],s=r.parent||n[ut],a=Ay(s,r,n);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)mv(o,i,t[l],a,!1);else mv(o,i,t,a,!1);yv!==void 0&&yv(o,r,n,t,i)}function Rs(e,n){if(n!==null){let t=n.type;if(t&3)return tn(n,e);if(t&4)return Bf(-1,e[n.index]);if(t&8){let r=n.child;if(r!==null)return Rs(e,r);{let i=e[n.index];return en(i)?Bf(-1,i):Lt(i)}}else{if(t&128)return Rs(e,n.next);if(t&32)return bh(n,e)()||Lt(e[n.index]);{let r=xy(e,n);if(r!==null){if(Array.isArray(r))return r[0];let i=ti(e[dt]);return Rs(i,r)}else return Rs(e,n.next)}}}return null}function xy(e,n){if(n!==null){let r=e[dt][ut],i=n.projection;return r.projection[i]}return null}function Bf(e,n){let t=je+e+1;if(t<n.length){let r=n[t],i=r[z].firstChild;if(i!==null)return Rs(r,i)}return n[si]}function wh(e,n,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(s&&n===0&&(a&&Ws(Lt(a),r),t.flags|=2),!bc(t))if(l&8)wh(e,n,t.child,r,i,o,!1),go(n,e,i,a,o);else if(l&32){let c=bh(t,r),u;for(;u=c();)go(n,e,i,u,o);go(n,e,i,a,o)}else l&16?Oy(e,n,r,t,i,o):go(n,e,i,a,o);t=s?t.projectionNext:t.next}}function Dc(e,n,t,r,i,o){wh(t,r,e.firstChild,n,i,o,!1)}function j1(e,n,t){let r=n[be],i=My(e,t,n),o=t.parent||n[ut],s=Ay(o,t,n);Oy(r,0,n,t,i,s)}function Oy(e,n,t,r,i,o){let s=t[dt],l=s[ut].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];go(n,e,i,u,o)}else{let c=l,u=s[Ne];Qv(r)&&(c.flags|=128),wh(e,n,c,u,i,o,!0)}}function B1(e,n,t,r,i){let o=t[si],s=Lt(t);o!==s&&go(n,e,r,o,i);for(let a=je;a<t.length;a++){let l=t[a];Dc(l[z],l,e,n,r,o)}}function H1(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Pn.DashCase;i==null?e.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Pn.Important),e.setStyle(t,r,i,o))}}function Ls(e,n,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=n[t.index];o!==null&&r.push(Lt(o)),en(o)&&Ny(o,r);let s=t.type;if(s&8)Ls(e,n,t.child,r);else if(s&32){let a=bh(t,n),l;for(;l=a();)r.push(l)}else if(s&16){let a=xy(n,t);if(Array.isArray(a))r.push(...a);else{let l=ti(n[dt]);Ls(l[z],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Ny(e,n){for(let t=je;t<e.length;t++){let r=e[t],i=r[z].firstChild;i!==null&&Ls(r[z],r,i,n)}e[si]!==e[Jt]&&n.push(e[si])}function Ry(e){if(e[tr]!==null){for(let n of e[tr])n.impl.addSequence(n);e[tr].length=0}}var ky=[];function G1(e){return e[It]??U1(e)}function U1(e){let n=ky.pop()??Object.create(W1);return n.lView=e,n}function $1(e){e.lView[It]!==e&&(e.lView=null,ky.push(e))}var W1=$(F({},Pi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{ci(e.lView)},consumerOnSignalRead(){this.lView[It]=this}});function z1(e){let n=e[It]??Object.create(Y1);return n.lView=e,n}var Y1=$(F({},Pi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let n=ti(e.lView);for(;n&&!Py(n[z]);)n=ti(n);n&&rf(n)},consumerOnSignalRead(){this.lView[It]=this}});function Py(e){return e.type!==2}function Fy(e){if(e[On]===null)return;let n=!0;for(;n;){let t=!1;for(let r of e[On])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));n=t&&!!(e[B]&8192)}}var q1=100;function Th(e,n=0){let r=e[pn].rendererFactory,i=!1;i||r.begin?.();try{K1(e,n)}finally{i||r.end?.()}}function K1(e,n){let t=pf();try{ho(!0),Hf(e,n);let r=0;for(;Ms(e);){if(r===q1)throw new j(103,!1);r++,Hf(e,1)}}finally{ho(t)}}function Ly(e,n){hf(n?As.Exhaustive:As.OnlyDirtyViews);try{Th(e)}finally{hf(As.Off)}}function Z1(e,n,t,r){if(ir(n))return;let i=n[B],o=!1,s=!1;Gl(n);let a=!0,l=null,c=null;o||(Py(e)?(c=G1(n),l=Fi(c)):Wa()===null?(a=!1,c=z1(n),l=Fi(c)):n[It]&&(Zr(n[It]),n[It]=null));try{nf(n),Km(e.bindingStartIndex),t!==null&&Dy(e,n,t,2,r);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&Kl(n,h,null)}else{let h=e.preOrderHooks;h!==null&&Zl(n,h,0,null),Cf(n,0)}if(s||X1(n),Fy(n),Vy(n,0),e.contentQueries!==null&&cy(e,n),!o)if(u){let h=e.contentCheckHooks;h!==null&&Kl(n,h)}else{let h=e.contentHooks;h!==null&&Zl(n,h,1),Cf(n,1)}J1(e,n);let d=e.components;d!==null&&By(n,d,0);let p=e.viewQuery;if(p!==null&&Vf(2,p,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&Kl(n,h)}else{let h=e.viewHooks;h!==null&&Zl(n,h,2),Cf(n,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),n[Fl]){for(let h of n[Fl])h();n[Fl]=null}o||(Ry(n),n[B]&=-73)}catch(u){throw o||ci(n),u}finally{c!==null&&(qr(c,l),a&&$1(c)),Ul()}}function Vy(e,n){for(let t=ey(e);t!==null;t=ty(t))for(let r=je;r<t.length;r++){let i=t[r];jy(i,n)}}function X1(e){for(let n=ey(e);n!==null;n=ty(n)){if(!(n[B]&2))continue;let t=n[nr];for(let r=0;r<t.length;r++){let i=t[r];rf(i)}}}function Q1(e,n,t){ae(18);let r=nn(n,e);jy(r,t),ae(19,r[we])}function jy(e,n){Vl(e)&&Hf(e,n)}function Hf(e,n){let r=e[z],i=e[B],o=e[It],s=!!(n===0&&i&16);if(s||=!!(i&64&&n===0),s||=!!(i&1024),s||=!!(o?.dirty&&Kr(o)),s||=!1,o&&(o.dirty=!1),e[B]&=-9217,s)Z1(r,e,r.template,e[we]);else if(i&8192){let a=G(null);try{Fy(e),Vy(e,1);let l=r.components;l!==null&&By(e,l,1),Ry(e)}finally{G(a)}}}function By(e,n,t){for(let r=0;r<n.length;r++)Q1(e,n[r],t)}function J1(e,n){let t=e.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ui(~i);else{let o=i,s=t[++r],a=t[++r];Xm(s,o);let l=n[o];ae(24,l),a(2,l),ae(25,l)}}}finally{ui(-1)}}function Sh(e,n){let t=pf()?64:1088;for(e[pn].changeDetectionScheduler?.notify(n);e;){e[B]|=t;let r=ti(e);if(uo(e)&&!r)return e;e=r}return null}function Hy(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function Gy(e,n){let t=je+n;if(t<e.length)return e[t]}function Ys(e,n,t,r=!0){let i=n[z];if(ew(i,n,e,t),r){let s=Bf(t,e),a=n[be],l=a.parentNode(e[si]);l!==null&&N1(i,e[ut],a,n,l,s)}let o=n[Xi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Uy(e,n){let t=Vs(e,n);return t!==void 0&&Cc(t[z],t),t}function Vs(e,n){if(e.length<=je)return;let t=je+n,r=e[t];if(r){let i=r[oi];i!==null&&i!==e&&Ch(i,r),n>0&&(e[t-1][Ft]=r[Ft]);let o=Ds(e,je+n);O1(r[z],r);let s=o[gn];s!==null&&s.detachView(o[z]),r[Ne]=null,r[Ft]=null,r[B]&=-129}return r}function ew(e,n,t,r){let i=je+r,o=t.length;r>0&&(t[i-1][Ft]=n),r<o-je?(n[Ft]=t[i],Gd(t,je+r,n)):(t.push(n),n[Ft]=null),n[Ne]=t;let s=n[oi];s!==null&&t!==s&&$y(s,n);let a=n[gn];a!==null&&a.insertView(e),jl(n),n[B]|=128}function $y(e,n){let t=e[nr],r=n[Ne];if(Nn(r))e[B]|=2;else{let i=r[Ne][dt];n[dt]!==i&&(e[B]|=2)}t===null?e[nr]=[n]:t.push(n)}var di=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let n=this._lView,t=n[z];return Ls(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t}get context(){return this._lView[we]}set context(n){this._lView[we]=n}get destroyed(){return ir(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[Ne];if(en(n)){let t=n[Ss],r=t?t.indexOf(this):-1;r>-1&&(Vs(n,r),Ds(t,r))}this._attachedToViewContainer=!1}Cc(this._lView[z],this._lView)}onDestroy(n){of(this._lView,n)}markForCheck(){Sh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[B]&=-129}reattach(){jl(this._lView),this._lView[B]|=128}detectChanges(){this._lView[B]|=1024,Th(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Qi].get(A1,vv)}catch{this.exhaustive=vv}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=uo(this._lView),t=this._lView[oi];t!==null&&!n&&Ch(t,this._lView),Iy(this._lView[z],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=n;let t=uo(this._lView),r=this._lView[oi];r!==null&&!t&&$y(r,this._lView),jl(this._lView)}};var fi=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=tw;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=zs(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new di(o)}}return e})();function tw(){return Ih(bt(),K())}function Ih(e,n){return e.type&4?new fi(n,e,Eo(e,n)):null}function wc(e,n,t,r,i){let o=e.data[n];if(o===null)o=nw(e,n,t,r,i),Zm()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Ym();o.injectorIndex=s===null?-1:s.injectorIndex}return fo(o,!0),o}function nw(e,n,t,r,i){let o=uf(),s=df(),a=s?o:o&&o.parent,l=e.data[n]=rw(e,a,t,n,r,i);return iw(e,l,o,s),l}function iw(e,n,t,r){e.firstChild===null&&(e.firstChild=n),t!==null&&(r?t.child==null&&n.parent!==null&&(t.child=n):t.next===null&&(t.next=n,n.prev=t))}function rw(e,n,t,r,i,o){let s=n?n.injectorIndex:-1,a=0;return cf()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Fj=new RegExp(`^(\\d+)*(${GD}|${HD})*(.*)`);function ow(e){let n=e[Jd]??[],r=e[Ne][be],i=[];for(let o of n)o.data[oy]!==void 0?i.push(o):sw(o,r);e[Jd]=i}function sw(e,n){let t=0,r=e.firstChild;if(r){let i=e.data[ry];for(;t<i;){let o=r.nextSibling;yy(n,r,!1),r=o,t++}}}var aw=()=>null,lw=()=>null;function sc(e,n){return aw(e,n)}function Wy(e,n,t){return lw(e,n,t)}var zy=class{},Tc=class{},Gf=class{resolveComponentFactory(n){throw new j(917,!1)}},Sc=class{static NULL=new Gf},cr=class{};var Yy=(()=>{class e{static \u0275prov=H({token:e,providedIn:"root",factory:()=>null})}return e})();var Ql={},Uf=class{injector;parentInjector;constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){let i=this.injector.get(n,Ql,r);return i!==Ql||t===Ql?i:this.parentInjector.get(n,t,r)}};function _v(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(n!==null)for(let s=0;s<n.length;s++){let a=n[s];if(typeof a=="number")o=a;else if(o==1)i=Al(i,a);else if(o==2){let l=a,c=n[++s];r=Al(r,l+": "+c+";")}}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function fr(e,n=0){let t=K();if(t===null)return q(e,n);let r=bt();return Kv(r,t,qe(e),n)}function qy(e,n,t,r,i){let o=r===null?null:{"":-1},s=i(e,t);if(s!==null){let a=s,l=null,c=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(s);break}dw(e,n,t,a,o,l,c)}o!==null&&r!==null&&cw(t,r,o)}function cw(e,n,t){let r=e.localNames=[];for(let i=0;i<n.length;i+=2){let o=t[n[i+1]];if(o==null)throw new j(-301,!1);r.push(n[i],o)}}function uw(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function dw(e,n,t,r,i,o,s){let a=r.length,l=!1;for(let p=0;p<a;p++){let h=r[p];!l&&mn(h)&&(l=!0,uw(e,t,p)),kf(nc(t,n),e,h.type)}vw(t,e.data.length,a);for(let p=0;p<a;p++){let h=r[p];h.providersResolver&&h.providersResolver(h)}let c=!1,u=!1,d=by(e,n,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let h=r[p];if(t.mergedAttrs=Ps(t.mergedAttrs,h.hostAttrs),hw(e,t,n,d,h),mw(d,h,i),s!==null&&s.has(h)){let[y,v]=s.get(h);t.directiveToIndex.set(h.type,[d,y+t.directiveStart,v+t.directiveStart])}else(o===null||!o.has(h))&&t.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let g=h.type.prototype;!c&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),c=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}fw(e,t,o)}function fw(e,n,t){for(let r=n.directiveStart;r<n.directiveEnd;r++){let i=e.data[r];if(t===null||!t.has(i))Ev(0,n,i,r),Ev(1,n,i,r),Cv(n,r,!1);else{let o=t.get(i);bv(0,n,o,r),bv(1,n,o,r),Cv(n,r,!0)}}}function Ev(e,n,t,r){let i=e===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=n.inputs??={}:s=n.outputs??={},s[o]??=[],s[o].push(r),Ky(n,o)}}function bv(e,n,t,r){let i=e===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=n.hostDirectiveInputs??={}:a=n.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Ky(n,s)}}function Ky(e,n){n==="class"?e.flags|=8:n==="style"&&(e.flags|=16)}function Cv(e,n,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!t&&i===null||t&&o===null||ph(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===n){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let c=o[l];for(let u=0;u<c.length;u+=2)if(c[u]===n){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function hw(e,n,t,r,i){e.data[r]=i;let o=i.factory||(i.factory=Wi(i.type,!0)),s=new lr(o,mn(i),fr);e.blueprint[r]=s,t[r]=s,pw(e,n,r,by(e,t,i.hostVars,Vt),i)}function pw(e,n,t,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~n.index;gw(s)!=a&&s.push(a),s.push(t,r,o)}}function gw(e){let n=e.length;for(;n>0;){let t=e[--n];if(typeof t=="number"&&t<0)return t}return 0}function mw(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;mn(n)&&(t[""]=e)}}function vw(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function Zy(e,n,t,r,i,o,s,a){let l=n.consts,c=li(l,s),u=wc(n,e,2,r,c);return o&&qy(n,t,u,li(l,a),i),u.mergedAttrs=Ps(u.mergedAttrs,u.attrs),u.attrs!==null&&_v(u,u.attrs,!1),u.mergedAttrs!==null&&_v(u,u.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,u),u}function Xy(e,n){Hv(e,n),ef(n)&&e.queries.elementEnd(n)}function yw(e,n,t){return e[n]=t}function _w(e,n){return e[n]}function pi(e,n,t){if(t===Vt)return!1;let r=e[n];return Object.is(r,t)?!1:(e[n]=t,!0)}function Tf(e,n,t){return function r(i){let o=ai(e)?nn(e.index,n):n;Sh(o,5);let s=n[we],a=Dv(n,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=Dv(n,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function Dv(e,n,t,r){let i=G(null);try{return ae(6,n,t),t(r)!==!1}catch(o){return T1(e,o),!1}finally{ae(7,n,t),G(i)}}function Ew(e,n,t,r,i,o,s,a){let l=Ll(e),c=!1,u=null;if(!r&&l&&(u=bw(n,t,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,c=!0}else{let d=tn(e,t),p=r?r(d):d;$D(t,p,o,a);let h=i.listen(p,o,a),g=r?y=>r(Lt(y[e.index])):e.index;Qy(g,n,t,o,a,h,!1)}return c}function bw(e,n,t,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=n[lo],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function Qy(e,n,t,r,i,o,s){let a=n.firstCreatePass?af(n):null,l=sf(t),c=l.length;l.push(i,o),a&&a.push(r,e,c,(c+1)*(s?-1:1))}function wv(e,n,t,r,i,o){let s=n[t],a=n[z],c=a.data[t].outputs[r],d=s[c].subscribe(o);Qy(e.index,a,n,i,o,d,!0)}var $f=Symbol("BINDING");var Wf=class extends Sc{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let t=ri(n);return new yo(t,this.ngModule)}};function Cw(e){return Object.keys(e).map(n=>{let[t,r,i]=e[n],o={propName:t,templateName:n,isSignal:(r&Ec.SignalBased)!==0};return i&&(o.transform=i),o})}function Dw(e){return Object.keys(e).map(n=>({propName:e[n],templateName:n}))}function ww(e,n,t){let r=n instanceof Ke?n:n?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Uf(t,r):t}function Tw(e){let n=e.get(cr,null);if(n===null)throw new j(407,!1);let t=e.get(Yy,null),r=e.get(Pt,null);return{rendererFactory:n,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function Sw(e,n){let t=(e.selectors[0][0]||"div").toLowerCase();return my(n,t,t==="svg"?Pm:t==="math"?Fm:null)}var yo=class extends Tc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Cw(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Dw(this.componentDef.outputs),this.cachedOutputs}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=r1(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!t}create(n,t,r,i,o,s){ae(22);let a=G(null);try{let l=this.componentDef,c=Iw(r,l,s,o),u=ww(l,i||this.ngModule,n),d=Tw(u),p=d.rendererFactory.createRenderer(null,l),h=r?h1(p,r,l.encapsulation,u):Sw(l,p),g=s?.some(Tv)||o?.some(_=>typeof _!="function"&&_.bindings.some(Tv)),y=mh(null,c,null,512|Ey(l),null,null,d,p,u,null,ly(h,u,!0));y[nt]=h,Gl(y);let v=null;try{let _=Zy(nt,c,y,"#host",()=>c.directiveRegistry,!0,0);h&&(_y(p,h,_),Ws(h,y)),yh(c,y,_),uy(c,_,y),Xy(c,_),t!==void 0&&Aw(_,this.ngContentSelectors,t),v=nn(_.index,y),y[we]=v[we],Eh(c,y,null)}catch(_){throw v!==null&&Ff(v),Ff(y),_}finally{ae(23),Ul()}return new ac(this.componentType,y,!!g)}finally{G(a)}}};function Iw(e,n,t,r){let i=e?["ng-version","20.0.4"]:o1(n.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[$f].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let p of d.bindings){a+=p[$f].requiredVars;let h=u+1;p.create&&(p.targetIdx=h,(o??=[]).push(p)),p.update&&(p.targetIdx=h,(s??=[]).push(p))}}let l=[n];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,p=Wd(d);l.push(p)}return gh(0,null,Mw(o,s),1,a,l,null,null,null,[i],null)}function Mw(e,n){return!e&&!n?null:t=>{if(t&1&&e)for(let r of e)r.create();if(t&2&&n)for(let r of n)r.update()}}function Tv(e){let n=e[$f].kind;return n==="input"||n==="twoWay"}var ac=class extends zy{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Is(t[z],nt),this.location=Eo(this._tNode,t),this.instance=nn(this._tNode.index,t)[we],this.hostView=this.changeDetectorRef=new di(t,void 0),this.componentType=n}setInput(n,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;let i=this._rootLView,o=_h(r,i[z],i,n,t);this.previousInputValues.set(n,t);let s=nn(r.index,i);Sh(s,1)}get injector(){return new ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function Aw(e,n,t){let r=e.projection=[];for(let i=0;i<n.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var bo=(()=>{class e{static __NG_ELEMENT_ID__=xw}return e})();function xw(){let e=bt();return e_(e,K())}var Ow=bo,Jy=class extends Ow{_lContainer;_hostTNode;_hostLView;constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Eo(this._hostTNode,this._hostLView)}get injector(){return new ar(this._hostTNode,this._hostLView)}get parentInjector(){let n=uh(this._hostTNode,this._hostLView);if(Uv(n)){let t=tc(n,this._hostLView),r=ec(n),i=t[z].data[r+8];return new ar(i,t)}else return new ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let t=Sv(this._lContainer);return t!==null&&t[n]||null}get length(){return this._lContainer.length-je}createEmbeddedView(n,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=sc(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,vo(this._hostTNode,s)),a}createComponent(n,t,r,i,o,s,a){let l=n&&!gD(n),c;if(l)c=t;else{let v=t||{};c=v.index,r=v.injector,i=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef,s=v.directives,a=v.bindings}let u=l?n:new yo(ri(n)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let _=(l?d:this.parentInjector).get(Ke,null);_&&(o=_)}let p=ri(u.componentType??{}),h=sc(this._lContainer,p?.id??null),g=h?.firstChild??null,y=u.create(d,i,g,o,s,a);return this.insertImpl(y.hostView,c,vo(this._hostTNode,h)),y}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){let i=n._lView;if(Vm(i)){let a=this.indexOf(n);if(a!==-1)this.detach(a);else{let l=i[Ne],c=new Jy(l,l[ut],l[Ne]);c.detach(c.indexOf(n))}}let o=this._adjustIndex(t),s=this._lContainer;return Ys(s,i,o,r),n.attachToViewContainerRef(),Gd(Sf(s),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){let t=Sv(this._lContainer);return t!==null?t.indexOf(n):-1}remove(n){let t=this._adjustIndex(n,-1),r=Vs(this._lContainer,t);r&&(Ds(Sf(this._lContainer),t),Cc(r[z],r))}detach(n){let t=this._adjustIndex(n,-1),r=Vs(this._lContainer,t);return r&&Ds(Sf(this._lContainer),t)!=null?new di(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function Sv(e){return e[Ss]}function Sf(e){return e[Ss]||(e[Ss]=[])}function e_(e,n){let t,r=n[e.index];return en(r)?t=r:(t=Hy(r,n,null,e),n[e.index]=t,vh(n,t)),Rw(t,n,e,r),new Jy(t,e,n)}function Nw(e,n){let t=e[be],r=t.createComment(""),i=tn(n,e),o=t.parentNode(i);return oc(t,o,r,t.nextSibling(i),!1),r}var Rw=Fw,kw=()=>!1;function Pw(e,n,t){return kw(e,n,t)}function Fw(e,n,t,r){if(e[si])return;let i;t.type&8?i=Lt(r):i=Nw(n,t),e[si]=i}var zf=class e{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Yf=class e{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){let t=n.queries;if(t!==null){let r=n.contentQueries!==null?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new e(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)Mh(n,t).matches!==null&&this.queries[t].setDirty()}},lc=class{flags;read;predicate;constructor(n,t,r=null){this.flags=t,this.read=r,typeof n=="string"?this.predicate=$w(n):this.predicate=n}},qf=class e{queries;constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new e(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},Kf=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,t=-1){this.metadata=n,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new e(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(n,t,Lw(t,o)),this.matchTNodeWithReadOption(n,t,Xl(t,n,o,!1,!1))}else r===fi?t.type&4&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Xl(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===rt||i===bo||i===fi&&t.type&4)this.addMatch(t.index,-2);else{let o=Xl(t,n,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){this.matches===null?this.matches=[n,t]:this.matches.push(n,t)}};function Lw(e,n){let t=e.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1]}return null}function Vw(e,n){return e.type&11?Eo(e,n):e.type&4?Ih(e,n):null}function jw(e,n,t,r){return t===-1?Vw(n,e):t===-2?Bw(e,n,r):Fs(e,e[z],t,n)}function Bw(e,n,t){if(t===rt)return Eo(n,e);if(t===fi)return Ih(n,e);if(t===bo)return e_(n,e)}function t_(e,n,t,r){let i=n[gn].queries[r];if(i.matches===null){let o=e.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(jw(n,u,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Zf(e,n,t,r){let i=e.queries.getByIndex(t),o=i.matches;if(o!==null){let s=t_(e,n,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=n[-l];for(let d=je;d<u.length;d++){let p=u[d];p[oi]===p[Ne]&&Zf(p[z],p,c,r)}if(u[nr]!==null){let d=u[nr];for(let p=0;p<d.length;p++){let h=d[p];Zf(h[z],h,c,r)}}}}}return r}function Hw(e,n){return e[gn].queries[n].queryList}function n_(e,n,t){let r=new ic((t&4)===4);return Hm(e,n,r,r.destroy),(n[gn]??=new Yf).queries.push(new zf(r))-1}function Gw(e,n,t){let r=Ie();return r.firstCreatePass&&(i_(r,new lc(e,n,t),-1),(n&2)===2&&(r.staticViewQueries=!0)),n_(r,K(),n)}function Uw(e,n,t,r){let i=Ie();if(i.firstCreatePass){let o=bt();i_(i,new lc(n,t,r),o.index),Ww(i,e),(t&2)===2&&(i.staticContentQueries=!0)}return n_(i,K(),t)}function $w(e){return e.split(",").map(n=>n.trim())}function i_(e,n,t){e.queries===null&&(e.queries=new qf),e.queries.track(new Kf(n,t))}function Ww(e,n){let t=e.contentQueries||(e.contentQueries=[]),r=t.length?t[t.length-1]:-1;n!==r&&t.push(e.queries.length-1,n)}function Mh(e,n){return e.queries.getByIndex(n)}function zw(e,n){let t=e[z],r=Mh(t,n);return r.crossesNgTemplate?Zf(t,e,n,[]):t_(t,e,r,n)}var Iv=new Set;function Fn(e){Iv.has(e)||(Iv.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var cc=class{};var js=class extends cc{injector;componentFactoryResolver=new Wf(this);instance=null;constructor(n){super();let t=new Yi([...n.providers,{provide:cc,useValue:this},{provide:Sc,useValue:this.componentFactoryResolver}],n.parent||so(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function r_(e,n,t=null){return new js({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}var Yw=(()=>{class e{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zd(!1,t.type),i=r.length>0?r_([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:e,providedIn:"environment",factory:()=>new e(q(Ke))})}return e})();function ot(e){return Us(()=>{let n=o_(e),t=$(F({},n),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===dh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:n.standalone?i=>i.get(Yw).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||kn.Emulated,styles:e.styles||ct,_:null,schemas:e.schemas||null,tView:null,id:""});n.standalone&&Fn("NgStandalone"),s_(t);let r=e.dependencies;return t.directiveDefs=Mv(r,!1),t.pipeDefs=Mv(r,!0),t.id=Qw(t),t})}function qw(e){return ri(e)||Wd(e)}function Kw(e){return e!==null}function _n(e){return Us(()=>({type:e.type,bootstrap:e.bootstrap||ct,declarations:e.declarations||ct,imports:e.imports||ct,exports:e.exports||ct,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Zw(e,n){if(e==null)return ni;let t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=Ec.None,l=null),t[o]=[r,a,l],n[o]=s}return t}function Xw(e){if(e==null)return ni;let n={};for(let t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}function an(e){return Us(()=>{let n=o_(e);return s_(n),n})}function o_(e){let n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputConfig:e.inputs||ni,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||ct,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Zw(e.inputs,n),outputs:Xw(e.outputs),debugInfo:null}}function s_(e){e.features?.forEach(n=>n(e))}function Mv(e,n){if(!e)return null;let t=n?Mm:qw;return()=>(typeof e=="function"?e():e).map(r=>t(r)).filter(Kw)}function Qw(e){let n=0,t=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,t,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function Jw(e){return Object.getPrototypeOf(e.prototype).constructor}function qs(e){let n=Jw(e.type),t=!0,r=[e];for(;n;){let i;if(mn(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new j(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);let s=e;s.inputs=If(e.inputs),s.declaredInputs=If(e.declaredInputs),s.outputs=If(e.outputs);let a=i.hostBindings;a&&rT(e,a);let l=i.viewQuery,c=i.contentQueries;if(l&&nT(e,l),c&&iT(e,c),eT(e,i),Em(e.outputs,i.outputs),mn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===qs&&(t=!1)}}n=Object.getPrototypeOf(n)}tT(r)}function eT(e,n){for(let t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;let r=n.inputs[t];r!==void 0&&(e.inputs[t]=r,e.declaredInputs[t]=n.declaredInputs[t])}}function tT(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Ps(i.hostAttrs,t=Ps(t,i.hostAttrs))}}function If(e){return e===ni?{}:e===ct?[]:e}function nT(e,n){let t=e.viewQuery;t?e.viewQuery=(r,i)=>{n(r,i),t(r,i)}:e.viewQuery=n}function iT(e,n){let t=e.contentQueries;t?e.contentQueries=(r,i,o)=>{n(r,i,o),t(r,i,o)}:e.contentQueries=n}function rT(e,n){let t=e.hostBindings;t?e.hostBindings=(r,i)=>{n(r,i),t(r,i)}:e.hostBindings=n}function oT(e,n,t,r,i,o,s,a,l){let c=n.consts,u=wc(n,e,4,s||null,a||null);lf()&&qy(n,t,u,li(c,l),Sy),u.mergedAttrs=Ps(u.mergedAttrs,u.attrs),Hv(n,u);let d=u.tView=gh(2,u,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return n.queries!==null&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}function Bs(e,n,t,r,i,o,s,a,l,c,u){let d=t+nt,p=n.firstCreatePass?oT(d,n,e,r,i,o,s,a,c):n.data[d];l&&(p.flags|=l),fo(p,!1);let h=sT(n,e,p,t);Wl()&&Dh(n,e,h,p),Ws(h,e);let g=Hy(h,e,h,p);return e[d]=g,vh(e,g),Pw(g,p,e),Ll(p)&&yh(n,e,p),c!=null&&wy(e,p,u),p}var sT=aT;function aT(e,n,t,r){return zl(!0),n[be].createComment("")}var Ic=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Ic||{}),hr=new W(""),a_=!1,Xf=class extends Oe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,Kd()&&(this.destroyRef=w(rn,{optional:!0})??void 0,this.pendingTasks=w(or,{optional:!0})??void 0)}emit(n){let t=G(null);try{super.next(n)}finally{G(t)}}subscribe(n,t,r){let i=n,o=t||(()=>null),s=r;if(n&&typeof n=="object"){let l=n;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return n instanceof We&&n.add(a),a}wrapInTimeout(n){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{n(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},it=Xf;function l_(e){let n,t;function r(){e=sr;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Av(e){return queueMicrotask(()=>e()),()=>{e=sr}}var Ah="isAngularZone",uc=Ah+"_ID",lT=0,fe=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new it(!1);onMicrotaskEmpty=new it(!1);onStable=new it(!1);onError=new it(!1);constructor(n){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=a_}=n;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,dT(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ah)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new j(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,n,cT,sr,sr);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}},cT={};function xh(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function uT(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function n(){l_(()=>{e.callbackScheduled=!1,Qf(e),e.isCheckStableRunning=!0,xh(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),Qf(e)}function dT(e){let n=()=>{uT(e)},t=lT++;e._inner=e._inner.fork({name:"angular",properties:{[Ah]:!0,[uc]:t,[uc+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(fT(l))return r.invokeTask(o,s,a,l);try{return xv(e),r.invokeTask(o,s,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&n(),Ov(e)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return xv(e),r.invoke(o,s,a,l,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!hT(l)&&n(),Ov(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Qf(e),xh(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Qf(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function xv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ov(e){e._nesting--,xh(e)}var Hs=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new it;onMicrotaskEmpty=new it;onStable=new it;onError=new it;run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}};function fT(e){return c_(e,"__ignore_ng_zone__")}function hT(e){return c_(e,"__scheduler_tick__")}function c_(e,n){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[n]===!0}var Oh=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:e,providedIn:"root",factory:()=>new e})}return e})(),u_=[0,1,2,3],d_=(()=>{class e{ngZone=w(fe);scheduler=w(Pt);errorHandler=w(St,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){w(hr,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ae(16),this.executing=!0;for(let r of u_)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ae(17)}register(t){let{view:r}=t;r!==void 0?((r[tr]??=[]).push(t),ci(r),r[B]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ic.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:e,providedIn:"root",factory:()=>new e})}return e})(),dc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,t,r,i,o,s=null){this.impl=n,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let n=this.view?.[tr];n&&(this.view[tr]=n.filter(t=>t!==this))}};function Nh(e,n){let t=n?.injector??w(Re);return Fn("NgAfterRender"),f_(e,t,n,!1)}function Co(e,n){!n?.injector&&Zd(Co);let t=n?.injector??w(Re);return Fn("NgAfterNextRender"),f_(e,t,n,!0)}function pT(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function f_(e,n,t,r){let i=n.get(Oh);i.impl??=n.get(d_);let o=n.get(hr,null,{optional:!0}),s=t?.manualCleanup!==!0?n.get(rn):null,a=n.get(po,null,{optional:!0}),l=new dc(i.impl,pT(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var Rh=new W("");function Mc(e){return!!e&&typeof e.then=="function"}function h_(e){return!!e&&typeof e.subscribe=="function"}var p_=new W("");var kh=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=w(p_,{optional:!0})??[];injector=w(Re);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ao(this.injector,i);if(Mc(o))t.push(o);else if(h_(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),g_=new W("");function m_(){dd(()=>{let e="";throw new j(600,e)})}function v_(e){return e.isBoundToModule}var gT=10;var pr=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=w(vn);afterRenderManager=w(Oh);zonelessEnabled=w(xs);rootEffectScheduler=w(Ns);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Oe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=w(or);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Se(t=>!t))}constructor(){w(hr,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=w(Ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Re.NULL){return this._injector.get(fe).run(()=>{ae(10);let s=t instanceof Tc;if(!this._injector.get(kh).done){let g="";throw new j(405,g)}let l;s?l=t:l=this._injector.get(Sc).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let c=v_(l)?void 0:this._injector.get(cc),u=r||l.selector,d=l.create(i,[],u,c),p=d.location.nativeElement,h=d.injector.get(Rh,null);return h?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),ks(this.components,d),h?.unregisterApplication(p)}),this._loadComponent(d),ae(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ae(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ic.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=G(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,G(t),this.afterTick.next(),ae(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(cr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<gT;)ae(14),this.synchronizeOnce(),ae(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ms(i))continue;let o=r&&!this.zonelessEnabled?0:1;Th(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ms(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ks(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(g_,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ks(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ks(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function Ln(e,n,t,r){let i=K(),o=rr();if(pi(i,o,n)){let s=Ie(),a=$l();C1(a,i,e,n,t,r)}return Ln}var Jf=class{destroy(n){}updateValue(n,t){}swap(n,t){let r=Math.min(n,t),i=Math.max(n,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(n,t){this.attach(t,this.detach(n))}};function Mf(e,n,t,r,i){return e===t&&Object.is(n,r)?1:Object.is(i(e,n),i(t,r))?-1:0}function mT(e,n,t){let r,i,o=0,s=e.length-1,a=void 0;if(Array.isArray(n)){let l=n.length-1;for(;o<=s&&o<=l;){let c=e.at(o),u=n[o],d=Mf(o,c,o,u,t);if(d!==0){d<0&&e.updateValue(o,u),o++;continue}let p=e.at(s),h=n[l],g=Mf(s,p,l,h,t);if(g!==0){g<0&&e.updateValue(s,h),s--,l--;continue}let y=t(o,c),v=t(s,p),_=t(o,u);if(Object.is(_,v)){let b=t(l,h);Object.is(b,y)?(e.swap(o,s),e.updateValue(s,h),l--,s--):e.move(s,o),e.updateValue(o,u),o++;continue}if(r??=new fc,i??=Rv(e,o,s,t),eh(e,r,o,_))e.updateValue(o,u),o++,s++;else if(i.has(_))r.set(y,e.detach(o)),s--;else{let b=e.create(o,n[o]);e.attach(o,b),o++,s++}}for(;o<=l;)Nv(e,r,t,o,n[o]),o++}else if(n!=null){let l=n[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let u=e.at(o),d=c.value,p=Mf(o,u,o,d,t);if(p!==0)p<0&&e.updateValue(o,d),o++,c=l.next();else{r??=new fc,i??=Rv(e,o,s,t);let h=t(o,d);if(eh(e,r,o,h))e.updateValue(o,d),o++,s++,c=l.next();else if(!i.has(h))e.attach(o,e.create(o,d)),o++,s++,c=l.next();else{let g=t(o,u);r.set(g,e.detach(o)),s--}}}for(;!c.done;)Nv(e,r,t,e.length,c.value),c=l.next()}for(;o<=s;)e.destroy(e.detach(s--));r?.forEach(l=>{e.destroy(l)})}function eh(e,n,t,r){return n!==void 0&&n.has(r)?(e.attach(t,n.get(r)),n.delete(r),!0):!1}function Nv(e,n,t,r,i){if(eh(e,n,r,t(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function Rv(e,n,t,r){let i=new Set;for(let o=n;o<=t;o++)i.add(r(o,e.at(o)));return i}var fc=class{kvMap=new Map;_vMap=void 0;has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let t=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(n,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,t){if(this.kvMap.has(n)){let r=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(n,t)}forEach(n){for(let[t,r]of this.kvMap)if(n(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),n(r,t)}}};function ft(e,n,t,r,i,o,s,a){Fn("NgControlFlow");let l=K(),c=Ie(),u=li(c.consts,o);return Bs(l,c,e,n,t,r,i,u,256,s,a),Ph}function Ph(e,n,t,r,i,o,s,a){Fn("NgControlFlow");let l=K(),c=Ie(),u=li(c.consts,o);return Bs(l,c,e,n,t,r,i,u,512,s,a),Ph}function ht(e,n){Fn("NgControlFlow");let t=K(),r=rr(),i=t[r]!==Vt?t[r]:-1,o=i!==-1?hc(t,nt+i):void 0,s=0;if(pi(t,r,e)){let a=G(null);try{if(o!==void 0&&Uy(o,s),e!==-1){let l=nt+e,c=hc(t,l),u=rh(t[z],l),d=Wy(c,u,t),p=zs(t,u,n,{dehydratedView:d});Ys(c,p,s,vo(u,d))}}finally{G(a)}}else if(o!==void 0){let a=Gy(o,s);a!==void 0&&(a[we]=n)}}var th=class{lContainer;$implicit;$index;constructor(n,t,r){this.lContainer=n,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-je}};function Ks(e){return e}var nh=class{hasEmptyBlock;trackByFn;liveCollection;constructor(n,t,r){this.hasEmptyBlock=n,this.trackByFn=t,this.liveCollection=r}};function Mt(e,n,t,r,i,o,s,a,l,c,u,d,p){Fn("NgControlFlow");let h=K(),g=Ie(),y=l!==void 0,v=K(),_=a?s.bind(v[dt][we]):s,b=new nh(y,_);v[nt+e]=b,Bs(h,g,e+1,n,t,r,i,li(g.consts,o),256),y&&Bs(h,g,e+2,l,c,u,d,li(g.consts,p),512)}var ih=class extends Jf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(n,t,r){super(),this.lContainer=n,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-je}at(n){return this.getLView(n)[we].$implicit}attach(n,t){let r=t[Xi];this.needsIndexUpdate||=n!==this.length,Ys(this.lContainer,t,n,vo(this.templateTNode,r))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,vT(this.lContainer,n)}create(n,t){let r=sc(this.lContainer,this.templateTNode.tView.ssrId),i=zs(this.hostLView,this.templateTNode,new th(this.lContainer,t,n),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(n){Cc(n[z],n),this.operationsCounter?.recordDestroy()}updateValue(n,t){this.getLView(n)[we].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[we].$index=n}getLView(n){return yT(this.lContainer,n)}};function At(e){let n=G(null),t=Rn();try{let r=K(),i=r[z],o=r[t],s=t+1,a=hc(r,s);if(o.liveCollection===void 0){let c=rh(i,s);o.liveCollection=new ih(a,r,c)}else o.liveCollection.reset();let l=o.liveCollection;if(mT(l,e,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=rr(),u=l.length===0;if(pi(r,c,u)){let d=t+2,p=hc(r,d);if(u){let h=rh(i,d),g=Wy(p,h,r),y=zs(r,h,void 0,{dehydratedView:g});Ys(p,y,0,vo(h,g))}else i.firstUpdatePass&&ow(p),Uy(p,0)}}}finally{G(n)}}function hc(e,n){return e[n]}function vT(e,n){return Vs(e,n)}function yT(e,n){return Gy(e,n)}function rh(e,n){return Is(e,n)}function me(e,n,t){let r=K(),i=rr();if(pi(r,i,n)){let o=Ie(),s=$l();v1(s,r,e,n,r[be],t)}return me}function oh(e,n,t,r,i){_h(n,e,t,i?"class":"style",r)}function A(e,n,t,r){let i=K(),o=Ie(),s=nt+e,a=i[be],l=o.firstCreatePass?Zy(s,o,i,n,Sy,lf(),t,r):o.data[s],c=_T(o,i,l,a,n,e);i[s]=c;let u=Ll(l);return fo(l,!0),_y(a,c,l),!bc(l)&&Wl()&&Dh(o,i,c,l),(Gm()===0||u)&&Ws(c,i),Um(),u&&(yh(o,i,l),uy(o,l,i)),r!==null&&wy(i,l),A}function x(){let e=bt();df()?ff():(e=e.parent,fo(e,!1));let n=e;Wm(n)&&zm(),$m();let t=Ie();return t.firstCreatePass&&Xy(t,n),n.classesWithoutHost!=null&&bD(n)&&oh(t,n,K(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&CD(n)&&oh(t,n,K(),n.stylesWithoutHost,!1),x}function Q(e,n,t,r){return A(e,n,t,r),x(),Q}var _T=(e,n,t,r,i,o)=>(zl(!0),my(r,i,rv()));function Ct(){return K()}function Ac(e,n,t){let r=K(),i=rr();if(pi(r,i,n)){let o=Ie(),s=$l();Ty(s,r,e,n,r[be],t)}return Ac}var Zs="en-US";var ET=Zs;function y_(e){typeof e=="string"&&(ET=e.toLowerCase().replace(/_/g,"-"))}function J(e,n,t){let r=K(),i=Ie(),o=bt();return bT(i,r,r[be],o,e,n,t),J}function bT(e,n,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=Tf(r,n,o),Ew(r,e,n,s,t,i,o,l)&&(a=!1)),a){let c=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let p=u[d],h=u[d+1];l??=Tf(r,n,o),wv(r,n,p,h,i,l)}if(c&&c.length)for(let d of c)l??=Tf(r,n,o),wv(r,n,d,i,i,l)}}function re(e=1){return iv(e)}function CT(e,n){let t=null,r=JD(e);for(let i=0;i<n.length;i++){let o=n[i];if(o==="*"){t=i;continue}if(r===null?gy(e,o,!0):n1(r,o))return i}return t}function Fh(e){let n=K()[dt][ut];if(!n.projection){let t=e?e.length:1,r=n.projection=Sm(t,null),i=r.slice(),o=n.child;for(;o!==null;){if(o.type!==128){let s=e?CT(o,e):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Lh(e,n=0,t,r,i,o){let s=K(),a=Ie(),l=r?e+1:null;l!==null&&Bs(s,a,l,r,i,o,null,t);let c=wc(a,nt+e,16,null,t||null);c.projection===null&&(c.projection=n),ff();let d=!s[Xi]||cf();s[dt][ut].projection[c.projection]===null&&l!==null?DT(s,a,l):d&&!bc(c)&&j1(a,s,c)}function DT(e,n,t){let r=nt+t,i=n.data[r],o=e[r],s=sc(o,i.tView.ssrId),a=zs(e,i,void 0,{dehydratedView:s});Ys(o,a,0,vo(i,s))}function Xs(e,n,t,r){Uw(e,n,t,r)}function Vn(e,n,t){Gw(e,n,t)}function jt(e){let n=K(),t=Ie(),r=mf();Hl(r+1);let i=Mh(t,r);if(e.dirty&&Lm(n)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=zw(n,r);e.reset(o,PD),e.notifyOnChanges()}return!0}return!1}function Bt(){return Hw(K(),mf())}function ql(e,n){return e<<17|n<<2}function ur(e){return e>>17&32767}function wT(e){return(e&2)==2}function TT(e,n){return e&131071|n<<17}function sh(e){return e|2}function _o(e){return(e&131068)>>2}function Af(e,n){return e&-131069|n<<2}function ST(e){return(e&1)===1}function ah(e){return e|1}function IT(e,n,t,r,i,o){let s=o?n.classBindings:n.styleBindings,a=ur(s),l=_o(s);e[r]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||oo(d,u)>0)&&(c=!0)}else u=t;if(i)if(l!==0){let p=ur(e[a+1]);e[r+1]=ql(p,a),p!==0&&(e[p+1]=Af(e[p+1],r)),e[a+1]=TT(e[a+1],r)}else e[r+1]=ql(a,0),a!==0&&(e[a+1]=Af(e[a+1],r)),a=r;else e[r+1]=ql(l,0),a===0?a=r:e[l+1]=Af(e[l+1],r),l=r;c&&(e[r+1]=sh(e[r+1])),kv(e,u,r,!0),kv(e,u,r,!1),MT(n,u,e,r,o),s=ql(a,l),o?n.classBindings=s:n.styleBindings=s}function MT(e,n,t,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof n=="string"&&oo(o,n)>=0&&(t[r+1]=ah(t[r+1]))}function kv(e,n,t,r){let i=e[t+1],o=n===null,s=r?ur(i):_o(i),a=!1;for(;s!==0&&(a===!1||o);){let l=e[s],c=e[s+1];AT(l,n)&&(a=!0,e[s+1]=r?ah(c):sh(c)),s=r?ur(c):_o(c)}a&&(e[t+1]=r?sh(i):ah(i))}function AT(e,n){return e===null||n==null||(Array.isArray(e)?e[1]:e)===n?!0:Array.isArray(e)&&typeof n=="string"?oo(e,n)>=0:!1}var sn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xT(e){return e.substring(sn.key,sn.keyEnd)}function OT(e){return NT(e),__(e,E_(e,0,sn.textEnd))}function __(e,n){let t=sn.textEnd;return t===n?-1:(n=sn.keyEnd=RT(e,sn.key=n,t),E_(e,n,t))}function NT(e){sn.key=0,sn.keyEnd=0,sn.value=0,sn.valueEnd=0,sn.textEnd=e.length}function E_(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function RT(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}function gi(e,n,t){return b_(e,n,t,!1),gi}function pt(e,n){return b_(e,n,null,!0),pt}function gr(e){PT(HT,kT,e,!0)}function kT(e,n){for(let t=OT(n);t>=0;t=__(n,t))kl(e,xT(n),!0)}function b_(e,n,t,r){let i=K(),o=Ie(),s=gf(2);if(o.firstUpdatePass&&D_(o,e,s,r),n!==Vt&&pi(i,s,n)){let a=o.data[Rn()];w_(o,a,i,i[be],e,i[s+1]=UT(n,t),r,s)}}function PT(e,n,t,r){let i=Ie(),o=gf(2);i.firstUpdatePass&&D_(i,null,o,r);let s=K();if(t!==Vt&&pi(s,o,t)){let a=i.data[Rn()];if(T_(a,r)&&!C_(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=Al(l,t||"")),oh(i,a,s,t,r)}else GT(i,a,s,s[be],s[o+1],s[o+1]=BT(e,n,t),r,o)}}function C_(e,n){return n>=e.expandoStartIndex}function D_(e,n,t,r){let i=e.data;if(i[t+1]===null){let o=i[Rn()],s=C_(e,t);T_(o,r)&&n===null&&!s&&(n=!1),n=FT(i,o,n,r),IT(i,o,n,t,s,r)}}function FT(e,n,t,r){let i=Jm(e),o=r?n.residualClasses:n.residualStyles;if(i===null)(r?n.classBindings:n.styleBindings)===0&&(t=xf(null,e,n,t,r),t=Gs(t,n.attrs,r),o=null);else{let s=n.directiveStylingLast;if(s===-1||e[s]!==i)if(t=xf(i,e,n,t,r),o===null){let l=LT(e,n,r);l!==void 0&&Array.isArray(l)&&(l=xf(null,e,n,l[1],r),l=Gs(l,n.attrs,r),VT(e,n,r,l))}else o=jT(e,n,r)}return o!==void 0&&(r?n.residualClasses=o:n.residualStyles=o),t}function LT(e,n,t){let r=t?n.classBindings:n.styleBindings;if(_o(r)!==0)return e[ur(r)]}function VT(e,n,t,r){let i=t?n.classBindings:n.styleBindings;e[ur(i)]=r}function jT(e,n,t){let r,i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Gs(r,s,t)}return Gs(r,n.attrs,t)}function xf(e,n,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=n[a],r=Gs(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(t.directiveStylingLast=a),r}function Gs(e,n,t){let r=t?1:2,i=-1;if(n!==null)for(let o=0;o<n.length;o++){let s=n[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),kl(e,s,t?!0:n[++o]))}return e===void 0?null:e}function BT(e,n,t){if(t==null||t==="")return ct;let r=[],i=_c(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&n(r,i);return r}function HT(e,n,t){let r=String(n);r!==""&&!r.includes(" ")&&kl(e,r,t)}function GT(e,n,t,r,i,o,s,a){i===Vt&&(i=ct);let l=0,c=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let p=l<i.length?i[l+1]:void 0,h=c<o.length?o[c+1]:void 0,g=null,y;u===d?(l+=2,c+=2,p!==h&&(g=d,y=h)):d===null||u!==null&&u<d?(l+=2,g=u):(c+=2,g=d,y=h),g!==null&&w_(e,n,t,r,g,y,s,a),u=l<i.length?i[l]:null,d=c<o.length?o[c]:null}}function w_(e,n,t,r,i,o,s,a){if(!(n.type&3))return;let l=e.data,c=l[a+1],u=ST(c)?Pv(l,n,t,i,_o(c),s):void 0;if(!pc(u)){pc(o)||wT(c)&&(o=Pv(l,null,t,i,a,s));let d=tf(Rn(),t);H1(r,s,d,i,o)}}function Pv(e,n,t,r,i,o){let s=n===null,a;for(;i>0;){let l=e[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,p=t[i+1];p===Vt&&(p=d?ct:void 0);let h=d?Pl(p,r):u===r?p:void 0;if(c&&!pc(h)&&(h=Pl(l,r)),pc(h)&&(a=h,s))return a;let g=e[i+1];i=s?ur(g):_o(g)}if(n!==null){let l=o?n.residualClasses:n.residualStyles;l!=null&&(a=Pl(l,r))}return a}function pc(e){return e!==void 0}function UT(e,n){return e==null||e===""||(typeof n=="string"?e=e+n:typeof e=="object"&&(e=Tt(_c(e)))),e}function T_(e,n){return(e.flags&(n?8:16))!==0}function X(e,n=""){let t=K(),r=Ie(),i=e+nt,o=r.firstCreatePass?wc(r,i,1,n,null):r.data[i],s=$T(r,t,o,n,e);t[i]=s,Wl()&&Dh(r,t,s,o),fo(o,!1)}var $T=(e,n,t,r,i)=>(zl(!0),s1(n[be],r));function S_(e,n,t,r=""){return pi(e,rr(),t)?n+Cs(t)+r:Vt}function gt(e){return Do("",e),gt}function Do(e,n,t){let r=K(),i=S_(r,e,n,t);return i!==Vt&&WT(r,Rn(),i),Do}function WT(e,n,t){let r=tf(n,e);a1(e[be],r,t)}function Vh(e,n,t=""){return S_(K(),e,n,t)}function zT(e,n,t){let r=Ie();if(r.firstCreatePass){let i=mn(e);lh(t,r.data,r.blueprint,i,!0),lh(n,r.data,r.blueprint,i,!1)}}function lh(e,n,t,r,i){if(e=qe(e),Array.isArray(e))for(let o=0;o<e.length;o++)lh(e[o],n,t,r,i);else{let o=Ie(),s=K(),a=bt(),l=zi(e)?e:qe(e.provide),c=qd(e),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(zi(e)||!e.multi){let h=new lr(c,i,fr),g=Nf(l,n,i?u:u+p,d);g===-1?(kf(nc(a,s),o,l),Of(o,e,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(h),s.push(h)):(t[g]=h,s[g]=h)}else{let h=Nf(l,n,u+p,d),g=Nf(l,n,u,u+p),y=h>=0&&t[h],v=g>=0&&t[g];if(i&&!v||!i&&!y){kf(nc(a,s),o,l);let _=KT(i?qT:YT,t.length,i,r,c);!i&&v&&(t[g].providerFactory=_),Of(o,e,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),s.push(_)}else{let _=I_(t[i?g:h],c,!i&&r);Of(o,e,h>-1?h:g,_)}!i&&r&&v&&t[g].componentProviders++}}}function Of(e,n,t,r){let i=zi(n),o=Rm(n);if(i||o){let l=(o?qe(n.useClass):n).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){let u=c.indexOf(t);u===-1?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function I_(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Nf(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function YT(e,n,t,r){return ch(this.multi,[])}function qT(e,n,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Fs(t,t[z],this.providerFactory.index,r);o=a.slice(0,s),ch(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],ch(i,o);return o}function ch(e,n){for(let t=0;t<e.length;t++){let r=e[t];n.push(r())}return n}function KT(e,n,t,r,i){let o=new lr(e,t,fr);return o.multi=[],o.index=n,o.componentProviders=0,I_(o,i,r&&!t),o}function xc(e,n=[]){return t=>{t.providersResolver=(r,i)=>zT(r,i?i(e):e,n)}}function wo(e,n,t){let r=qm()+e,i=K();return i[r]===Vt?yw(i,r,t?n.call(t):n()):_w(i,r)}var ZT=(()=>{class e{zone=w(fe);changeDetectionScheduler=w(Pt);applicationRef=w(pr);applicationErrorHandler=w(vn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function M_({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new fe($(F({},A_()),{scheduleInRootZone:t})),[{provide:fe,useFactory:e},{provide:ii,multi:!0,useFactory:()=>{let r=w(ZT,{optional:!0});return()=>r.initialize()}},{provide:ii,multi:!0,useFactory:()=>{let r=w(XT);return()=>{r.initialize()}}},n===!0?{provide:bf,useValue:!0}:[],{provide:Yl,useValue:t??a_},{provide:vn,useFactory:()=>{let r=w(fe),i=w(Ke),o;return s=>{o??=i.get(St),r.runOutsideAngular(()=>o.handleError(s))}}}]}function A_(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var XT=(()=>{class e{subscription=new We;initialized=!1;zone=w(fe);pendingTasks=w(or);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var jh=(()=>{class e{applicationErrorHandler=w(vn);appRef=w(pr);taskService=w(or);ngZone=w(fe);zonelessEnabled=w(xs);tracing=w(hr,{optional:!0});disableScheduling=w(bf,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new We;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(uc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(w(Yl,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Hs||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Av:l_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(uc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Av(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Bh(){return Fn("NgZoneless"),Zi([{provide:Pt,useExisting:jh},{provide:fe,useClass:Hs},{provide:xs,useValue:!0},{provide:Yl,useValue:!1},[]])}function QT(){return typeof $localize<"u"&&$localize.locale||Zs}var Oc=new W("",{providedIn:"root",factory:()=>w(Oc,{optional:!0,skipSelf:!0})||QT()});var Nc=class{destroyed=!1;listeners=null;errorHandler=w(St,{optional:!0});destroyRef=w(rn);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(n){if(this.destroyed)throw new j(953,!1);return(this.listeners??=[]).push(n),{unsubscribe:()=>{let t=this.listeners?.indexOf(n);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(n){if(this.destroyed){console.warn(bs(953,!1));return}if(this.listeners===null)return;let t=G(null);try{for(let r of this.listeners)try{r(n)}catch(i){this.errorHandler?.handleError(i)}}finally{G(t)}}};function st(e,n){return qa(e,n?.equal)}var Hh=class{[Et];constructor(n){this[Et]=n}destroy(){this[Et].destroy()}};function mr(e,n){let t=n?.injector??w(Re),r=n?.manualCleanup!==!0?t.get(rn):null,i,o=t.get(po,null,{optional:!0}),s=t.get(Pt);return o!==null?(i=tS(o.view,s,e),r instanceof Es&&r._lView===o.view&&(r=null)):i=nS(e,t.get(Ns),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Hh(i)}var x_=$(F({},Pi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:sr,run(){if(this.dirty=!1,this.hasRun&&!Kr(this))return;this.hasRun=!0;let e=r=>(this.cleanupFns??=[]).push(r),n=Fi(this),t=ho(!1);try{this.maybeCleanup(),this.fn(e)}finally{ho(t),qr(this,n)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let e=G(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],G(e)}}}),JT=$(F({},x_),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Zr(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),eS=$(F({},x_),{consumerMarkedDirty(){this.view[B]|=8192,ci(this.view),this.notifier.notify(13)},destroy(){Zr(this),this.onDestroyFn(),this.maybeCleanup(),this.view[On]?.delete(this)}});function tS(e,n,t){let r=Object.create(eS);return r.view=e,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=n,r.fn=t,e[On]??=new Set,e[On].add(r),r.consumerMarkedDirty(r),r}function nS(e,n,t){let r=Object.create(JT);return r.fn=e,r.scheduler=n,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}var k_=Symbol("InputSignalNode#UNSET"),IS=$(F({},Ka),{transformFn:void 0,applyValueToInputSignal(e,n){ds(e,n)}});function P_(e,n){let t=Object.create(IS);t.value=e,t.transformFn=n?.transform;function r(){if(us(t),t.value===k_){let i=null;throw new j(-950,i)}return t.value}return r[Et]=t,r}var MS=new W("");MS.__NG_ELEMENT_ID__=e=>{let n=bt();if(n===null)throw new j(204,!1);if(n.type&2)return n.value;if(e&8)return null;throw new j(204,!1)};function kc(e){return new Nc}function O_(e,n){return P_(e,n)}function AS(e){return P_(k_,e)}var jn=(O_.required=AS,O_);var Gh=new W(""),xS=new W("");function Qs(e){return!e.moduleRef}function OS(e){let n=Qs(e)?e.r3Injector:e.moduleRef.injector,t=n.get(fe);return t.run(()=>{Qs(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=n.get(vn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Qs(e)){let o=()=>n.destroy(),s=e.platformInjector.get(Gh);s.add(o),n.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Gh);s.add(o),e.moduleRef.onDestroy(()=>{ks(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return RS(r,t,()=>{let o=n.get(kh);return o.runInitializers(),o.donePromise.then(()=>{let s=n.get(Oc,Zs);if(y_(s||Zs),!n.get(xS,!0))return Qs(e)?n.get(pr):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Qs(e)){let l=n.get(pr);return e.rootComponent!==void 0&&l.bootstrap(e.rootComponent),l}else return NS?.(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}var NS;function RS(e,n,t){try{let r=t();return Mc(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e(r)),r}}var Rc=null;function kS(e=[],n){return Re.create({name:n,providers:[{provide:ws,useValue:"platform"},{provide:Gh,useValue:new Set([()=>Rc=null])},...e]})}function PS(e=[]){if(Rc)return Rc;let n=kS(e);return Rc=n,m_(),FS(n),n}function FS(e){let n=e.get(vc,null);ao(e,()=>{n?.forEach(t=>t())})}var vr=(()=>{class e{static __NG_ELEMENT_ID__=LS}return e})();function LS(e){return VS(bt(),K(),(e&16)===16)}function VS(e,n,t){if(ai(e)&&!t){let r=nn(e.index,n);return new di(r,r)}else if(e.type&175){let r=n[dt];return new di(r,n)}return null}function F_(e){ae(8);try{let{rootComponent:n,appProviders:t,platformProviders:r}=e,i=PS(r),o=[M_({}),{provide:Pt,useExisting:jh},av,...t||[]],s=new js({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return OS({r3Injector:s.injector,platformInjector:i,rootComponent:n})}catch(n){return Promise.reject(n)}finally{ae(9)}}function Pc(e,n){let t=ri(e),r=n.elementInjector||so();return new yo(t).create(r,n.projectableNodes,n.hostElement,n.environmentInjector,n.directives,n.bindings)}var L_=null;function ea(){return L_}function Uh(e){L_??=e}var Js=class{};var Ht=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=_n({type:e});static \u0275inj=Qt({})}return e})();function ta(e,n){n=encodeURIComponent(n);for(let t of e.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}var yr=class{};var V_="browser",BS="server";function j_(e){return e===BS}var Vc=new W(""),Yh=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||e)(q(Vc),q(fe))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),na=class{_doc;constructor(n){this._doc=n}manager},Fc="ng-app-id";function B_(e){for(let n of e)n.remove()}function H_(e,n){let t=n.createElement("style");return t.textContent=e,t}function HS(e,n,t,r){let i=e.head?.querySelectorAll(`style[${Fc}="${n}"],link[${Fc}="${n}"]`);if(i)for(let o of i)o.removeAttribute(Fc),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Wh(e,n){let t=n.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),t}var qh=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=j_(o),HS(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,H_);r?.forEach(i=>this.addUsage(i,this.external,Wh))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(B_(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])B_(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,H_(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Wh(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Fc,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||e)(q(Me),q(mc),q(yc,8),q(dr))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),$h={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Kh=/%COMP%/g;var U_="%COMP%",GS=`_nghost-${U_}`,US=`_ngcontent-${U_}`,$S=!0,WS=new W("",{providedIn:"root",factory:()=>$S});function zS(e){return US.replace(Kh,e)}function YS(e){return GS.replace(Kh,e)}function $_(e,n){return n.map(t=>t.replace(Kh,e))}var Zh=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new ia(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Lc?i.applyToHost(t):i instanceof ra&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case kn.Emulated:o=new Lc(l,c,r,this.appId,u,s,a,d,p);break;case kn.ShadowDom:return new zh(l,c,t,r,s,a,this.nonce,d,p);default:o=new ra(l,c,r,u,s,a,d,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||e)(q(Yh),q(qh),q(mc),q(WS),q(Me),q(dr),q(fe),q(yc),q(hr,8))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),ia=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,t,r,i,o){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(n,t){return t?this.doc.createElementNS($h[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(G_(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(G_(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;let o=$h[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){let i=$h[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(Pn.DashCase|Pn.Important)?n.style.setProperty(t,r,i&Pn.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&Pn.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n!=null&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r,i){if(typeof n=="string"&&(n=ea().getGlobalEventTarget(this.doc,n),!n))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(n,t,o)),this.eventManager.addEventListener(n,t,o,i)}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;n(t)===!1&&t.preventDefault()}}};function G_(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var zh=class extends ia{sharedStylesHost;hostEl;shadowRoot;constructor(n,t,r,i,o,s,a,l,c){super(n,o,s,l,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=$_(i.id,u);for(let p of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let p of d){let h=Wh(p,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ra=class extends ia{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,t,r,i,o,s,a,l,c){super(n,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?$_(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Lc=class extends ra{contentAttr;hostAttr;constructor(n,t,r,i,o,s,a,l,c){let u=i+"-"+r.id;super(n,t,r,o,s,a,l,c,u),this.contentAttr=zS(u),this.hostAttr=YS(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}};var jc=class e extends Js{supportsDOMEvents=!0;static makeCurrent(){Uh(new e)}onAndCancel(n,t,r,i){return n.addEventListener(t,r,i),()=>{n.removeEventListener(t,r,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=qS();return t==null?null:KS(t)}resetBaseElement(){oa=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return ta(document.cookie,n)}},oa=null;function qS(){return oa=oa||document.head.querySelector("base"),oa?oa.getAttribute("href"):null}function KS(e){return new URL(e,document.baseURI).pathname}var ZS=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),z_=(()=>{class e extends na{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(q(Me))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),W_=["alt","control","meta","shift"],XS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QS={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Y_=(()=>{class e extends na{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ea().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),W_.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=XS[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),W_.forEach(s=>{if(s!==i){let a=QS[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||e)(q(Me))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})();function Xh(e,n){return F_(F({rootComponent:e},JS(n)))}function JS(e){return{appProviders:[...rI,...e?.providers??[]],platformProviders:iI}}function eI(){jc.makeCurrent()}function tI(){return new St}function nI(){return fh(document),document}var iI=[{provide:dr,useValue:V_},{provide:vc,useValue:eI,multi:!0},{provide:Me,useFactory:nI}];var rI=[{provide:ws,useValue:"root"},{provide:St,useFactory:tI},{provide:Vc,useClass:z_,multi:!0,deps:[Me]},{provide:Vc,useClass:Y_,multi:!0,deps:[Me]},Zh,qh,Yh,{provide:cr,useExisting:Zh},{provide:yr,useClass:ZS},[]];var Io=class{},sa=class{},mi=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){let t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){let t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,t);let i=(n.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=n.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(n,t){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(n,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}};var Hc=class{encodeKey(n){return q_(n)}encodeValue(n){return q_(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function oI(e,n){let t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var sI=/%(\d[a-f0-9])/gi,aI={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function q_(e){return encodeURIComponent(e).replace(sI,(n,t)=>aI[t]??n)}function Bc(e){return`${e}`}var Bn=class e{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new Hc,n.fromString){if(n.fromObject)throw new j(2805,!1);this.map=oI(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{let r=n.fromObject[t],i=Array.isArray(r)?r.map(Bc):[Bc(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){let t=[];return Object.keys(n).forEach(r=>{let i=n[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let t=new e({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let t=(n.op==="a"?this.map.get(n.param):void 0)||[];t.push(Bc(n.value)),this.map.set(n.param,t);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],i=r.indexOf(Bc(n.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var Gc=class{map=new Map;set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function lI(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function K_(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Z_(e){return typeof Blob<"u"&&e instanceof Blob}function X_(e){return typeof FormData<"u"&&e instanceof FormData}function cI(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Q_="Content-Type",J_="Accept",e0="X-Request-URL",t0="text/plain",n0="application/json",uI=`${n0}, ${t0}, */*`,So=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,t,r,i){this.url=t,this.method=n.toUpperCase();let o;if(lI(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new mi,this.context??=new Gc,!this.params)this.params=new Bn,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||K_(this.body)||Z_(this.body)||X_(this.body)||cI(this.body)?this.body:this.body instanceof Bn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||X_(this.body)?null:Z_(this.body)?this.body.type||null:K_(this.body)?null:typeof this.body=="string"?t0:this.body instanceof Bn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?n0:null}clone(n={}){let t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=n.keepalive??this.keepalive,s=n.transferCache??this.transferCache,a=n.body!==void 0?n.body:this.body,l=n.withCredentials??this.withCredentials,c=n.reportProgress??this.reportProgress,u=n.headers||this.headers,d=n.params||this.params,p=n.context??this.context;return n.setHeaders!==void 0&&(u=Object.keys(n.setHeaders).reduce((h,g)=>h.set(g,n.setHeaders[g]),u)),n.setParams&&(d=Object.keys(n.setParams).reduce((h,g)=>h.set(g,n.setParams[g]),d)),new e(t,r,a,{params:d,headers:u,context:p,reportProgress:c,responseType:i,withCredentials:l,transferCache:s,keepalive:o})}},_r=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(_r||{}),Mo=class{headers;status;statusText;url;ok;type;constructor(n,t=200,r="OK"){this.headers=n.headers||new mi,this.status=n.status!==void 0?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},Uc=class e extends Mo{constructor(n={}){super(n)}type=_r.ResponseHeader;clone(n={}){return new e({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},aa=class e extends Mo{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=_r.Response;clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},la=class extends Mo{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},dI=200,fI=204;function Qh(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache,keepalive:e.keepalive}}var Wc=(()=>{class e{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof So)o=t;else{let l;i.headers instanceof mi?l=i.headers:l=new mi(i.headers);let c;i.params&&(i.params instanceof Bn?c=i.params:c=new Bn({fromObject:i.params})),o=new So(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let s=Mn(o).pipe(bd(l=>this.handler.handle(l)));if(t instanceof So||i.observe==="events")return s;let a=s.pipe(hn(l=>l instanceof aa));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Se(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new j(2806,!1);return l.body}));case"blob":return a.pipe(Se(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new j(2807,!1);return l.body}));case"text":return a.pipe(Se(l=>{if(l.body!==null&&typeof l.body!="string")throw new j(2808,!1);return l.body}));case"json":default:return a.pipe(Se(l=>l.body))}case"response":return a;default:throw new j(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Bn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Qh(i,r))}post(t,r,i={}){return this.request("POST",t,Qh(i,r))}put(t,r,i={}){return this.request("PUT",t,Qh(i,r))}static \u0275fac=function(r){return new(r||e)(q(Io))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})();var hI=new W("");function pI(e,n){return n(e)}function gI(e,n,t){return(r,i)=>ao(t,()=>n(r,o=>e(o,i)))}var i0=new W(""),r0=new W(""),o0=new W("",{providedIn:"root",factory:()=>!0});var $c=(()=>{class e extends Io{backend;injector;chain=null;pendingTasks=w(Os);contributeToStability=w(o0);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(i0),...this.injector.get(r0,[])]));this.chain=r.reduceRight((i,o)=>gI(i,o,this.injector),pI)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Cl(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(q(sa),q(Ke))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})();var mI=/^\)\]\}',?\n/,vI=RegExp(`^${e0}:`,"m");function yI(e){return"responseURL"in e&&e.responseURL?e.responseURL:vI.test(e.getAllResponseHeaders())?e.getResponseHeader(e0):null}var Jh=(()=>{class e{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new j(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?Gi(r.\u0275loadImpl()):Mn(null)).pipe(gs(()=>new ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((y,v)=>s.setRequestHeader(y,v.join(","))),t.headers.has(J_)||s.setRequestHeader(J_,uI),!t.headers.has(Q_)){let y=t.detectContentTypeHeader();y!==null&&s.setRequestHeader(Q_,y)}if(t.responseType){let y=t.responseType.toLowerCase();s.responseType=y!=="json"?y:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let y=s.statusText||"OK",v=new mi(s.getAllResponseHeaders()),_=yI(s)||t.url;return l=new Uc({headers:v,status:s.status,statusText:y,url:_}),l},u=()=>{let{headers:y,status:v,statusText:_,url:b}=c(),E=null;v!==fI&&(E=typeof s.response>"u"?s.responseText:s.response),v===0&&(v=E?dI:0);let C=v>=200&&v<300;if(t.responseType==="json"&&typeof E=="string"){let T=E;E=E.replace(mI,"");try{E=E!==""?JSON.parse(E):null}catch(I){E=T,C&&(C=!1,E={error:I,text:E})}}C?(o.next(new aa({body:E,headers:y,status:v,statusText:_,url:b||void 0})),o.complete()):o.error(new la({error:E,headers:y,status:v,statusText:_,url:b||void 0}))},d=y=>{let{url:v}=c(),_=new la({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});o.error(_)},p=!1,h=y=>{p||(o.next(c()),p=!0);let v={type:_r.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(v.total=y.total),t.responseType==="text"&&s.responseText&&(v.partialText=s.responseText),o.next(v)},g=y=>{let v={type:_r.UploadProgress,loaded:y.loaded};y.lengthComputable&&(v.total=y.total),o.next(v)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),t.reportProgress&&(s.addEventListener("progress",h),a!==null&&s.upload&&s.upload.addEventListener("progress",g)),s.send(a),o.next({type:_r.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),t.reportProgress&&(s.removeEventListener("progress",h),a!==null&&s.upload&&s.upload.removeEventListener("progress",g)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||e)(q(yr))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})(),s0=new W(""),_I="XSRF-TOKEN",EI=new W("",{providedIn:"root",factory:()=>_I}),bI="X-XSRF-TOKEN",CI=new W("",{providedIn:"root",factory:()=>bI}),ca=class{},DI=(()=>{class e{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ta(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||e)(q(Me),q(EI))};static \u0275prov=H({token:e,factory:e.\u0275fac})}return e})();function wI(e,n){let t=e.url.toLowerCase();if(!w(s0)||e.method==="GET"||e.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return n(e);let r=w(ca).getToken(),i=w(CI);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),n(e)}function ep(...e){let n=[Wc,Jh,$c,{provide:Io,useExisting:$c},{provide:sa,useFactory:()=>w(hI,{optional:!0})??w(Jh)},{provide:i0,useValue:wI,multi:!0},{provide:s0,useValue:!0},{provide:ca,useClass:DI}];for(let t of e)n.push(...t.\u0275providers);return Zi(n)}var a0={providers:[_f(),Bh(),ep()]};var SI={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},HW=$(F({},SI),{"[class.ng-submitted]":"isSubmitted"});var II=new W("",{providedIn:"root",factory:()=>l0}),l0="always";var MI=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=_n({type:e});static \u0275inj=Qt({})}return e})();var zc=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:II,useValue:t.callSetDisabledState??l0}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=_n({type:e});static \u0275inj=Qt({imports:[MI]})}return e})();var Ae="top",Xe="bottom",Be="right",Pe="left",Yc="auto",vi=[Ae,Xe,Be,Pe],Hn="start",Er="end",c0="clippingParents",qc="viewport",Ao="popper",u0="reference",tp=vi.reduce(function(e,n){return e.concat([n+"-"+Hn,n+"-"+Er])},[]),Kc=[].concat(vi,[Yc]).reduce(function(e,n){return e.concat([n,n+"-"+Hn,n+"-"+Er])},[]),AI="beforeRead",xI="read",OI="afterRead",NI="beforeMain",RI="main",kI="afterMain",PI="beforeWrite",FI="write",LI="afterWrite",d0=[AI,xI,OI,NI,RI,kI,PI,FI,LI];function He(e){return e?(e.nodeName||"").toLowerCase():null}function ve(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function Gt(e){var n=ve(e).Element;return e instanceof n||e instanceof Element}function Fe(e){var n=ve(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function xo(e){if(typeof ShadowRoot>"u")return!1;var n=ve(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}function VI(e){var n=e.state;Object.keys(n.elements).forEach(function(t){var r=n.styles[t]||{},i=n.attributes[t]||{},o=n.elements[t];!Fe(o)||!He(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function jI(e){var n=e.state,t={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,t.popper),n.styles=t,n.elements.arrow&&Object.assign(n.elements.arrow.style,t.arrow),function(){Object.keys(n.elements).forEach(function(r){var i=n.elements[r],o=n.attributes[r]||{},s=Object.keys(n.styles.hasOwnProperty(r)?n.styles[r]:t[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!Fe(i)||!He(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}var f0={name:"applyStyles",enabled:!0,phase:"write",fn:VI,effect:jI,requires:["computeStyles"]};function Ge(e){return e.split("-")[0]}var ln=Math.max,br=Math.min,Gn=Math.round;function Oo(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function ua(){return!/^((?!chrome|android).)*safari/i.test(Oo())}function Ut(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!1);var r=e.getBoundingClientRect(),i=1,o=1;n&&Fe(e)&&(i=e.offsetWidth>0&&Gn(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Gn(r.height)/e.offsetHeight||1);var s=Gt(e)?ve(e):window,a=s.visualViewport,l=!ua()&&t,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,p=r.height/o;return{width:d,height:p,top:u,right:c+d,bottom:u+p,left:c,x:c,y:u}}function Cr(e){var n=Ut(e),t=e.offsetWidth,r=e.offsetHeight;return Math.abs(n.width-t)<=1&&(t=n.width),Math.abs(n.height-r)<=1&&(r=n.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:r}}function da(e,n){var t=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(t&&xo(t)){var r=n;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function mt(e){return ve(e).getComputedStyle(e)}function np(e){return["table","td","th"].indexOf(He(e))>=0}function Qe(e){return((Gt(e)?e.ownerDocument:e.document)||window.document).documentElement}function Un(e){return He(e)==="html"?e:e.assignedSlot||e.parentNode||(xo(e)?e.host:null)||Qe(e)}function h0(e){return!Fe(e)||mt(e).position==="fixed"?null:e.offsetParent}function BI(e){var n=/firefox/i.test(Oo()),t=/Trident/i.test(Oo());if(t&&Fe(e)){var r=mt(e);if(r.position==="fixed")return null}var i=Un(e);for(xo(i)&&(i=i.host);Fe(i)&&["html","body"].indexOf(He(i))<0;){var o=mt(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||n&&o.willChange==="filter"||n&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function cn(e){for(var n=ve(e),t=h0(e);t&&np(t)&&mt(t).position==="static";)t=h0(t);return t&&(He(t)==="html"||He(t)==="body"&&mt(t).position==="static")?n:t||BI(e)||n}function Dr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function wr(e,n,t){return ln(e,br(n,t))}function p0(e,n,t){var r=wr(e,n,t);return r>t?t:r}function fa(){return{top:0,right:0,bottom:0,left:0}}function ha(e){return Object.assign({},fa(),e)}function pa(e,n){return n.reduce(function(t,r){return t[r]=e,t},{})}var HI=function(n,t){return n=typeof n=="function"?n(Object.assign({},t.rects,{placement:t.placement})):n,ha(typeof n!="number"?n:pa(n,vi))};function GI(e){var n,t=e.state,r=e.name,i=e.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,a=Ge(t.placement),l=Dr(a),c=[Pe,Be].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=HI(i.padding,t),p=Cr(o),h=l==="y"?Ae:Pe,g=l==="y"?Xe:Be,y=t.rects.reference[u]+t.rects.reference[l]-s[l]-t.rects.popper[u],v=s[l]-t.rects.reference[l],_=cn(o),b=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,E=y/2-v/2,C=d[h],T=b-p[u]-d[g],I=b/2-p[u]/2+E,S=wr(C,I,T),D=l;t.modifiersData[r]=(n={},n[D]=S,n.centerOffset=S-I,n)}}function UI(e){var n=e.state,t=e.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=n.elements.popper.querySelector(i),!i)||da(n.elements.popper,i)&&(n.elements.arrow=i))}var ip={name:"arrow",enabled:!0,phase:"main",fn:GI,effect:UI,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $t(e){return e.split("-")[1]}var $I={top:"auto",right:"auto",bottom:"auto",left:"auto"};function WI(e,n){var t=e.x,r=e.y,i=n.devicePixelRatio||1;return{x:Gn(t*i)/i||0,y:Gn(r*i)/i||0}}function g0(e){var n,t=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,p=s.x,h=p===void 0?0:p,g=s.y,y=g===void 0?0:g,v=typeof u=="function"?u({x:h,y}):{x:h,y};h=v.x,y=v.y;var _=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),E=Pe,C=Ae,T=window;if(c){var I=cn(t),S="clientHeight",D="clientWidth";if(I===ve(t)&&(I=Qe(t),mt(I).position!=="static"&&a==="absolute"&&(S="scrollHeight",D="scrollWidth")),I=I,i===Ae||(i===Pe||i===Be)&&o===Er){C=Xe;var N=d&&I===T&&T.visualViewport?T.visualViewport.height:I[S];y-=N-r.height,y*=l?1:-1}if(i===Pe||(i===Ae||i===Xe)&&o===Er){E=Be;var O=d&&I===T&&T.visualViewport?T.visualViewport.width:I[D];h-=O-r.width,h*=l?1:-1}}var Y=Object.assign({position:a},c&&$I),M=u===!0?WI({x:h,y},ve(t)):{x:h,y};if(h=M.x,y=M.y,l){var ne;return Object.assign({},Y,(ne={},ne[C]=b?"0":"",ne[E]=_?"0":"",ne.transform=(T.devicePixelRatio||1)<=1?"translate("+h+"px, "+y+"px)":"translate3d("+h+"px, "+y+"px, 0)",ne))}return Object.assign({},Y,(n={},n[C]=b?y+"px":"",n[E]=_?h+"px":"",n.transform="",n))}function zI(e){var n=e.state,t=e.options,r=t.gpuAcceleration,i=r===void 0?!0:r,o=t.adaptive,s=o===void 0?!0:o,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:Ge(n.placement),variation:$t(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:i,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,g0(Object.assign({},c,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:s,roundOffsets:l})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,g0(Object.assign({},c,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var m0={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:zI,data:{}};var Zc={passive:!0};function YI(e){var n=e.state,t=e.instance,r=e.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=ve(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",t.update,Zc)}),a&&l.addEventListener("resize",t.update,Zc),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Zc)}),a&&l.removeEventListener("resize",t.update,Zc)}}var v0={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:YI,data:{}};var qI={left:"right",right:"left",bottom:"top",top:"bottom"};function No(e){return e.replace(/left|right|bottom|top/g,function(n){return qI[n]})}var KI={start:"end",end:"start"};function Xc(e){return e.replace(/start|end/g,function(n){return KI[n]})}function Tr(e){var n=ve(e),t=n.pageXOffset,r=n.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Sr(e){return Ut(Qe(e)).left+Tr(e).scrollLeft}function rp(e,n){var t=ve(e),r=Qe(e),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=ua();(c||!c&&n==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+Sr(e),y:l}}function op(e){var n,t=Qe(e),r=Tr(e),i=(n=e.ownerDocument)==null?void 0:n.body,o=ln(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=ln(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Sr(e),l=-r.scrollTop;return mt(i||t).direction==="rtl"&&(a+=ln(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function Ir(e){var n=mt(e),t=n.overflow,r=n.overflowX,i=n.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function Qc(e){return["html","body","#document"].indexOf(He(e))>=0?e.ownerDocument.body:Fe(e)&&Ir(e)?e:Qc(Un(e))}function yi(e,n){var t;n===void 0&&(n=[]);var r=Qc(e),i=r===((t=e.ownerDocument)==null?void 0:t.body),o=ve(r),s=i?[o].concat(o.visualViewport||[],Ir(r)?r:[]):r,a=n.concat(s);return i?a:a.concat(yi(Un(s)))}function Ro(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ZI(e,n){var t=Ut(e,!1,n==="fixed");return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function y0(e,n,t){return n===qc?Ro(rp(e,t)):Gt(n)?ZI(n,t):Ro(op(Qe(e)))}function XI(e){var n=yi(Un(e)),t=["absolute","fixed"].indexOf(mt(e).position)>=0,r=t&&Fe(e)?cn(e):e;return Gt(r)?n.filter(function(i){return Gt(i)&&da(i,r)&&He(i)!=="body"}):[]}function sp(e,n,t,r){var i=n==="clippingParents"?XI(e):[].concat(n),o=[].concat(i,[t]),s=o[0],a=o.reduce(function(l,c){var u=y0(e,c,r);return l.top=ln(u.top,l.top),l.right=br(u.right,l.right),l.bottom=br(u.bottom,l.bottom),l.left=ln(u.left,l.left),l},y0(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ga(e){var n=e.reference,t=e.element,r=e.placement,i=r?Ge(r):null,o=r?$t(r):null,s=n.x+n.width/2-t.width/2,a=n.y+n.height/2-t.height/2,l;switch(i){case Ae:l={x:s,y:n.y-t.height};break;case Xe:l={x:s,y:n.y+n.height};break;case Be:l={x:n.x+n.width,y:a};break;case Pe:l={x:n.x-t.width,y:a};break;default:l={x:n.x,y:n.y}}var c=i?Dr(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Hn:l[c]=l[c]-(n[u]/2-t[u]/2);break;case Er:l[c]=l[c]+(n[u]/2-t[u]/2);break;default:}}return l}function _i(e,n){n===void 0&&(n={});var t=n,r=t.placement,i=r===void 0?e.placement:r,o=t.strategy,s=o===void 0?e.strategy:o,a=t.boundary,l=a===void 0?c0:a,c=t.rootBoundary,u=c===void 0?qc:c,d=t.elementContext,p=d===void 0?Ao:d,h=t.altBoundary,g=h===void 0?!1:h,y=t.padding,v=y===void 0?0:y,_=ha(typeof v!="number"?v:pa(v,vi)),b=p===Ao?u0:Ao,E=e.rects.popper,C=e.elements[g?b:p],T=sp(Gt(C)?C:C.contextElement||Qe(e.elements.popper),l,u,s),I=Ut(e.elements.reference),S=ga({reference:I,element:E,strategy:"absolute",placement:i}),D=Ro(Object.assign({},E,S)),N=p===Ao?D:I,O={top:T.top-N.top+_.top,bottom:N.bottom-T.bottom+_.bottom,left:T.left-N.left+_.left,right:N.right-T.right+_.right},Y=e.modifiersData.offset;if(p===Ao&&Y){var M=Y[i];Object.keys(O).forEach(function(ne){var _t=[Be,Xe].indexOf(ne)>=0?1:-1,tt=[Ae,Xe].indexOf(ne)>=0?"y":"x";O[ne]+=M[tt]*_t})}return O}function ap(e,n){n===void 0&&(n={});var t=n,r=t.placement,i=t.boundary,o=t.rootBoundary,s=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?Kc:l,u=$t(r),d=u?a?tp:tp.filter(function(g){return $t(g)===u}):vi,p=d.filter(function(g){return c.indexOf(g)>=0});p.length===0&&(p=d);var h=p.reduce(function(g,y){return g[y]=_i(e,{placement:y,boundary:i,rootBoundary:o,padding:s})[Ge(y)],g},{});return Object.keys(h).sort(function(g,y){return h[g]-h[y]})}function QI(e){if(Ge(e)===Yc)return[];var n=No(e);return[Xc(e),n,Xc(n)]}function JI(e){var n=e.state,t=e.options,r=e.name;if(!n.modifiersData[r]._skip){for(var i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,a=s===void 0?!0:s,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,p=t.altBoundary,h=t.flipVariations,g=h===void 0?!0:h,y=t.allowedAutoPlacements,v=n.options.placement,_=Ge(v),b=_===v,E=l||(b||!g?[No(v)]:QI(v)),C=[v].concat(E).reduce(function(fn,Kt){return fn.concat(Ge(Kt)===Yc?ap(n,{placement:Kt,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:y}):Kt)},[]),T=n.rects.reference,I=n.rects.popper,S=new Map,D=!0,N=C[0],O=0;O<C.length;O++){var Y=C[O],M=Ge(Y),ne=$t(Y)===Hn,_t=[Ae,Xe].indexOf(M)>=0,tt=_t?"width":"height",le=_i(n,{placement:Y,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),lt=_t?ne?Be:Pe:ne?Xe:Ae;T[tt]>I[tt]&&(lt=No(lt));var $r=No(lt),Nt=[];if(o&&Nt.push(le[M]<=0),a&&Nt.push(le[lt]<=0,le[$r]<=0),Nt.every(function(fn){return fn})){N=Y,D=!1;break}S.set(Y,Nt)}if(D)for(var Wr=g?3:1,Ni=function(Kt){var Jn=C.find(function(Rt){var Ri=S.get(Rt);if(Ri)return Ri.slice(0,Kt).every(function(Xu){return Xu})});if(Jn)return N=Jn,"break"},Tn=Wr;Tn>0;Tn--){var zr=Ni(Tn);if(zr==="break")break}n.placement!==N&&(n.modifiersData[r]._skip=!0,n.placement=N,n.reset=!0)}}var lp={name:"flip",enabled:!0,phase:"main",fn:JI,requiresIfExists:["offset"],data:{_skip:!1}};function eM(e,n,t){var r=Ge(e),i=[Pe,Ae].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},n,{placement:e})):t,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Pe,Be].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function tM(e){var n=e.state,t=e.options,r=e.name,i=t.offset,o=i===void 0?[0,0]:i,s=Kc.reduce(function(u,d){return u[d]=eM(d,n.rects,o),u},{}),a=s[n.placement],l=a.x,c=a.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=l,n.modifiersData.popperOffsets.y+=c),n.modifiersData[r]=s}var cp={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tM};function nM(e){var n=e.state,t=e.name;n.modifiersData[t]=ga({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var _0={name:"popperOffsets",enabled:!0,phase:"read",fn:nM,data:{}};function up(e){return e==="x"?"y":"x"}function iM(e){var n=e.state,t=e.options,r=e.name,i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,a=s===void 0?!1:s,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,p=t.tether,h=p===void 0?!0:p,g=t.tetherOffset,y=g===void 0?0:g,v=_i(n,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),_=Ge(n.placement),b=$t(n.placement),E=!b,C=Dr(_),T=up(C),I=n.modifiersData.popperOffsets,S=n.rects.reference,D=n.rects.popper,N=typeof y=="function"?y(Object.assign({},n.rects,{placement:n.placement})):y,O=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),Y=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,M={x:0,y:0};if(I){if(o){var ne,_t=C==="y"?Ae:Pe,tt=C==="y"?Xe:Be,le=C==="y"?"height":"width",lt=I[C],$r=lt+v[_t],Nt=lt-v[tt],Wr=h?-D[le]/2:0,Ni=b===Hn?S[le]:D[le],Tn=b===Hn?-D[le]:-S[le],zr=n.elements.arrow,fn=h&&zr?Cr(zr):{width:0,height:0},Kt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:fa(),Jn=Kt[_t],Rt=Kt[tt],Ri=wr(0,S[le],fn[le]),Xu=E?S[le]/2-Wr-Ri-Jn-O.mainAxis:Ni-Ri-Jn-O.mainAxis,Ub=E?-S[le]/2+Wr+Ri+Rt+O.mainAxis:Tn+Ri+Rt+O.mainAxis,Qu=n.elements.arrow&&cn(n.elements.arrow),$b=Qu?C==="y"?Qu.clientTop||0:Qu.clientLeft||0:0,Dg=(ne=Y?.[C])!=null?ne:0,Wb=lt+Xu-Dg-$b,zb=lt+Ub-Dg,wg=wr(h?br($r,Wb):$r,lt,h?ln(Nt,zb):Nt);I[C]=wg,M[C]=wg-lt}if(a){var Tg,Yb=C==="x"?Ae:Pe,qb=C==="x"?Xe:Be,ki=I[T],Ha=T==="y"?"height":"width",Sg=ki+v[Yb],Ig=ki-v[qb],Ju=[Ae,Pe].indexOf(_)!==-1,Mg=(Tg=Y?.[T])!=null?Tg:0,Ag=Ju?Sg:ki-S[Ha]-D[Ha]-Mg+O.altAxis,xg=Ju?ki+S[Ha]+D[Ha]-Mg-O.altAxis:Ig,Og=h&&Ju?p0(Ag,ki,xg):wr(h?Ag:Sg,ki,h?xg:Ig);I[T]=Og,M[T]=Og-ki}n.modifiersData[r]=M}}var dp={name:"preventOverflow",enabled:!0,phase:"main",fn:iM,requiresIfExists:["offset"]};function fp(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function hp(e){return e===ve(e)||!Fe(e)?Tr(e):fp(e)}function rM(e){var n=e.getBoundingClientRect(),t=Gn(n.width)/e.offsetWidth||1,r=Gn(n.height)/e.offsetHeight||1;return t!==1||r!==1}function pp(e,n,t){t===void 0&&(t=!1);var r=Fe(n),i=Fe(n)&&rM(n),o=Qe(n),s=Ut(e,i,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((He(n)!=="body"||Ir(o))&&(a=hp(n)),Fe(n)?(l=Ut(n,!0),l.x+=n.clientLeft,l.y+=n.clientTop):o&&(l.x=Sr(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function oM(e){var n=new Map,t=new Set,r=[];e.forEach(function(o){n.set(o.name,o)});function i(o){t.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!t.has(a)){var l=n.get(a);l&&i(l)}}),r.push(o)}return e.forEach(function(o){t.has(o.name)||i(o)}),r}function gp(e){var n=oM(e);return d0.reduce(function(t,r){return t.concat(n.filter(function(i){return i.phase===r}))},[])}function mp(e){var n;return function(){return n||(n=new Promise(function(t){Promise.resolve().then(function(){n=void 0,t(e())})})),n}}function vp(e){var n=e.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(n).map(function(t){return n[t]})}var E0={placement:"bottom",modifiers:[],strategy:"absolute"};function b0(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return!n.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function C0(e){e===void 0&&(e={});var n=e,t=n.defaultModifiers,r=t===void 0?[]:t,i=n.defaultOptions,o=i===void 0?E0:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},E0,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],p=!1,h={state:u,setOptions:function(_){var b=typeof _=="function"?_(u.options):_;y(),u.options=Object.assign({},o,u.options,b),u.scrollParents={reference:Gt(a)?yi(a):a.contextElement?yi(a.contextElement):[],popper:yi(l)};var E=gp(vp([].concat(r,u.options.modifiers)));return u.orderedModifiers=E.filter(function(C){return C.enabled}),g(),h.update()},forceUpdate:function(){if(!p){var _=u.elements,b=_.reference,E=_.popper;if(b0(b,E)){u.rects={reference:pp(b,cn(E),u.options.strategy==="fixed"),popper:Cr(E)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var C=0;C<u.orderedModifiers.length;C++){if(u.reset===!0){u.reset=!1,C=-1;continue}var T=u.orderedModifiers[C],I=T.fn,S=T.options,D=S===void 0?{}:S,N=T.name;typeof I=="function"&&(u=I({state:u,options:D,name:N,instance:h})||u)}}}},update:mp(function(){return new Promise(function(v){h.forceUpdate(),v(u)})}),destroy:function(){y(),p=!0}};if(!b0(a,l))return h;h.setOptions(c).then(function(v){!p&&c.onFirstUpdate&&c.onFirstUpdate(v)});function g(){u.orderedModifiers.forEach(function(v){var _=v.name,b=v.options,E=b===void 0?{}:b,C=v.effect;if(typeof C=="function"){var T=C({state:u,name:_,instance:h,options:E}),I=function(){};d.push(T||I)}})}function y(){d.forEach(function(v){return v()}),d=[]}return h}}var sM=[v0,_0,m0,f0],yp=C0({defaultModifiers:sM});var aM=["*"];var lM=["dialog"];var S0={animation:!0,transitionTimerDelayMs:5},cM=(()=>{let n=class n{constructor(){this.animation=S0.animation}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function uM(e){let{transitionDelay:n,transitionDuration:t}=window.getComputedStyle(e),r=parseFloat(n),i=parseFloat(t);return(r+i)*1e3}function I0(e){return typeof e=="string"}function Cp(e){return e!=null}function dM(e){return e&&e.then}function fM(e,n){return!n||typeof e.closest>"u"?null:e.closest(n)}function M0(e){return(e||document.body).getBoundingClientRect()}function hM(e){return n=>new ie(t=>{let r=s=>e.run(()=>t.next(s)),i=s=>e.run(()=>t.error(s)),o=()=>e.run(()=>t.complete());return n.subscribe({next:r,error:i,complete:o})})}function A0(e=document){let n=e?.activeElement;return n?n.shadowRoot?A0(n.shadowRoot):n:null}var pM=()=>{},{transitionTimerDelayMs:gM}=S0,Jc=new Map,Mr=(e,n,t,r)=>{let i=r.context||{},o=Jc.get(n);if(o)switch(r.runningTransition){case"continue":return Bi;case"stop":e.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Jc.delete(n)}let s=t(n,r.animation,i)||pM;if(!r.animation||window.getComputedStyle(n).transitionProperty==="none")return e.run(()=>s()),Mn(void 0).pipe(hM(e));let a=new Oe,l=new Oe,c=a.pipe(wd(!0));Jc.set(n,{transition$:a,complete:()=>{l.next(),l.complete()},context:i});let u=uM(n);return e.runOutsideAngular(()=>{let d=ze(n,"transitionend").pipe(Ye(c),hn(({target:h})=>h===n)),p=hs(u+gM).pipe(Ye(c));bl(p,d,l).pipe(Ye(c)).subscribe(()=>{Jc.delete(n),e.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var eu=(e,n)=>n?n.some(t=>t.contains(e)):!1,D0=(e,n)=>!n||fM(e,n)!=null,mM=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,n=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||n()):!1})(),vM=e=>mM?()=>setTimeout(()=>e(),100):e;function yM(e,n,t,r,i,o,s,a){t&&e.runOutsideAngular(vM(()=>{let l=p=>{let h=p.target;return p.button===2||eu(h,s)?!1:t==="inside"?eu(h,o)&&D0(h,a):t==="outside"?!eu(h,o):D0(h,a)||!eu(h,o)},c=ze(n,"keydown").pipe(Ye(i),hn(p=>p.key==="Escape"),Dl(p=>p.preventDefault())),u=ze(n,"mousedown").pipe(Se(l),Ye(i)),d=ze(n,"mouseup").pipe(ms(u),hn(([p,h])=>h),Dd(0),Ye(i));bl([c.pipe(Se(p=>0)),d.pipe(Se(p=>1))]).subscribe(p=>e.run(()=>r(p)))}))}var x0=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function O0(e){let n=Array.from(e.querySelectorAll(x0)).filter(t=>t.tabIndex!==-1);return[n[0],n[n.length-1]]}var _M=(e,n,t,r=!1)=>{e.runOutsideAngular(()=>{let i=ze(n,"focusin").pipe(Ye(t),Se(o=>o.target));ze(n,"keydown").pipe(Ye(t),hn(o=>o.key==="Tab"),ms(i)).subscribe(([o,s])=>{let[a,l]=O0(n);(s===a||s===n)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),r&&ze(n,"click").pipe(Ye(t),ms(i),Se(o=>o[1])).subscribe(o=>o.focus())})},EM=(()=>{let n=class n{constructor(){this._element=w(Me).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),bM=/\s+/,CM=/  +/gi,DM={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function wM(e,n){let[t,r]=DM[e];return n&&r||t}var TM=/^left/,SM=/^right/,IM=/^start/,MM=/^end/;function AM(e,n){let[t,r]=n.split("-"),i=t.replace(TM,"start").replace(SM,"end"),o=[i];if(r){let s=r;(t==="left"||t==="right")&&(s=s.replace(IM,"top").replace(MM,"bottom")),o.push(`${i}-${s}`)}return e&&(o=o.map(s=>`${e}-${s}`)),o.join(" ")}function w0({placement:e,baseClass:n},t){let r=Array.isArray(e)?e:e.split(bM),i=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],o=r.findIndex(c=>c==="auto");o>=0&&i.forEach(function(c){r.find(u=>u.search("^"+c)!==-1)==null&&r.splice(o++,1,c)});let s=r.map(c=>wM(c,t.isRTL()));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:c}){let u=new RegExp(n+"(-[a-z]+)*","gi"),d=c.elements.popper,p=c.placement,h=d.className;h=h.replace(u,""),h+=` ${AM(n,p)}`,h=h.trim().replace(CM," "),d.className=h}},lp,dp,ip,{enabled:!0,name:"flip",options:{fallbackPlacements:s}}]}}function T0(e){return e}function xM(){let e=w(EM),n=null;return{createPopper(t){if(!n){let i=(t.updatePopperOptions||T0)(w0(t,e));n=yp(t.hostElement,t.targetElement,i)}},update(){n&&n.update()},setOptions(t){if(n){let i=(t.updatePopperOptions||T0)(w0(t,e));n.setOptions(i)}},destroy(){n&&(n.destroy(),n=null)}}}function OM(e){return n=>(n.modifiers.push(cp,{name:"offset",options:{offset:()=>e}}),n)}var nq=new Date(1882,10,12),iq=new Date(2174,10,25);var rq=1e3*60*60*24;var Dp=1080,NM=24*Dp,RM=12*Dp+793,oq=29*NM+RM,sq=11*Dp+204;var kM=(()=>{let n=class n{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=r=>r,this.container=null}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),PM=(()=>{let n=class n{constructor(){this._disabled=!1,this.nativeElement=w(rt).nativeElement,this.tabindex=0}set disabled(r){this._disabled=r===""||r===!0}get disabled(){return this._disabled}};n.\u0275fac=function(i){return new(i||n)},n.\u0275dir=an({type:n,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(i,o){i&2&&(Ac("tabIndex",o.disabled?-1:o.tabindex),pt("disabled",o.disabled))},inputs:{tabindex:"tabindex",disabled:"disabled"}});let e=n;return e})();var ma=(()=>{let n=class n{constructor(){this.dropdown=w(Ei),this.nativeElement=w(rt).nativeElement}};n.\u0275fac=function(i){return new(i||n)},n.\u0275dir=an({type:n,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(i,o,s){if(i&1&&Xs(s,PM,4),i&2){let a;jt(a=Bt())&&(o.menuItems=a)}},hostAttrs:[1,"dropdown-menu"],hostVars:2,hostBindings:function(i,o){i&1&&J("keydown.ArrowUp",function(a){return o.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return o.dropdown.onKeyDown(a)})("keydown.Home",function(a){return o.dropdown.onKeyDown(a)})("keydown.End",function(a){return o.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return o.dropdown.onKeyDown(a)})("keydown.Space",function(a){return o.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return o.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return o.dropdown.onKeyDown(a)}),i&2&&pt("show",o.dropdown.isOpen())}});let e=n;return e})(),_p=(()=>{let n=class n{constructor(){this.dropdown=w(Ei),this.nativeElement=w(rt).nativeElement}};n.\u0275fac=function(i){return new(i||n)},n.\u0275dir=an({type:n,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:3,hostBindings:function(i,o){i&2&&(Ln("aria-expanded",o.dropdown.isOpen()),pt("show",o.dropdown.isOpen()))}});let e=n;return e})(),N0=(()=>{let n=class n extends _p{};n.\u0275fac=(()=>{let r;return function(o){return(r||(r=gc(n)))(o||n)}})(),n.\u0275dir=an({type:n,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:3,hostBindings:function(i,o){i&1&&J("click",function(){return o.dropdown.toggle()})("keydown.ArrowUp",function(a){return o.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return o.dropdown.onKeyDown(a)})("keydown.Home",function(a){return o.dropdown.onKeyDown(a)})("keydown.End",function(a){return o.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return o.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return o.dropdown.onKeyDown(a)}),i&2&&(Ln("aria-expanded",o.dropdown.isOpen()),pt("show",o.dropdown.isOpen()))},features:[xc([{provide:_p,useExisting:qi(()=>n)}]),qs]});let e=n;return e})(),Ei=(()=>{let n=class n{constructor(){this._changeDetector=w(vr),this._config=w(kM),this._document=w(Me),this._injector=w(Re),this._ngZone=w(fe),this._nativeElement=w(rt).nativeElement,this._destroyCloseHandlers$=new Oe,this._bodyContainer=null,this._positioning=xM(),this.autoClose=this._config.autoClose,this._open=!1,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.container=this._config.container,this.openChange=new it}ngOnInit(){this.display||(this.display=this._nativeElement.closest(".navbar")?"static":"dynamic")}ngAfterContentInit(){Co({write:()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()}},{injector:this._injector})}ngOnChanges(r){if(r.container&&this._open&&this._applyContainer(this.container),r.placement&&!r.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement}),this._applyPlacementClasses()),r.dropdownClass){let{currentValue:i,previousValue:o}=r.dropdownClass;this._applyCustomDropdownClass(i,o)}r.autoClose&&this._open&&(this.autoClose=r.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),this.display==="dynamic"&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,updatePopperOptions:r=>this.popperOptions(OM([0,2])(r))}),this._applyPlacementClasses(),this._afterRenderRef=Nh({write:()=>{this._positionMenu()}},{injector:this._injector})})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),yM(this._ngZone,this._document,this.autoClose,r=>{this.close(),r===0&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._afterRenderRef?.destroy(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(r){let{key:i}=r,o=this._getMenuElements(),s=-1,a=null,l=this._isEventFromToggle(r);if(!l&&o.length&&o.forEach((c,u)=>{c.contains(r.target)&&(a=c),c===A0(this._document)&&(s=u)}),i===" "||i==="Enter"){a&&(this.autoClose===!0||this.autoClose==="inside")&&ze(a,"click").pipe(An(1)).subscribe(()=>this.close());return}if(i==="Tab"){if(r.target&&this.isOpen()&&this.autoClose)if(this._anchor.nativeElement===r.target){this.container==="body"&&!r.shiftKey?(this._menu.nativeElement.setAttribute("tabindex","0"),this._menu.nativeElement.focus(),this._menu.nativeElement.removeAttribute("tabindex")):r.shiftKey&&this.close();return}else if(this.container==="body"){let c=this._menu.nativeElement.querySelectorAll(x0);r.shiftKey&&r.target===c[0]?(this._anchor.nativeElement.focus(),r.preventDefault()):!r.shiftKey&&r.target===c[c.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else ze(r.target,"focusout").pipe(An(1)).subscribe(({relatedTarget:c})=>{this._nativeElement.contains(c)||this.close()});return}if(l||a){if(this.open(),o.length){switch(i){case"ArrowDown":s=Math.min(s+1,o.length-1);break;case"ArrowUp":if(this._isDropup()&&s===-1){s=o.length-1;break}s=Math.max(s-1,0);break;case"Home":s=0;break;case"End":s=o.length-1;break}o[s].focus()}r.preventDefault()}}_isDropup(){return this._nativeElement.classList.contains("dropup")}_isEventFromToggle(r){return this._anchor.nativeElement.contains(r.target)}_getMenuElements(){return this._menu?this._menu.menuItems.filter(({disabled:r})=>!r).map(({nativeElement:r})=>r):[]}_positionMenu(){let r=this._menu;this.isOpen()&&r&&(this.display==="dynamic"?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(r){return Array.isArray(r)?r[0]:r.split(" ")[0]}_resetContainer(){this._menu&&this._nativeElement.appendChild(this._menu.nativeElement),this._bodyContainer&&(this._document.body.removeChild(this._bodyContainer),this._bodyContainer=null)}_applyContainer(r=null){if(this._resetContainer(),r==="body"){let i=this._menu.nativeElement,o=this._bodyContainer=this._bodyContainer||this._document.createElement("div");o.style.position="absolute",i.style.position="static",o.style.zIndex="1055",o.appendChild(i),this._document.body.appendChild(o)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(r,i){let o=this.container==="body"?this._bodyContainer:this._nativeElement;o&&(i&&o.classList.remove(i),r&&o.classList.add(r))}_applyPlacementClasses(r){if(this._menu){r||(r=this._getFirstPlacement(this.placement)),this._nativeElement.classList.remove("dropup","dropdown"),this.display==="static"?this._menu.nativeElement.setAttribute("data-bs-popper","static"):this._menu.nativeElement.removeAttribute("data-bs-popper");let i=r.search("^top")!==-1?"dropup":"dropdown";this._nativeElement.classList.add(i),this._bodyContainer&&(this._bodyContainer.classList.remove("dropup","dropdown"),this._bodyContainer.classList.add(i))}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275dir=an({type:n,selectors:[["","ngbDropdown",""]],contentQueries:function(i,o,s){if(i&1&&(Xs(s,ma,5),Xs(s,_p,5)),i&2){let a;jt(a=Bt())&&(o._menu=a.first),jt(a=Bt())&&(o._anchor=a.first)}},hostVars:2,hostBindings:function(i,o){i&2&&pt("show",o.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:[0,"open","_open"],placement:"placement",popperOptions:"popperOptions",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[$s]});let e=n;return e})();var tu=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=_n({type:n}),n.\u0275inj=Qt({});let e=n;return e})(),FM=(()=>{let n=class n{constructor(){this._ngbConfig=w(cM),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(r){this._animation=r}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),ko=class{constructor(n,t,r){this.nodes=n,this.viewRef=t,this.componentRef=r}};var LM=(()=>{let n=class n{constructor(){this._document=w(Me)}hide(){let r=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,o=i.style,{overflow:s,paddingRight:a}=o;if(r>0){let l=parseFloat(window.getComputedStyle(i).paddingRight);o.paddingRight=`${l+r}px`}return o.overflow="hidden",()=>{r>0&&(o.paddingRight=a),o.overflow=s}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),VM=["animation","backdropClass"],jM=(()=>{let n=class n{constructor(){this._nativeElement=w(rt).nativeElement,this._zone=w(fe),this._injector=w(Re),this._cdRef=w(vr)}ngOnInit(){Co({mixedReadWrite:()=>Mr(this._zone,this._nativeElement,(r,i)=>{i&&M0(r),r.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return Mr(this._zone,this._nativeElement,({classList:r})=>r.remove("show"),{animation:this.animation,runningTransition:"stop"})}updateOptions(r){VM.forEach(i=>{Cp(r[i])&&(this[i]=r[i])}),this._cdRef.markForCheck()}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=ot({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,o){i&2&&(gr("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),pt("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(i,o){},encapsulation:2});let e=n;return e})(),Po=class{update(n){}close(n){}dismiss(n){}},Ep=class{update(n){this._windowCmptRef.instance.updateOptions(n),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._backdropCmptRef.instance.updateOptions(n)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ye(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ye(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(n,t,r,i){this._windowCmptRef=n,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Oe,this._dismissed=new Oe,this._hidden=new Oe,n.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(n);else{let t=this._beforeDismiss();dM(t)?t.then(r=>{r!==!1&&this._dismiss(n)},()=>{}):t!==!1&&this._dismiss(n)}}_removeModalElements(){let n=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Mn(void 0);n.subscribe(()=>{let{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),ps(n,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},bp=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}(bp||{}),BM=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],HM=(()=>{let n=class n{constructor(){this._document=w(Me),this._elRef=w(rt),this._zone=w(fe),this._injector=w(Re),this._cdRef=w(vr),this._closed$=new Oe,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new it,this.shown=new Oe,this.hidden=new Oe}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":I0(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(r){this.dismissEvent.emit(r)}ngOnInit(){this._elWithFocus=this._document.activeElement,Co({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:r}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=Mr(this._zone,r,()=>r.classList.remove("show"),i),s=Mr(this._zone,this._dialogEl.nativeElement,()=>{},i),a=ps(o,s);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}updateOptions(r){BM.forEach(i=>{Cp(r[i])&&(this[i]=r[i])}),this._cdRef.markForCheck()}_show(){let r={animation:this.animation,runningTransition:"continue"},i=Mr(this._zone,this._elRef.nativeElement,(s,a)=>{a&&M0(s),s.classList.add("show")},r),o=Mr(this._zone,this._dialogEl.nativeElement,()=>{},r);ps(i,o).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:r}=this._elRef;this._zone.runOutsideAngular(()=>{ze(r,"keydown").pipe(Ye(this._closed$),hn(o=>o.key==="Escape")).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(bp.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;ze(this._dialogEl.nativeElement,"mousedown").pipe(Ye(this._closed$),Dl(()=>i=!1),gs(()=>ze(r,"mouseup").pipe(Ye(this._closed$),An(1))),hn(({target:o})=>r===o)).subscribe(()=>{i=!0}),ze(r,"click").pipe(Ye(this._closed$)).subscribe(({target:o})=>{r===o&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(bp.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:r}=this._elRef;if(!r.contains(document.activeElement)){let i=r.querySelector("[ngbAutofocus]"),o=O0(r)[0];(i||o||r).focus()}}_restoreFocus(){let r=this._document.body,i=this._elWithFocus,o;i&&i.focus&&r.contains(i)?o=i:o=r,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Mr(this._zone,this._elRef.nativeElement,({classList:r})=>(r.add("modal-static"),()=>r.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=ot({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,o){if(i&1&&Vn(lM,7),i&2){let s;jt(s=Bt())&&(o._dialogEl=s.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(i,o){i&2&&(Ln("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy)("role",o.role),gr("modal d-block"+(o.windowClass?" "+o.windowClass:"")),pt("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:aM,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,o){i&1&&(Fh(),A(0,"div",1,0)(2,"div",2),Lh(3),x()()),i&2&&gr("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let e=n;return e})(),GM=(()=>{let n=class n{constructor(){this._applicationRef=w(pr),this._injector=w(Re),this._environmentInjector=w(Ke),this._document=w(Me),this._scrollBar=w(LM),this._activeWindowCmptHasChanged=new Oe,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new it;let r=w(fe);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];_M(r,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let r=this._scrollBarRestoreFn;r&&(this._scrollBarRestoreFn=null,r())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(r,i,o){let s=o.container instanceof HTMLElement?o.container:Cp(o.container)?this._document.querySelector(o.container):this._document.body;if(!s)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new Po;r=o.injector||r;let l=r.get(Ke,null)||this._environmentInjector,c=this._getContentRef(r,l,i,a,o),u=o.backdrop!==!1?this._attachBackdrop(s):void 0,d=this._attachWindowComponent(s,c.nodes),p=new Ep(d,c,u,o.beforeDismiss);return this._registerModalRef(p),this._registerWindowCmpt(d),p.hidden.pipe(An(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=h=>{p.close(h)},a.dismiss=h=>{p.dismiss(h)},a.update=h=>{p.update(h)},p.update(o),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),d.changeDetectorRef.detectChanges(),p}get activeInstances(){return this._activeInstances}dismissAll(r){this._modalRefs.forEach(i=>i.dismiss(r))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(r){let i=Pc(jM,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),r.appendChild(i.location.nativeElement),i}_attachWindowComponent(r,i){let o=Pc(HM,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(o.hostView),r.appendChild(o.location.nativeElement),o}_getContentRef(r,i,o,s,a){return o?o instanceof fi?this._createFromTemplateRef(o,s):I0(o)?this._createFromString(o):this._createFromComponent(r,i,o,s,a):new ko([])}_createFromTemplateRef(r,i){let o={$implicit:i,close(a){i.close(a)},dismiss(a){i.dismiss(a)}},s=r.createEmbeddedView(o);return this._applicationRef.attachView(s),new ko([s.rootNodes],s)}_createFromString(r){let i=this._document.createTextNode(`${r}`);return new ko([[i]])}_createFromComponent(r,i,o,s,a){let l=Re.create({providers:[{provide:Po,useValue:s}],parent:r}),c=Pc(o,{environmentInjector:i,elementInjector:l}),u=c.location.nativeElement;return a.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new ko([[u]],c.hostView,c)}_setAriaHidden(r){let i=r.parentElement;i&&r!==this._document.body&&(Array.from(i.children).forEach(o=>{o!==r&&o.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((r,i)=>{r?i.setAttribute("aria-hidden",r):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(r){let i=()=>{let o=this._modalRefs.indexOf(r);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(r),this._activeInstances.emit(this._modalRefs),r.result.then(i,i)}_registerWindowCmpt(r){this._windowCmpts.push(r),this._activeWindowCmptHasChanged.next(),r.onDestroy(()=>{let i=this._windowCmpts.indexOf(r);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})(),R0=(()=>{let n=class n{constructor(){this._injector=w(Re),this._modalStack=w(GM),this._config=w(FM)}open(r,i={}){let o=F($(F({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,r,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(r){this._modalStack.dismissAll(r)}hasOpenModals(){return this._modalStack.hasOpenModals()}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var aq=new W("live announcer delay",{providedIn:"root",factory:()=>100});var Dt=class{className;displayName;description;constructor(n,t,r){this.className=n,this.displayName=t,this.description=r}getSmallIconUrl(){return`https://www.satisfactorytools.com/assets/images/items/${this.className}_64.png`}getLargeIconUrl(){return`https://www.satisfactorytools.com/assets/images/items/${this.className}_256.png`}};var UM=new Dt("desc-rawquartz-c","Raw Quartz","Can be processed into Quartz Crystals and Silica, which both offer a variety of applications."),$M=new Dt("desc-stone-c","Limestone","Used for crafting. A basic resource primarily used for stable Foundations."),P0=new Dt("desc-silica-c","Silica","Derived from Raw Quartz, Silica is a key component in electronics and construction materials."),WM=new Dt("desc-liquidoil-c","Crude Oil","Refined into all kinds of Oil-based resources, like Fuel and Plastic."),F0=new Dt("desc-plastic-c","Plastic","Versatile and easy to manufacture, Plastic is used in a wide range of products from packaging to electronics."),zM=new Dt("desc-circuitboard-c","Circuit Board","Advanced electronics component used in various devices, essential for modern technology."),va=[{id:"silica-plant-1",name:"Silica Plant",cardPositionX:15,cardPositionY:15,resourceSources:[],consumption:[{resource:UM,amount:300},{resource:$M,amount:100}],production:[{resource:P0,amount:200,consumption:0}]},{id:"plastic-plant-1",name:"Plastic Plant",cardPositionX:15,cardPositionY:415,resourceSources:[],consumption:[{resource:WM,amount:500}],production:[{resource:F0,amount:300,consumption:0}]},{id:"circuit-board-plant1",name:"Circuit Board Plant",cardPositionX:740,cardPositionY:160,resourceSources:["silica-plant-1","plastic-plant-1"],consumption:[{resource:P0,amount:240},{resource:F0,amount:140}],production:[{resource:zM,amount:150,consumption:0}]}];function bi(e){YM(e);for(let n of e)if(!(n.consumption===void 0||n.resourceSources.length===0)&&!(n.resourceSources===void 0||n.resourceSources.length===0))for(let t of n.resourceSources){let r=e.find(o=>o.id===t&&o.production&&o.production.length>0);if(!r)continue;let i=new Map(n.consumption?.map(o=>[o.resource.className,o])||[]);for(let o of r.production??[]){let s=i.get(o.resource.className)?.amount||0;o.consumption+=s}}}function YM(e){for(let n of e)if(n.production&&n.production.length>0)for(let t of n.production)t.consumption=0}var Fo=class e{constructor(n){this.http=n;this.loadResources()}resourcesDataSource="/data/en-US_resources.json";resourcesSignal=ke([]);isLoading=ke(!1);error=ke(null);resources=this.resourcesSignal.asReadonly();loading=this.isLoading.asReadonly();loadError=this.error.asReadonly();reloadResources(){this.loadResources()}getResourceByClassName(n){return this.resourcesSignal().find(t=>t.className===n)}findResourcesByName(n){if(!n||n.trim()==="")return[];let t=n.toLowerCase().trim();return this.resourcesSignal().filter(r=>r.displayName?.toLowerCase().includes(t))}loadResources(){this.isLoading()||(this.isLoading.set(!0),this.error.set(null),this.http.get(this.resourcesDataSource).subscribe({next:n=>{let t=n.map(r=>new Dt(r.className,r.displayName,r.description));this.resourcesSignal.set(t),this.isLoading.set(!1)},error:n=>{console.error("Failed to load resources:",n),this.error.set(n),this.isLoading.set(!1)}}))}static \u0275fac=function(t){return new(t||e)(q(Wc))};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})};function nu(e,n){let t;return function(...r){let i=this;t!==void 0&&window.clearTimeout(t),t=window.setTimeout(()=>{t=void 0,e.apply(i,r)},n)}}var qM=["dropdownMenu"],KM=["searchInput"],ZM=(e,n)=>n.className;function XM(e,n){if(e&1&&(A(0,"div",5)(1,"span",11),Q(2,"img",12),x()()),e&2){let t=re();L(2),me("src",t.selectedResource().getSmallIconUrl(),hi)("alt",t.selectedResource().displayName)}}function QM(e,n){if(e&1){let t=Ct();A(0,"button",13),J("click",function(){pe(t);let i=re();return ge(i.clearSearchText())}),Q(1,"i",14),x()}}function JM(e,n){if(e&1){let t=Ct();A(0,"button",15),J("click",function(){pe(t);let i=re();return ge(i.toggleDropdown())}),Q(1,"i",16),x()}}function eA(e,n){if(e&1){let t=Ct();A(0,"button",18),J("click",function(){let i=pe(t).$implicit,o=re(2);return ge(o.selectResource(i))}),Q(1,"img",19),A(2,"span"),X(3),x()()}if(e&2){let t,r=n.$implicit,i=n.$index,o=re(2);pt("active",((t=o.selectedResource())==null?null:t.className)===r.className||o.activeIndex()===i),Ln("data-resource-id",r.className),L(),me("src",r.getSmallIconUrl(),hi)("alt",r.displayName),L(2),gt(r.displayName)}}function tA(e,n){if(e&1&&Mt(0,eA,4,6,"button",17,ZM),e&2){let t=re();At(t.filteredResources())}}function nA(e,n){e&1&&(A(0,"div",10),X(1,"No resources found"),x())}function iA(e,n){e&1&&(A(0,"div",10),X(1,"Start typing to search resources"),x())}var iu=class e{placeholder=jn("Search resources...");selectedResourceInput=jn(null);resourceSelected=kc();dropdown;dropdownMenu;searchInput;searchTerm=ke("");selectedResource=ke(null);filteredResources=ke([]);activeIndex=ke(-1);isSearching=st(()=>{let n=this.selectedResource(),t=this.searchTerm();return n?t!==n.displayName&&t.length>0:t.length>0});showDropdown=st(()=>this.dropdown?.isOpen()||this.filteredResources().length>0);resourcesService=w(Fo);debouncedUpdateFilteredResources;constructor(){mr(()=>{let n=this.selectedResourceInput();this.selectedResource.set(n),n?this.searchTerm.set(n.displayName):this.searchTerm.set("")}),this.debouncedUpdateFilteredResources=nu(this.updateFilteredResources.bind(this),300),this.updateFilteredResources()}clearSelection(){this.selectedResource.set(null),this.searchTerm.set(""),this.resourceSelected.emit(null)}selectResource(n){this.selectedResource.set(n),this.resourceSelected.emit(n),this.searchTerm.set(n.displayName)}onSearchChange(n){let r=n.target.value;this.searchTerm.set(r),this.debouncedUpdateFilteredResources()}clearSearchText(){this.selectedResource()?this.searchTerm.set(this.selectedResource().displayName):(this.searchTerm.set(""),this.updateFilteredResources())}updateFilteredResources(){let n=this.searchTerm();n.trim()===""?this.filteredResources.set(this.resourcesService.resources()):this.filteredResources.set(this.resourcesService.findResourcesByName(n)),this.activeIndex.set(-1)}toggleDropdown(){this.dropdown.isOpen()?this.dropdown.close():this.openDropdown()}openDropdown(){this.searchTerm.set(""),this.updateFilteredResources();let n=this.selectedResource();if(n){let r=this.filteredResources().findIndex(i=>i.className===n.className);this.activeIndex.set(r>=0?r:-1)}else this.activeIndex.set(-1);this.dropdown.open(),setTimeout(()=>{this.searchInput&&this.searchInput.nativeElement.focus(),this.scrollToSelectedItem()},0)}onDropdownClose(){this.selectedResource()?this.searchTerm.set(this.selectedResource().displayName):this.searchTerm.set("")}onDropdownOpenChange(n){n||(this.onDropdownClose(),this.activeIndex.set(-1))}onKeyDown(n){let t=this.filteredResources();if(t.length!==0)switch(n.key){case"ArrowDown":n.preventDefault(),this.activeIndex.update(r=>Math.min(r+1,t.length-1));break;case"ArrowUp":n.preventDefault(),this.activeIndex.update(r=>Math.max(r-1,0));break;case"Enter":n.preventDefault(),this.activeIndex()>=0&&this.activeIndex()<t.length&&(this.selectResource(t[this.activeIndex()]),this.dropdown.close(),n.target&&n.target.blur());break;case"Escape":n.preventDefault(),this.dropdown.close(),n.target&&n.target.blur();break}}scrollToSelectedItem(){let n=this.selectedResource();if(!n||!this.dropdownMenu)return;let t=this.dropdownMenu.nativeElement,r=t.querySelector(`[data-resource-id="${n.className}"]`);if(r){let i=t.clientHeight,o=r.offsetHeight,a=r.offsetTop-i/2+o/2;t.scrollTop=Math.max(0,a)}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=ot({type:e,selectors:[["scs-resource-selector"]],viewQuery:function(t,r){if(t&1&&(Vn(Ei,5),Vn(qM,5),Vn(KM,5)),t&2){let i;jt(i=Bt())&&(r.dropdown=i.first),jt(i=Bt())&&(r.dropdownMenu=i.first),jt(i=Bt())&&(r.searchInput=i.first)}},inputs:{placeholder:[1,"placeholder"],selectedResourceInput:[1,"selectedResourceInput"]},outputs:{resourceSelected:"resourceSelected"},decls:13,vars:5,consts:[["dropdown","ngbDropdown"],["searchInput",""],["dropdownMenu",""],["ngbDropdown","",1,"dropdown",3,"openChange"],[1,"input-group"],[1,"input-group-prepend"],["type","text","aria-label","Search resources","aria-autocomplete","list","role","combobox",1,"form-control",3,"input","focus","keydown","placeholder","value"],["type","button","title","Clear search text",1,"btn","btn-outline-secondary"],["type","button","title","Toggle dropdown",1,"btn","btn-outline-secondary"],["ngbDropdownMenu","",1,"dropdown-menu","w-100","resource-list"],[1,"dropdown-item-text","text-muted"],[1,"input-group-text","p-1"],["width","32","height","32",3,"src","alt"],["type","button","title","Clear search text",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-x"],["type","button","title","Toggle dropdown",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-chevron-down"],["type","button",1,"dropdown-item","d-flex","align-items-center","resource-item",3,"active"],["type","button",1,"dropdown-item","d-flex","align-items-center","resource-item",3,"click"],["width","32","height","32","loading","lazy",1,"me-2",3,"src","alt"]],template:function(t,r){if(t&1){let i=Ct();A(0,"div",3,0),J("openChange",function(s){return pe(i),ge(r.onDropdownOpenChange(s))}),A(2,"div",4),ft(3,XM,3,2,"div",5),A(4,"input",6,1),J("input",function(s){return pe(i),ge(r.onSearchChange(s))})("focus",function(){return pe(i),ge(r.openDropdown())})("keydown",function(s){return pe(i),ge(r.onKeyDown(s))}),x(),ft(6,QM,2,0,"button",7)(7,JM,2,0,"button",8),x(),A(8,"div",9,2),ft(10,tA,2,0)(11,nA,2,0,"div",10)(12,iA,2,0,"div",10),x()()}t&2&&(L(3),ht(r.selectedResource()?3:-1),L(),me("placeholder",r.placeholder())("value",r.searchTerm()),L(2),ht(r.isSearching()?6:7),L(4),ht(r.filteredResources().length>0?10:r.searchTerm().length>0?11:12))},dependencies:[Ht,zc,tu,Ei,ma],styles:[".resource-item[_ngcontent-%COMP%]{cursor:pointer}.resource-item[_ngcontent-%COMP%]:hover{background-color:#0000000d}.resource-list[_ngcontent-%COMP%]{max-height:170px;overflow-y:auto}.input-group-text[_ngcontent-%COMP%]{background-color:#fff;border-right:none}.input-group-text[_ngcontent-%COMP%] + .form-control[_ngcontent-%COMP%]{border-left:none}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none!important}"],changeDetection:0})};var ru=()=>[],rA=(e,n)=>n.id;function oA(e,n){e&1&&(A(0,"div",10),X(1," Location name is required and cannot be empty. "),x())}function sA(e,n){if(e&1){let t=Ct();A(0,"li",20)(1,"input",21),J("change",function(i){let o=pe(t).$implicit,s=re(3);return ge(s.toggleResourceSource(o.id,i.target.checked))}),x(),A(2,"label",22),X(3),x()()}if(e&2){let t=n.$implicit,r=re(3);L(),me("id","source-"+t.id)("checked",r.isResourceSourceSelected(t.id)),L(),me("for","source-"+t.id),L(),Do(" ",t.name," ")}}function aA(e,n){if(e&1&&(A(0,"ul",12),Mt(1,sA,4,4,"li",20,rA),x()),e&2){let t=re(2);L(),At(t.availableLocations())}}function lA(e,n){e&1&&(A(0,"p",13),X(1,"No other locations available as sources"),x())}function cA(e,n){if(e&1){let t=Ct();A(0,"div",18)(1,"div",23)(2,"scs-resource-selector",24),J("resourceSelected",function(i){let o=pe(t).$index,s=re(2);return ge(s.updateInboundResource(o,i))}),x()(),A(3,"div",25)(4,"input",26),J("input",function(i){let o=pe(t).$index,s=re(2);return ge(s.updateInboundAmount(o,+i.target.value))}),x()(),A(5,"div",27)(6,"button",28),J("click",function(){let i=pe(t).$index,o=re(2);return ge(o.removeInboundResource(i))}),Q(7,"i",29),x()()()}if(e&2){let t=n.$implicit;L(2),me("selectedResourceInput",t.resource),L(2),me("value",t.amount)}}function uA(e,n){e&1&&(A(0,"p",13),X(1,"No inbound resources"),x())}function dA(e,n){if(e&1){let t=Ct();A(0,"div",18)(1,"div",23)(2,"scs-resource-selector",24),J("resourceSelected",function(i){let o=pe(t).$index,s=re(2);return ge(s.updateOutboundResource(o,i))}),x()(),A(3,"div",25)(4,"input",26),J("input",function(i){let o=pe(t).$index,s=re(2);return ge(s.updateOutboundAmount(o,+i.target.value))}),x()(),A(5,"div",27)(6,"button",28),J("click",function(){let i=pe(t).$index,o=re(2);return ge(o.removeOutboundResource(i))}),Q(7,"i",29),x()()()}if(e&2){let t=n.$implicit;L(2),me("selectedResourceInput",t.resource),L(2),me("value",t.amount)}}function fA(e,n){e&1&&(A(0,"p",13),X(1,"No outbound resources"),x())}function hA(e,n){if(e&1){let t=Ct();A(0,"div",7)(1,"label",8),X(2,"Location name"),x(),A(3,"input",9),J("input",function(i){pe(t);let o=re();return ge(o.updateLocationName(i.target.value))}),x(),ft(4,oA,2,0,"div",10),x(),A(5,"div",7)(6,"h6",11),X(7,"Inbound sources"),x(),ft(8,aA,3,0,"ul",12)(9,lA,2,0,"p",13),x(),A(10,"div",7)(11,"div",14)(12,"h6",15),X(13,"Inbound"),x(),A(14,"button",16),J("click",function(){pe(t);let i=re();return ge(i.addInboundResource())}),Q(15,"i",17),x()(),Mt(16,cA,8,2,"div",18,Ks),ft(18,uA,2,0,"p",13),x(),A(19,"div",7)(20,"div",14)(21,"h6",15),X(22,"Outbound"),x(),A(23,"button",19),J("click",function(){pe(t);let i=re();return ge(i.addOutboundResource())}),Q(24,"i",17),x()(),Mt(25,dA,8,2,"div",18,Ks),ft(27,fA,2,0,"p",13),x()}if(e&2){let t=n,r=re();L(3),pt("is-invalid",!r.isFormValid()&&t.name!==null),me("value",t.name),L(),ht(!r.isFormValid()&&t.name!==null?4:-1),L(4),ht(r.availableLocations().length>0?8:9),L(8),At(t.consumption||wo(7,ru)),L(2),ht((t.consumption||wo(8,ru)).length===0?18:-1),L(7),At(t.production||wo(9,ru)),L(2),ht((t.production||wo(10,ru)).length===0?27:-1)}}var ou=class e{location=jn();locationSaved=kc();editableLocation=ke(null);isFormValid=st(()=>{let n=this.editableLocation();if(!n)return!1;let t=n.name?.trim();return!!(t&&t.length>0)});availableLocations=st(()=>{let n=this.editableLocation()?.id;return this.locationsService.locations().filter(t=>t.id!==n)});activeModal=w(Po);locationsService=w(En);constructor(){mr(()=>{let n=this.location();n&&this.editableLocation.set($(F({},n),{consumption:[...n.consumption||[]],production:[...n.production||[]],resourceSources:[...n.resourceSources||[]]}))})}setLocation(n){this.editableLocation.set($(F({},n),{consumption:[...n.consumption||[]],production:[...n.production||[]],resourceSources:[...n.resourceSources||[]]}))}updateLocationName(n){this.editableLocation.update(t=>t?$(F({},t),{name:n}):null)}isResourceSourceSelected(n){return this.editableLocation()?.resourceSources?.includes(n)||!1}toggleResourceSource(n,t){this.editableLocation.update(r=>{if(!r)return null;let i=[...r.resourceSources||[]];return t?i.includes(n)||i.push(n):i=i.filter(o=>o!==n),$(F({},r),{resourceSources:i})})}addInboundResource(){this.editableLocation.update(n=>{if(!n)return null;let t=[...n.consumption||[]];return t.push({resource:null,amount:0}),$(F({},n),{consumption:t})})}removeInboundResource(n){this.editableLocation.update(t=>{if(!t||!t.consumption)return t;let r=[...t.consumption];return r.splice(n,1),$(F({},t),{consumption:r})})}updateInboundResource(n,t){this.editableLocation.update(r=>{if(!r||!r.consumption||!t)return r;let i=[...r.consumption];return i[n]=$(F({},i[n]),{resource:t}),$(F({},r),{consumption:i})})}updateInboundAmount(n,t){this.editableLocation.update(r=>{if(!r||!r.consumption)return r;let i=[...r.consumption];return i[n]=$(F({},i[n]),{amount:t}),$(F({},r),{consumption:i})})}addOutboundResource(){this.editableLocation.update(n=>{if(!n)return null;let t=[...n.production||[]];return t.push({resource:null,amount:0,consumption:0}),$(F({},n),{production:t})})}removeOutboundResource(n){this.editableLocation.update(t=>{if(!t||!t.production)return t;let r=[...t.production];return r.splice(n,1),$(F({},t),{production:r})})}updateOutboundResource(n,t){this.editableLocation.update(r=>{if(!r||!r.production||!t)return r;let i=[...r.production];return i[n]=$(F({},i[n]),{resource:t}),$(F({},r),{production:i})})}updateOutboundAmount(n,t){this.editableLocation.update(r=>{if(!r||!r.production)return r;let i=[...r.production];return i[n]=$(F({},i[n]),{amount:t}),$(F({},r),{production:i})})}saveLocation(){let n=this.editableLocation();if(n&&this.isFormValid()){let t=$(F({},n),{name:n.name.trim()});this.locationSaved.emit(t),this.activeModal.close(t)}}cancel(){this.activeModal.dismiss("cancel")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=ot({type:e,selectors:[["scs-edit-location-modal"]],inputs:{location:[1,"location"]},outputs:{locationSaved:"locationSaved"},decls:11,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"mb-4"],["for","locationName",1,"form-label"],["type","text","id","locationName",1,"form-control",3,"input","value"],[1,"invalid-feedback"],[1,"mb-3"],[1,"list-group"],[1,"text-muted","small"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],["type","button","title","Add Inbound Resource",1,"btn","btn-primary","btn-sm",3,"click"],[1,"bi","bi-plus"],[1,"row","mb-2","align-items-center"],["type","button","title","Add Outbound Resource",1,"btn","btn-primary","btn-sm",3,"click"],[1,"list-group-item"],["type","checkbox",1,"form-check-input","me-2",3,"change","id","checked"],[1,"form-check-label",3,"for"],[1,"col-7"],["placeholder","Select resource...",3,"resourceSelected","selectedResourceInput"],[1,"col-3"],["type","number","min","0","step","10",1,"form-control",3,"input","value"],[1,"col-2","text-end"],["type","button","title","Remove Resource",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash"]],template:function(t,r){if(t&1&&(A(0,"div",0)(1,"h5",1),X(2,"Edit Location"),x(),A(3,"button",2),J("click",function(){return r.cancel()}),x()(),A(4,"div",3),ft(5,hA,28,11),x(),A(6,"div",4)(7,"button",5),J("click",function(){return r.cancel()}),X(8," Cancel "),x(),A(9,"button",6),J("click",function(){return r.saveLocation()}),X(10," Save Changes "),x()()),t&2){let i;L(5),ht((i=r.editableLocation())?5:-1,i),L(4),me("disabled",!r.isFormValid())}},dependencies:[Ht,zc,iu],styles:[".form-check-container[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #dee2e6;border-radius:.375rem;padding:.5rem}.input-group[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]{flex:1}"],changeDetection:0})};var su=class e{ngbModal=w(R0);async editLocation(n){let t=this.ngbModal.open(ou,{size:"lg",backdrop:"static",keyboard:!1});t.componentInstance.setLocation(n);try{return await t.result}catch{return null}}static \u0275fac=function(t){return new(t||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})};var au=class e{STORAGE_KEY="satisfactory-chain-stat-locations";CURRENT_VERSION="1.0.0";loadFromStorage(){try{let n=localStorage.getItem(this.STORAGE_KEY);if(!n)return null;let t=JSON.parse(n);if(!Array.isArray(t))return console.warn("Invalid locations data in localStorage"),null;let r=this.reconstructResourceInstances(t);return bi(r),r}catch(n){return console.error("Error loading locations from localStorage:",n),null}}saveToStorage(n){try{let t=JSON.stringify(n);localStorage.setItem(this.STORAGE_KEY,t)}catch(t){console.error("Error saving locations to localStorage:",t)}}clearStorage(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(n){console.error("Error clearing locations from localStorage:",n)}}exportToJson(n,t){try{let r={version:this.CURRENT_VERSION,exportDate:new Date().toISOString(),locations:n},i=JSON.stringify(r,null,2),o=new Blob([i],{type:"application/json"}),s=URL.createObjectURL(o),a=document.createElement("a");a.href=s,a.download=t||`satisfactory-locations-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}catch(r){throw console.error("Error exporting locations to JSON:",r),new Error("Failed to export locations")}}async importFromJson(n){return new Promise((t,r)=>{if(!n.type.includes("json")){r(new Error("File must be a JSON file"));return}let i=new FileReader;i.onload=o=>{try{let s=o.target?.result,a=JSON.parse(s),l=this.validateImportData(a),c=this.reconstructResourceInstances(l);bi(c),t(c)}catch(s){console.error("Error parsing imported JSON:",s),r(new Error("Invalid JSON file format"))}},i.onerror=()=>{r(new Error("Error reading file"))},i.readAsText(n)})}validateImportData(n){if(n.version&&n.locations&&Array.isArray(n.locations))return this.validateLocationsArray(n.locations);if(Array.isArray(n))return this.validateLocationsArray(n);throw new Error("Invalid import data format")}validateLocationsArray(n){return n.map((t,r)=>{if(!t.id||typeof t.id!="string")throw new Error(`Invalid location ID at index ${r}`);if(!t.name||typeof t.name!="string")throw new Error(`Invalid location name at index ${r}`);if(!Array.isArray(t.resourceSources))throw new Error(`Invalid resourceSources at index ${r}`);return{id:t.id,name:t.name,resourceSources:t.resourceSources||[],cardPositionX:t.cardPositionX||0,cardPositionY:t.cardPositionY||0,consumption:t.consumption||[],production:t.production||[]}})}reconstructResourceInstances(n){return n.map(t=>$(F({},t),{consumption:this.reconstructResourceRecords(t.consumption),production:this.reconstructProductionRecords(t.production)}))}reconstructResourceRecords(n){return!n||!Array.isArray(n)?n:n.map(t=>$(F({},t),{resource:this.reconstructResource(t.resource)}))}reconstructProductionRecords(n){return!n||!Array.isArray(n)?n:n.map(t=>$(F({},t),{resource:this.reconstructResource(t.resource)}))}reconstructResource(n){return n instanceof Dt?n:new Dt(n.className,n.displayName,n.description)}isStorageAvailable(){try{let n="__storage_test__";return localStorage.setItem(n,n),localStorage.removeItem(n),!0}catch{return!1}}static \u0275fac=function(t){return new(t||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})};var En=class e{locationsSignal=ke([]);modalService=w(su);storageService=w(au);locations=this.locationsSignal.asReadonly();constructor(){this.initializeLocations()}initializeLocations(){let n=this.storageService.loadFromStorage();n&&n.length>0?this.locationsSignal.set(n):(bi(va),this.locationsSignal.set(va),this.saveToStorage())}saveToStorage(){this.storageService.saveToStorage(this.locationsSignal())}async editLocation(n){try{let t=await this.modalService.editLocation(n);t&&this.updateLocation(t)}catch(t){console.log("Edit location modal error:",t)}}async newLocation(){let n={id:crypto.randomUUID(),name:"New Location",resourceSources:[]};await this.editLocation(n)}deleteLocation(n){this.locationsSignal.update(t=>{let r=t.filter(i=>i.id!==n.id);return bi(r),r}),this.saveToStorage()}updateCardPosition(n,t,r){this.locationsSignal.update(i=>i.map(o=>o.id===n?$(F({},o),{cardPositionX:t,cardPositionY:r}):o)),this.saveToStorage()}exportLocations(n){this.storageService.exportToJson(this.locationsSignal(),n)}async importLocations(n){try{let t=await this.storageService.importFromJson(n);this.locationsSignal.set(t),this.saveToStorage()}catch(t){throw console.error("Error importing locations:",t),t}}resetToMockData(){bi(va),this.locationsSignal.set([...va]),this.saveToStorage()}clearAllLocations(){this.locationsSignal.set([]),this.storageService.clearStorage()}updateLocation(n){this.locationsSignal.update(t=>{let r=t.findIndex(o=>o.id===n.id),i;return r>=0?i=t.map(o=>o.id===n.id?n:o):i=[...t,n],bi(i),i}),this.saveToStorage()}static \u0275fac=function(t){return new(t||e)};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})};function Xo(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xo=function(n){return typeof n}:Xo=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xo(e)}function R(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function L0(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,n,t){return n&&L0(e.prototype,n),t&&L0(e,t),e}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function oe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Np(e,n)}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_e(e)}function Np(e,n){return Np=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Np(e,n)}function pA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gA(e,n){return n&&(typeof n=="object"||typeof n=="function")?n:m(e)}function se(e){var n=pA();return function(){var r=_e(e),i;if(n){var o=_e(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return gA(this,i)}}function mA(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=_e(e),e!==null););return e}function Ce(e,n,t){return typeof Reflect<"u"&&Reflect.get?Ce=Reflect.get:Ce=function(i,o,s){var a=mA(i,o);if(a){var l=Object.getOwnPropertyDescriptor(a,o);return l.get?l.get.call(s):l.value}},Ce(e,n,t||e)}function yu(e,n){return yA(e)||EA(e,n)||HE(e,n)||CA()}function es(e){return vA(e)||_A(e)||HE(e)||bA()}function vA(e){if(Array.isArray(e))return Rp(e)}function yA(e){if(Array.isArray(e))return e}function _A(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EA(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,s,a;try{for(t=t.call(e);!(i=(s=t.next()).done)&&(r.push(s.value),!(n&&r.length===n));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw a}}return r}}function HE(e,n){if(e){if(typeof e=="string")return Rp(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Rp(e,n)}}function Rp(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function bA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ar(e,n,t){return e==="*"?!0:e.length>0?e.indexOf(n)!==-1:!t}function k(e,n,t){var r;e=e||{},n=n||{};var i=e,o=n;if(t)for(r=0;r<t.length;r++)i[t[r]]=o[t[r]];else for(r in o)i[r]=o[r];return e}function kp(e){return Object.prototype.toString.call(e)==="[object Number]"}function De(e){return typeof e=="string"}function GE(e){return typeof e=="boolean"}function ts(e){return e==null?!1:Object.prototype.toString.call(e)==="[object Object]"}function DA(e){return Object.prototype.toString.call(e)==="[object Date]"}function Vr(e){return Object.prototype.toString.call(e)==="[object Function]"}function Tu(e){if(De(e))return""+e;if(GE(e))return!!e;if(DA(e))return new Date(e.getTime());if(Vr(e))return e;if(Array.isArray(e)){for(var n=[],t=0;t<e.length;t++)n.push(Tu(e[t]));return n}else if(ts(e)){var r={};for(var i in e)r[i]=Tu(e[i]);return r}else return e}function Su(e,n,t,r){var i={},o,s,a={};for(t=t||[],r=r||[],s=0;s<t.length;s++)i[t[s]]=!0;for(s=0;s<r.length;s++)a[r[s]]=!0;var l=Tu(e);for(s in n)if(l[s]==null||a[s])l[s]=n[s];else if(i[s])o=[],o.push.apply(o,Array.isArray(l[s])?l[s]:[l[s]]),o.push(n[s]),l[s]=o;else if(De(n[s])||GE(n[s])||Vr(n[s])||kp(n[s]))l[s]=n[s];else if(Array.isArray(n[s]))o=[],Array.isArray(l[s])&&o.push.apply(o,l[s]),o.push.apply(o,n[s]),l[s]=o;else if(ts(n[s])){ts(l[s])||(l[s]={});for(var c in n[s])l[s][c]=n[s][c]}return l}function UE(e,n,t){for(var r=0;r<t.length;r++){var i=t[r][0][t[r][1]].apply(t[r][0],t[r][2]);if(i===n)return i}return e}function wA(e,n,t,r){var i=function(a){var l=a.match(/(\${.*?})/g);if(l!=null)for(var c=0;c<l.length;c++){var u=n[l[c].substring(2,l[c].length-1)]||"";u!=null&&(a=a.replace(l[c],u))}if(l=a.match(/({{.*?}})/g),l!=null)for(var d=0;d<l.length;d++){var p=n[l[d].substring(2,l[d].length-2)]||"";p!=null&&(a=a.replace(l[d],p))}return a},o=function s(a){if(a!=null){if(De(a))return i(a);if(Vr(a)&&!r&&(t==null||(a.name||"").indexOf(t)===0))return a(n);if(Array.isArray(a)){for(var l=[],c=0;c<a.length;c++)l.push(s(a[c]));return l}else if(ts(a)){var u={};for(var d in a)u[d]=s(a[d]);return u}else return a}};return o(e)}function P(e,n){if(e)for(var t=0;t<e.length;t++)n(e[t]);else return null}function xi(e,n){if(e){for(var t=0;t<e.length;t++)if(n(e[t]))return t}return-1}function TA(e,n){var t=[];if(e)for(var r=0;r<e.length;r++)n(e[r])&&t.push(r);return t}function Qp(e,n){var t=xi(e,n);return t===-1?null:e[t]}function SA(e,n){var t=TA(e,n);return t.map(function(r){return e[r]})}function $E(e,n){var t=null;return e.forEach(function(r){n(r)&&(t=r)}),t}function IA(e){var n=[];return e.forEach(function(t){n.push(t)}),n}function $e(e,n){var t=xi(e,n);return t>-1&&e.splice(t,1),t!==-1}function lu(e){if(Array.fromArray!=null)return Array.from(e);var n=[];return Array.prototype.push.apply(n,e),n}function V0(e,n){var t=e.indexOf(n);return t>-1&&e.splice(t,1),t!==-1}function WE(e,n,t,r){var i=e[n];return i==null&&(i=[],e[n]=i),i[r?"unshift":"push"](t),i}function ya(e,n,t){return e.indexOf(n)===-1?(t?e.unshift(n):e.push(n),!0):!1}var Je=[];for(Lo=0;Lo<256;Lo++)Je[Lo]=(Lo<16?"0":"")+Lo.toString(16);var Lo;function Ve(){var e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return Je[e&255]+Je[e>>8&255]+Je[e>>16&255]+Je[e>>24&255]+"-"+Je[n&255]+Je[n>>8&255]+"-"+Je[n>>16&15|64]+Je[n>>24&255]+"-"+Je[t&63|128]+Je[t>>8&255]+"-"+Je[t>>16&255]+Je[t>>24&255]+Je[r&255]+Je[r>>8&255]+Je[r>>16&255]+Je[r>>24&255]}function Iu(e,n,t){var r={x:e.x-n.x,y:e.y-n.y},i=Math.cos(t/360*Math.PI*2),o=Math.sin(t/360*Math.PI*2);return{x:r.x*i-r.y*o+n.x,y:r.y*i+r.x*o+n.y,cr:i,sr:o}}function Jp(e){if(e==null)return null;for(var n=e.replace(/^\s\s*/,""),t=/\s/,r=n.length;t.test(n.charAt(--r)););return n.slice(0,r+1)}function MA(e,n){e=e.length==null||typeof e=="string"?[e]:e;for(var t=0;t<e.length;t++)n(e[t])}function zE(e,n){for(var t=[],r=0;r<e.length;r++)t.push(n(e[r]));return t}function Le(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];if(typeof console<"u")try{var r=arguments[arguments.length-1];console.log(r)}catch{}}function Mu(e){return e<0?-1:e>0?1:0}function cu(e,n,t){return function(){var r=null;try{n!=null&&(r=n.apply(this,arguments))}catch(i){Le("jsPlumb function failed : "+i)}if(e!=null&&(t==null||r!==t))try{r=e.apply(this,arguments)}catch(i){Le("wrapped function failed : "+i)}return r}}function j0(e,n,t){return e.has(n)||e.set(n,t()),e.get(n)}function YE(e,n){for(var t=e.__proto__;t!=null;){if(t instanceof n)return!0;t=t.__proto__}return!1}function AA(e,n,t,r){if(n.length===0)n.push(e);else{for(var i=r?-1:1,o=0,s=n.length,a=Math.floor((o+s)/2);s>o;){var l=t(e,n[a])*i;l<0?s=a:o=a+1,a=Math.floor((o+s)/2)}n.splice(a,0,e)}}function jr(e,n,t){t=t||e.parentNode;for(var r=t.querySelectorAll(n),i=0;i<r.length;i++)if(r[i]===e)return!0;return!1}function Oa(e,n){e.stopPropagation?e.stopPropagation():e.returnValue=!1,!n&&e.preventDefault&&e.preventDefault()}function Wn(e,n,t,r){if(r&&jr(e,n,t))return e;for(e=e.parentNode;e!=null&&e!==t;){if(jr(e,n))return e;e=e.parentNode}}function xt(e){return e.srcElement||e.target}function xA(e,n,t){n=Jp(n),typeof e.className.baseVal<"u"?e.className.baseVal=n:e.className=n;try{var r=e.classList;if(r!=null){for(;r.length>0;)r.remove(r.item(0));for(var i=0;i<t.length;i++)t[i]&&r.add(t[i])}}catch(o){Le("WARN: cannot set class list",o)}}function eg(e){return e.className!=null?typeof e.className.baseVal>"u"?e.className:e.className.baseVal:""}function qE(e,n,t){var r=n==null?[]:Array.isArray(n)?n:n.split(/\s+/),i=t==null?[]:Array.isArray(t)?t:t.split(/\s+/),o=eg(e),s=o.split(/\s+/),a=function(c,u){for(var d=0;d<u.length;d++)if(c)s.indexOf(u[d])===-1&&s.push(u[d]);else{var p=s.indexOf(u[d]);p!==-1&&s.splice(p,1)}};a(!0,r),a(!1,i),xA(e,s.join(" "),s)}function Na(e){return!De(e)&&!Array.isArray(e)&&e.length!=null&&e.documentElement==null&&e.nodeType==null}function OA(e){return eg(e)}function kr(e,n){var t=function(i,o){if(i!=null&&o!=null&&o.length>0)if(i.classList){var s=Jp(o).split(/\s+/);P(s,function(a){i.classList.add(a)})}else qE(i,o)};Na(e)?P(e,function(r){return t(r,n)}):t(e,n)}function NA(e,n){return e.classList?e.classList.contains(n):eg(e).indexOf(n)!==-1}function Pp(e,n){var t=function(i,o){if(i!=null&&o!=null&&o.length>0)if(i.classList){var s=Jp(o).split(/\s+/);s.forEach(function(a){i.classList.remove(a)})}else qE(i,null,o)};Na(e)?P(e,function(r){return t(r,n)}):t(e,n)}function RA(e,n){var t=this,r=function(o,s){o!=null&&s!=null&&s.length>0&&(o.classList?o.classList.toggle(s):t.hasClass(o,s)?t.removeClass(o,s):t.addClass(o,s))};Na(e)?P(e,function(i){return r(i,n)}):r(e,n)}function KE(e,n,t,r){return ZE(null,e,n,t,r)}function ZE(e,n,t,r,i){var o=e==null?document.createElement(n):document.createElementNS(e,n),s;t=t||{};for(s in t)o.style[s]=t[s];r&&(o.className=r),i=i||{};for(s in i)o.setAttribute(s,""+i[s]);return o}function qo(e){var n=e.getBoundingClientRect(),t=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||t.scrollTop,o=window.pageXOffset||r.scrollLeft||t.scrollLeft,s=r.clientTop||t.clientTop||0,a=r.clientLeft||t.clientLeft||0,l=n.top+i-s,c=n.left+o-a;return{x:Math.round(c),y:Math.round(l)}}function kA(e){return{w:e.offsetWidth,h:e.offsetHeight}}function PA(e){try{return{w:parseFloat(e.width.baseVal.value),h:parseFloat(e.height.baseVal.value)}}catch{return{w:0,h:0}}}function FA(e){try{return{x:parseFloat(e.x.baseVal.value),y:parseFloat(e.y.baseVal.value)}}catch{return{x:0,y:0}}}function uu(e,n){var t=n.getContainer().getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.currentZoom;return{x:(r.left-t.left)/i,y:(r.top-t.top)/i}}function _a(e,n){var t=e.getBoundingClientRect(),r=n.currentZoom;return{w:t.width/r,h:t.height/r}}var ns=function(e){return e.SVG="SVG",e.HTML="HTML",e}(ns||{});function Fp(e){return e instanceof SVGElement?ns.SVG:ns.HTML}function LA(e){return Fp(e)===ns.SVG}function Br(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(function(r){return"."+r}).join(",")}function VA(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.join(" ")}function Gu(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(function(r){return"["+r+"]"}).join(",")}var Lp="source",XE="target",Vp="block",is="none";var Ra="absolute",B0="fixed",jA="static",QE="data-jtk-group",Si="data-jtk-managed",_u="data-jtk-not-draggable",H0="tabindex",BA="data-jtk-scope",JE=BA+"-",eb="checkCondition",HA="checkDropAllowed",tg="jtk-connector",GA="jtk-connector-outline",UA="jtk-connected",Qo="jtk-endpoint",$A="jtk-endpoint-connected",WA="jtk-endpoint-full",ng="jtk-floating-endpoint",zA="jtk-endpoint-drop-allowed",YA="jtk-endpoint-drop-forbidden",qA="jtk-endpoint-anchor",du="jtk-group-collapsed",Ea="jtk-group-expanded",Uu="jtk-overlay",KA="anchor:changed",tb="connection",nb="internal.connection",ZA="connection:detach",ib="connection:move",XA="container:change",QA="endpoint:replaced",rb="internal.endpoint:unregistered",ig="internal.connection:detached",ob="element:manage",JA="group:added",ex="group:collapse",tx="group:expand",nx="group:member:added",ix="group:member:removed",rx="group:removed",sb="maxConnections",ox="group:nested:added",sx="group:nested:removed",ab="element:unmanage",lb="zoom",Jo="isDetachAllowed",ax="beforeDrag",cb="beforeDrop",ub="beforeDetach",lx="beforeStartDetach",ye=Gu(Si),cx="Cannot establish connection: source endpoint is full",ux="Cannot establish connection: target endpoint is full",dx="Cannot establish connection: source does not exist",fx="Cannot establish connection: target does not exist",hx="connectionOverlays",G0={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},ba="stroke-dasharray",wp="dashstyle",px="fill",gx="stroke",mx="stroke-width",vx="strokeWidth",db="svg",jp="path",U0={svg:"http://www.w3.org/2000/svg"};function Kn(e,n){for(var t in n)e.setAttribute(t,""+n[t])}function Zn(e,n){return n=n||{},n.version="1.1",n.xmlns=U0.svg,ZE(U0.svg,e,null,null,n)}function fb(e){return"position:absolute;left:"+e[0]+"px;top:"+e[1]+"px"}function Bp(e,n,t){if(n.setAttribute(px,t.fill?t.fill:is),n.setAttribute(gx,t.stroke?t.stroke:is),t.strokeWidth&&n.setAttribute(mx,t.strokeWidth),t[wp]&&t[vx]&&!t[ba]){var r=t[wp].indexOf(",")===-1?" ":",",i=t[wp].split(r),o="";P(i,function(a){o+=Math.floor(a*t.strokeWidth)+r}),n.setAttribute(ba,o)}else t[ba]&&n.setAttribute(ba,t[ba]);for(var s in G0)t[s]&&n.setAttribute(G0[s],t[s])}function Eu(e,n,t){e.childNodes.length>t?e.insertBefore(n,e.childNodes[t]):e.appendChild(n)}function ce(e,n,t){var r=[e,n];return t&&r.push(t),r.join(":")}var $0="data-jtk-container",yx="data-jtk-group-content",fu="data-jtk-enabled",Tp="data-jtk-scope",Qn="endpoint",Cn="element",Dn="connection",hb="div",vt="click",Yn="contextmenu",Ot="dblclick",Wt="dbltap",_x="focus",ee="mousedown",rg="mouseenter",og="mouseexit",Ue="mousemove",te="mouseup",zt="mouseout",Yt="mouseover",qt="tap",Ex="touchstart",bx="touchend",Cx="touchmove",Dx="drag:move",wx="drag:stop",Tx="drag:start",Au="revert",Sx="connection:abort",W0="connection:drag",z0=ce(Cn,vt),Ix=ce(Cn,Ot),Y0=ce(Cn,Wt),Mx=ce(Cn,zt),Ax=ce(Cn,Yt),xx=ce(Cn,Ue),Ox=ce(Cn,te),Nx=ce(Cn,ee),Rx=ce(Cn,Yn),q0=ce(Cn,qt),kx=ce(Qn,vt),Px=ce(Qn,Ot),i9=ce(Qn,Wt),Fx=ce(Qn,zt),Lx=ce(Qn,Yt),Vx=ce(Qn,te),jx=ce(Qn,ee),r9=ce(Qn,qt),Bx=ce(Dn,vt),Hx=ce(Dn,Ot),Gx=ce(Dn,Wt),Ux=ce(Dn,zt),$x=ce(Dn,Yt),Wx=ce(Dn,te),zx=ce(Dn,ee),Yx=ce(Dn,Yn),qx=ce(Dn,qt),K0="position",un=Br(tg),xr=Br(Qo),Kx=Gu(QE),Zx=Gu(yx),$n=Br(Uu),Ur=function(e){return e.Circle="Circle",e.Ellipse="Ellipse",e.Triangle="Triangle",e.Diamond="Diamond",e.Rectangle="Rectangle",e.Square="Square",e}(Ur||{}),Xn=function(e){return e.Assign="Assign",e.AutoDefault="AutoDefault",e.Bottom="Bottom",e.BottomLeft="BottomLeft",e.BottomRight="BottomRight",e.Center="Center",e.Continuous="Continuous",e.ContinuousBottom="ContinuousBottom",e.ContinuousLeft="ContinuousLeft",e.ContinuousRight="ContinuousRight",e.ContinuousTop="ContinuousTop",e.ContinuousLeftRight="ContinuousLeftRight",e.ContinuousTopBottom="ContinuousTopBottom",e.Left="Left",e.Perimeter="Perimeter",e.Right="Right",e.Top="Top",e.TopLeft="TopLeft",e.TopRight="TopRight",e}(Xn||{});function Xx(){return{d:1/0,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null}}function xu(){return{xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0}}var sg=function(){function e(n){R(this,e),this.params=n,f(this,"x1",void 0),f(this,"x2",void 0),f(this,"y1",void 0),f(this,"y2",void 0),f(this,"extents",xu()),f(this,"type",void 0),this.x1=n.x1,this.y1=n.y1,this.x2=n.x2,this.y2=n.y2}return V(e,[{key:"findClosestPointOnPath",value:function(t,r){return Xx()}},{key:"lineIntersection",value:function(t,r,i,o){return[]}},{key:"boxIntersection",value:function(t,r,i,o){var s=[];return s.push.apply(s,this.lineIntersection(t,r,t+i,r)),s.push.apply(s,this.lineIntersection(t+i,r,t+i,r+o)),s.push.apply(s,this.lineIntersection(t+i,r+o,t,r+o)),s.push.apply(s,this.lineIntersection(t,r+o,t,r)),s}},{key:"boundingBoxIntersection",value:function(t){return this.boxIntersection(t.x,t.y,t.w,t.h)}}]),e}(),pb="undefined",Ou="default",gb="true",Ko="false",Fr="*",Ca,Da;function Qx(e,n,t,r,i,o,s){return new Touch({target:e,identifier:Ve(),pageX:n,pageY:t,screenX:r,screenY:i,clientX:o||r,clientY:s||i})}function Jx(){var e=[];return e.push.apply(e,arguments),e.item=function(n){return this[n]},e}function eO(e,n,t,r,i,o,s){return Jx(Qx(e,n,t,r,i,o,s))}function rs(e,n,t){t=t||e.parentNode;for(var r=t.querySelectorAll(n),i=0;i<r.length;i++)if(r[i]===e)return!0;return!1}function ka(e){return e.srcElement||e.target}function Hp(e,n,t,r){if(r){var i=e.composedPath?e.composedPath():e.path;if(typeof i<"u"&&i.indexOf)return{path:i,end:i.indexOf(t)};var o={path:[],end:-1},s=function a(l){o.path.push(l),l===t?o.end=o.path.length-1:l.parentNode!=null&&a(l.parentNode)};return s(n),o}else return{path:[n],end:1}}function tO(e,n){var t=0,r;for(t=0,r=e.length;t<r&&e[t][0]!==n;t++);t<e.length&&e.splice(t,1)}var nO=1,iO=!1,rO=!1;function xa(){return iO||"ontouchstart"in document.documentElement||navigator.maxTouchPoints!=null&&navigator.maxTouchPoints>0}function bu(){return rO||"onmousedown"in document.documentElement}var qn=(Ca={},f(Ca,ee,Ex),f(Ca,te,bx),f(Ca,Ue,Cx),Ca),oO="page",sO="screen",aO="client";function ag(e,n){if(e==null)return{x:0,y:0};var t=mb(e),r=uO(t,0);return{x:r[n+"X"],y:r[n+"Y"]}}function Nu(e){return ag(e,oO)}function lO(e){return ag(e,sO)}function cO(e){return ag(e,aO)}function uO(e,n){return e.item?e.item(n):e[n]}function mb(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e]}function dO(e){return mb(e).length}function Ru(e,n,t,r,i){if(yb(e,n,t),r.__tauid=t.__tauid,e.addEventListener)e.addEventListener(n,t,!1,i);else if(e.attachEvent){var o=n+t.__tauid;e["e"+o]=t,e[o]=function(){e["e"+o]&&e["e"+o](window.event)},e.attachEvent("on"+n,e[o])}}function Pa(e,n,t){var r=this;t!=null&&vb(e,function(i){if(fO(i,n,t),t.__tauid!=null){if(i.removeEventListener)i.removeEventListener(n,t,!1),xa()&&qn[n]&&i.removeEventListener(qn[n],t,!1);else if(r.detachEvent){var o=n+t.__tauid;i[o]&&i.detachEvent("on"+n,i[o]),i[o]=null,i["e"+o]=null}}t.__taTouchProxy&&Pa(e,t.__taTouchProxy[1],t.__taTouchProxy[0])})}function vb(e,n){if(e!=null)for(var t=typeof e=="string"?document.querySelectorAll(e):e.length!=null?e:[e],r=0;r<t.length;r++)n(t[r])}function yb(e,n,t){var r=nO++;return e.__ta=e.__ta||{},e.__ta[n]=e.__ta[n]||{},e.__ta[n][r]=t,t.__tauid=r,r}function fO(e,n,t){if(e.__ta&&e.__ta[n]&&delete e.__ta[n][t.__tauid],t.__taExtra){for(var r=0;r<t.__taExtra.length;r++)Pa(e,t.__taExtra[r][0],t.__taExtra[r][1]);t.__taExtra.length=0}t.__taUnstore&&t.__taUnstore()}var hO=/:not\(([^)]+)\)/;function ku(e,n,t,r){if(e==null)return t;var i=e.split(","),o=[],s=[];P(i,function(l){var c=l.match(hO);c!=null?s.push(c[1]):o.push(l)}),s.length>0&&o.length===0&&o.push(Fr);var a=function l(c){l.__tauid=t.__tauid;var u=ka(c),d=!1,p=u,h=Hp(c,u,n,e!=null);if(h.end!=-1)for(var g=0;!d&&g<h.end;g++){p=h.path[g];for(var y=0;y<s.length;y++)if(rs(p,s[y],n))return;for(var v=0;!d&&v<o.length;v++)if(rs(p,o[v],n)){t.apply(p,[c,p]),d=!0;break}}};return pO(t,r,a),a}function pO(e,n,t){e.__taExtra=e.__taExtra||[],e.__taExtra.push([n,t])}var Cu=function(n,t,r,i,o){if(xa()&&qn[t]){var s=ku(i,n,r,qn[t]);Ru(n,qn[t],s,r,o)}t===_x&&n.getAttribute(H0)==null&&n.setAttribute(H0,"1"),Ru(n,t,ku(i,n,r,t),r,o)},Sp=(Da={},f(Da,qt,{touches:1,taps:1}),f(Da,Wt,{touches:1,taps:2}),f(Da,Yn,{touches:2,taps:1}),Da);function Z0(e,n,t,r){for(var i in t.__tamee[e])t.__tamee[e].hasOwnProperty(i)&&t.__tamee[e][i].apply(r,[n])}var gO=function(){function e(){R(this,e)}return V(e,null,[{key:"generate",value:function(t,r){return function(i,o,s,a){if(o==Yn&&bu())Cu(i,o,s,a);else{if(i.__taTapHandler==null){var l=i.__taTapHandler={tap:[],dbltap:[],down:!1,taps:0,downSelectors:[]},c=function(g){for(var y=ka(g),v=Hp(g,y,i,a!=null),_=!1,b=0;b<v.end;b++){if(_)return;y=v.path[b];for(var E=0;E<l.downSelectors.length;E++)if(l.downSelectors[E]==null||rs(y,l.downSelectors[E],i)){l.down=!0,setTimeout(d,t),setTimeout(p,r),_=!0;break}}},u=function(g){if(l.down){var y=ka(g),v,_;l.taps++;var b=dO(g);for(var E in Sp)if(Sp.hasOwnProperty(E)){var C=Sp[E];if(C.touches===b&&(C.taps===1||C.taps===l.taps))for(var T=0;T<l[E].length;T++){_=Hp(g,y,i,l[E][T][1]!=null);for(var I=0;I<_.end;I++)if(v=_.path[I],l[E][T][1]==null||rs(v,l[E][T][1],i)){l[E][T][0].apply(v,[g,v]);break}}}}},d=function(){l.down=!1},p=function(){l.taps=0};i.__taTapHandler.downHandler=c,i.__taTapHandler.upHandler=u,Cu(i,ee,c),Cu(i,te,u)}i.__taTapHandler.downSelectors.push(a),i.__taTapHandler[o].push([s,a]),s.__taUnstore=function(){i.__taTapHandler!=null&&($e(i.__taTapHandler.downSelectors,function(h){return h===a}),tO(i.__taTapHandler[o],s),i.__taTapHandler.downSelectors.length===0&&(Pa(i,ee,i.__taTapHandler.downHandler),Pa(i,te,i.__taTapHandler.upHandler),delete i.__taTapHandler))}}}}}]),e}(),mO=function(){function e(){R(this,e)}return V(e,null,[{key:"generate",value:function(){var t=[];return function(r,i,o,s){if(!r.__tamee){r.__tamee={over:!1,mouseenter:[],mouseexit:[]};var a=function(u){var d=ka(u);(s==null&&d==r&&!r.__tamee.over||rs(d,s,r)&&(d.__tamee==null||!d.__tamee.over))&&(Z0(rg,u,r,d),d.__tamee=d.__tamee||{},d.__tamee.over=!0,t.push(d))},l=function(u){for(var d=ka(u),p=0;p<t.length;p++)d==t[p]&&!rs(u.relatedTarget||u.toElement,"*",d)&&(d.__tamee.over=!1,t.splice(p,1),Z0(og,u,r,d))};Ru(r,Yt,ku(s,r,a,Yt),a),Ru(r,zt,ku(s,r,l,zt),l)}o.__taUnstore=function(){delete r.__tamee[i][o.__tauid]},yb(r,i,o),r.__tamee[i][o.__tauid]=o}}}]),e}(),lg=function(){function e(n){R(this,e),f(this,"clickThreshold",void 0),f(this,"dblClickThreshold",void 0),f(this,"tapHandler",void 0),f(this,"mouseEnterExitHandler",void 0),n=n||{},this.clickThreshold=n.clickThreshold||250,this.dblClickThreshold=n.dblClickThreshold||450,this.mouseEnterExitHandler=mO.generate(),this.tapHandler=gO.generate(this.clickThreshold,this.dblClickThreshold)}return V(e,[{key:"_doBind",value:function(t,r,i,o,s){if(i!=null){var a=t;r===qt||r===Wt||r===Yn?this.tapHandler(a,r,i,o,s):r===rg||r==og?this.mouseEnterExitHandler(a,r,i,o,s):Cu(a,r,i,o,s)}}},{key:"on",value:function(t,r,i,o,s){var a=o==null?null:i,l=o??i;return this._doBind(t,r,l,a,s),this}},{key:"off",value:function(t,r,i){return Pa(t,r,i),this}},{key:"trigger",value:function(t,r,i,o,s){var a=bu()&&(typeof MouseEvent>"u"||i==null||i.constructor===MouseEvent),l=xa()&&!bu()&&qn[r]?qn[r]:r,c=!(xa()&&!bu()&&qn[r]),u=Nu(i),d=lO(i),p=cO(i);return vb(t,function(h){var g;i=i||{screenX:d.x,screenY:d.y,clientX:p.x,clientY:p.y};var y=function(C){o&&(C.payload=o)},v={TouchEvent:function(C){var T=eO(h,u.x,u.y,d.x,d.y,p.x,p.y),I=C.initTouchEvent||C.initEvent;I(l,!0,!0,window,null,d.x,d.y,p.x,p.y,!1,!1,!1,!1,T,T,T,1,0)},MouseEvents:function(C){C.initMouseEvent(l,!0,!0,window,s??1,d.x,d.y,p.x,p.y,!1,!1,!1,!1,1,h)}},_=!c&&!a&&xa()&&qn[r],b=_?"TouchEvent":"MouseEvents";g=document.createEvent(b),v[b](g),y(g),h.dispatchEvent(g)}),this}}]),e}();var vO=[null,[1,-1],[1,1],[-1,1],[-1,-1]],yO=[null,[-1,-1],[-1,1],[1,1],[1,-1]],Or=2*Math.PI;function os(e,n){return n.x===e.x?n.y>e.y?1/0:-1/0:n.y===e.y?n.x>e.x?0:-0:(n.y-e.y)/(n.x-e.x)}function _O(e,n){return-1/os(e,n)}function Gp(e,n){return Math.sqrt(Math.pow(n.y-e.y,2)+Math.pow(n.x-e.x,2))}function cg(e,n){return n.x>e.x||n.x==e.x?n.y>e.y?2:1:n.y>e.y?3:4}function EO(e,n){var t=os(e,n),r=Math.atan(t),i=cg(e,n);return(i==4||i==3)&&(r+=Math.PI),r<0&&(r+=2*Math.PI),r}function _b(e,n){var t=e.x,r=e.x+e.w,i=e.y,o=e.y+e.h,s=n.x,a=n.x+n.w,l=n.y,c=n.y+n.h;return t<=s&&s<=r&&i<=l&&l<=o||t<=a&&a<=r&&i<=l&&l<=o||t<=s&&s<=r&&i<=c&&c<=o||t<=a&&s<=r&&i<=c&&c<=o||s<=t&&t<=a&&l<=i&&i<=c||s<=r&&r<=a&&l<=i&&i<=c||s<=t&&t<=a&&l<=o&&o<=c||s<=r&&t<=a&&l<=o&&o<=c}function Pr(e,n,t){var r=os(e,n),i=cg(e,n),o=t>0?vO[i]:yO[i],s=Math.atan(r),a=Math.abs(t*Math.sin(s))*o[1],l=Math.abs(t*Math.cos(s))*o[0];return{x:e.x+l,y:e.y+a}}function bO(e,n,t){var r=os(e,n),i=Math.atan(-1/r),o=t/2*Math.sin(i),s=t/2*Math.cos(i);return[{x:n.x+s,y:n.y+o},{x:n.x-s,y:n.y-o}]}function CO(e,n,t,r){t=t??(n.thresholdX==null?n.w/2:n.thresholdX),r=r??(n.thresholdY==null?n.h/2:n.thresholdY);var i=Math.floor(e.x/n.w),o=n.w*i,s=o+n.w,a=Math.abs(e.x-o)<=t?o:Math.abs(s-e.x)<=t?s:e.x,l=Math.floor(e.y/n.h),c=n.h*l,u=c+n.h,d=Math.abs(e.y-c)<=r?c:Math.abs(u-e.y)<=r?u:e.y;return{x:a,y:d}}function DO(e,n,t){if(jr(n,t,e))return n;for(var r=n.parentNode;r!=null&&r!==e;){if(jr(r,t,e))return r;r=r.parentNode}}function wO(e){return typeof e=="function"?(e._katavorioId=Ve(),e._katavorioId):e}function X0(e,n,t){var r=n.parentNode,i=e.getSize(r),o=e.getSize(n),s=t.x,a=s+o.w,l=t.y,c=l+o.h;return a>0&&s<i.w&&c>0&&l<i.h}function TO(e,n,t){for(var r=null,i=n.getAttribute("katavorio-draggable"),o=i!=null?"[katavorio-draggable='"+i+"'] ":"",s=0;s<e.length;s++)if(r=DO(n,t,o+e[s].selector),r!=null){if(e[s].filter){var a=jr(t,e[s].filter,r),l=e[s].filterExclude===!0;if(l&&!a||a)return null}return[e[s],r]}return null}var Eb="start",bb="beforeStart",Cb="drag",SO="drop",IO="over",MO="out",Db="stop",wb="katavorio-draggable",AO=wb,xO=10,OO=10,Ip=function(){return!0},NO=function(){return!1},Ta={delegatedDraggable:"katavorio-delegated-draggable",draggable:AO,drag:"katavorio-drag",selected:"katavorio-drag-selected",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},wn=function(e){return e.absolutePosition="absolutePosition",e.transform="transform",e.xyAttributes="xyAttributes",e}(wn||{}),ug=new Map;ug.set(wn.absolutePosition,function(e,n){e.style.left="".concat(n.x,"px"),e.style.top="".concat(n.y,"px")});ug.set(wn.xyAttributes,function(e,n){e.setAttribute("x","".concat(n.x)),e.setAttribute("y","".concat(n.y))});var dg=new Map;dg.set(wn.absolutePosition,function(e){return{x:e.offsetLeft,y:e.offsetTop}});dg.set(wn.xyAttributes,function(e){return{x:parseFloat(e.getAttribute("x")),y:parseFloat(e.getAttribute("y"))}});var fg=new Map;fg.set(wn.absolutePosition,function(e,n){e.style.width="".concat(n.w,"px"),e.style.height="".concat(n.h,"px")});fg.set(wn.xyAttributes,function(e,n){e.setAttribute("width","".concat(n.w)),e.setAttribute("height","".concat(n.h))});var hg=new Map;hg.set(wn.absolutePosition,function(e){return{w:e.offsetWidth,h:e.offsetHeight}});hg.set(wn.xyAttributes,function(e){return{w:parseFloat(e.getAttribute("width")),h:parseFloat(e.getAttribute("height"))}});var Mp=[Db,Eb,Cb,SO,IO,MO,bb],RO=function(){},Vo=function(n,t){if(n!=null){n=!De(n)&&n.tagName==null&&n.length!=null?n:[n];for(var r=0;r<n.length;r++)t.apply(n[r],[n[r]])}},kO=function(n,t,r){var i=n.srcElement||n.target;return!jr(i,r.getInputFilterSelector(),t)},PO=function(){function e(n,t){R(this,e),this.el=n,this.manager=t,f(this,"_class",void 0),f(this,"uuid",Ve()),f(this,"enabled",!0),f(this,"scopes",[]),f(this,"eventManager",void 0),this.eventManager=t.eventManager}return V(e,[{key:"setEnabled",value:function(t){this.enabled=t}},{key:"isEnabled",value:function(){return this.enabled}},{key:"toggleEnabled",value:function(){this.enabled=!this.enabled}},{key:"addScope",value:function(t){var r={};Vo(this.scopes,function(o){r[o]=!0}),Vo(t?t.split(/\s+/):[],function(o){r[o]=!0}),this.scopes.length=0;for(var i in r)this.scopes.push(i)}},{key:"removeScope",value:function(t){var r={};Vo(this.scopes,function(o){r[o]=!0}),Vo(t?t.split(/\s+/):[],function(o){delete r[o]}),this.scopes.length=0;for(var i in r)this.scopes.push(i)}},{key:"toggleScope",value:function(t){var r={};Vo(this.scopes,function(o){r[o]=!0}),Vo(t?t.split(/\s+/):[],function(o){r[o]?delete r[o]:r[o]=!0}),this.scopes.length=0;for(var i in r)this.scopes.push(i)}}]),e}();function FO(e){return{w:e.parentNode.offsetWidth+e.parentNode.scrollLeft,h:e.parentNode.offsetHeight+e.parentNode.scrollTop}}var Du=function(e){return e.notNegative="notNegative",e.parent="parent",e.parentEnclosed="parentEnclosed",e}(Du||{}),LO=function(e){oe(t,e);var n=se(t);function t(r,i,o){var s;if(R(this,t),s=n.call(this,r,o),f(m(s),"_class",void 0),f(m(s),"rightButtonCanDrag",void 0),f(m(s),"consumeStartEvent",void 0),f(m(s),"clone",void 0),f(m(s),"scroll",void 0),f(m(s),"trackScroll",void 0),f(m(s),"_downAt",void 0),f(m(s),"_posAtDown",void 0),f(m(s),"_pagePosAtDown",void 0),f(m(s),"_pageDelta",{x:0,y:0}),f(m(s),"_moving",void 0),f(m(s),"_lastPosition",void 0),f(m(s),"_lastScrollValues",{x:0,y:0}),f(m(s),"_initialScroll",{x:0,y:0}),f(m(s),"_size",void 0),f(m(s),"_currentParentPosition",void 0),f(m(s),"_ghostParentPosition",void 0),f(m(s),"_dragEl",void 0),f(m(s),"_multipleDrop",void 0),f(m(s),"_ghostProxyOffsets",void 0),f(m(s),"_ghostDx",void 0),f(m(s),"_ghostDy",void 0),f(m(s),"_isConstrained",!1),f(m(s),"_ghostProxyParent",void 0),f(m(s),"_useGhostProxy",void 0),f(m(s),"_ghostProxyFunction",void 0),f(m(s),"_activeSelectorParams",void 0),f(m(s),"_availableSelectors",[]),f(m(s),"_canDrag",void 0),f(m(s),"_consumeFilteredEvents",void 0),f(m(s),"_parent",void 0),f(m(s),"_ignoreZoom",void 0),f(m(s),"_filters",{}),f(m(s),"_constrainRect",void 0),f(m(s),"_elementToDrag",void 0),f(m(s),"downListener",void 0),f(m(s),"moveListener",void 0),f(m(s),"upListener",void 0),f(m(s),"scrollTracker",void 0),f(m(s),"listeners",{start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]}),s._class=s.manager.css.draggable,kr(s.el,s._class),s.downListener=s._downListener.bind(m(s)),s.upListener=s._upListener.bind(m(s)),s.moveListener=s._moveListener.bind(m(s)),s.rightButtonCanDrag=i.rightButtonCanDrag===!0,s.consumeStartEvent=i.consumeStartEvent!==!1,s._dragEl=s.el,s.clone=i.clone===!0,s.scroll=i.scroll===!0,s.trackScroll=i.trackScroll!==!1,s._multipleDrop=i.multipleDrop!==!1,s._canDrag=i.canDrag||Ip,s._consumeFilteredEvents=i.consumeFilteredEvents,s._parent=i.parent,s._ignoreZoom=i.ignoreZoom===!0,s._ghostProxyParent=i.ghostProxyParent,s.trackScroll&&(s.scrollTracker=s._trackScroll.bind(m(s)),document.addEventListener("scroll",s.scrollTracker)),i.ghostProxy===!0?s._useGhostProxy=Ip:i.ghostProxy&&typeof i.ghostProxy=="function"?s._useGhostProxy=i.ghostProxy:s._useGhostProxy=function(l,c){return s._activeSelectorParams&&s._activeSelectorParams.useGhostProxy?s._activeSelectorParams.useGhostProxy(l,c):!1},i.makeGhostProxy?s._ghostProxyFunction=i.makeGhostProxy:s._ghostProxyFunction=function(l){return s._activeSelectorParams&&s._activeSelectorParams.makeGhostProxy?s._activeSelectorParams.makeGhostProxy(l):l.cloneNode(!0)},i.selector){var a=s.el.getAttribute(wb);a==null&&(a=""+new Date().getTime(),s.el.setAttribute("katavorio-draggable",a)),s._availableSelectors.push(i)}return s.eventManager.on(s.el,ee,s.downListener),s}return V(t,[{key:"_trackScroll",value:function(i){if(this._moving){var o={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},s=o.x-this._lastScrollValues.x,a=o.y-this._lastScrollValues.y,l={x:s+this._lastPosition.x,y:a+this._lastPosition.y},c=l.x-this._downAt.x,u=l.y-this._downAt.y,d=this._ignoreZoom?1:this.manager.getZoom();this._dragEl&&this._dragEl.parentNode&&(c+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,u+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),c/=d,u/=d,this.moveBy(c,u,i),this._lastPosition=l,this._lastScrollValues=o}}},{key:"on",value:function(i,o){this.listeners[i]&&this.listeners[i].push(o)}},{key:"off",value:function(i,o){if(this.listeners[i]){for(var s=[],a=0;a<this.listeners[i].length;a++)this.listeners[i][a]!==o&&s.push(this.listeners[i][a]);this.listeners[i]=s}}},{key:"_upListener",value:function(i){this._downAt&&(this._downAt=null,this.eventManager.off(document,Ue,this.moveListener),this.eventManager.off(document,te,this.upListener),Pp(document.body,Ta.noSelect),this.unmark(i),this.stop(i),this._moving=!1,this.clone?(this._dragEl&&this._dragEl.parentNode&&this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=null):this._activeSelectorParams&&this._activeSelectorParams.revertFunction&&this._activeSelectorParams.revertFunction(this._dragEl,this.manager.getPosition(this._dragEl))===!0&&(this.manager.setPosition(this._dragEl,this._posAtDown),this._dispatch(Au,this._dragEl)))}},{key:"_downListener",value:function(i){if(!i.defaultPrevented){var o=this.rightButtonCanDrag||i.which!==3&&i.button!==2;if(o&&this.isEnabled()&&this._canDrag()){var s=this._testFilter(i)&&kO(i,this.el,this.manager);if(s){this._activeSelectorParams=null,this._elementToDrag=null,this._availableSelectors.length===0&&console.log("JSPLUMB: no available drag selectors");var a=i.target||i.srcElement,l=TO(this._availableSelectors,this.el,a);if(l!=null&&(this._activeSelectorParams=l[0],this._elementToDrag=l[1]),this._activeSelectorParams==null||this._elementToDrag==null)return;var c=this._activeSelectorParams.dragInit?this._activeSelectorParams.dragInit(this._elementToDrag,i):null;if(c!=null&&(this._elementToDrag=c),this.clone)if(this._dragEl=this._elementToDrag.cloneNode(!0),kr(this._dragEl,Ta.clonedDrag),this._dragEl.setAttribute("id",null),this._dragEl.style.position="absolute",this._parent!=null){var u=this.manager.getPosition(this.el);this._dragEl.style.left=u.x+"px",this._dragEl.style.top=u.y+"px",this._parent.appendChild(this._dragEl)}else{var d=qo(this._elementToDrag);this._dragEl.style.left=d.x+"px",this._dragEl.style.top=d.y+"px",document.body.appendChild(this._dragEl)}else this._dragEl=this._elementToDrag;this.consumeStartEvent&&Oa(i),this._downAt=Nu(i),this._dragEl&&this._dragEl.parentNode&&(this._initialScroll={x:this._dragEl.parentNode.scrollLeft,y:this._dragEl.parentNode.scrollTop}),this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=qo(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),this.eventManager.on(document,Ue,this.moveListener),this.eventManager.on(document,te,this.upListener),kr(document.body,Ta.noSelect),this._dispatch(bb,{el:this.el,pos:this._posAtDown,e:i,drag:this,size:this._size})}else this._consumeFilteredEvents&&Oa(i)}}}},{key:"_moveListener",value:function(i){if(this._downAt){if(!this._moving){var o=this._dispatch(Eb,{el:this.el,pos:this._posAtDown,e:i,drag:this,size:this._size});if(o!==!1){if(!this._downAt)return;this.mark(o),this._moving=!0}else this.abort()}if(this._downAt){var s=Nu(i),a=s.x-this._downAt.x,l=s.y-this._downAt.y,c=this._ignoreZoom?1:this.manager.getZoom();this._lastPosition={x:s.x,y:s.y},this._lastScrollValues={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},this._dragEl&&this._dragEl.parentNode&&(a+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,l+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),a/=c,l/=c,this.moveBy(a,l,i)}}}},{key:"getDragDelta",value:function(){return this._posAtDown!=null&&this._downAt!=null?{x:this._downAt.x-this._posAtDown.x,y:this._downAt.y-this._posAtDown.y}:{x:0,y:0}}},{key:"mark",value:function(i){this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=qo(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),kr(this._dragEl,this.manager.css.drag),this._constrainRect=FO(this._dragEl),this._ghostDx=0,this._ghostDy=0}},{key:"unmark",value:function(i){this._isConstrained&&this._useGhostProxy(this._elementToDrag,this._dragEl)?(this._ghostProxyOffsets={x:this._dragEl.offsetLeft-this._ghostDx,y:this._dragEl.offsetTop-this._ghostDy},this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag):this._ghostProxyOffsets=null,Pp(this._dragEl,this.manager.css.drag),this._isConstrained=!1}},{key:"moveBy",value:function(i,o,s){var a=this.toGrid({x:this._posAtDown.x+i,y:this._posAtDown.y+o}),l=this._doConstrain(a,this._dragEl,this._constrainRect,this._size,s);if(l!=null){if(this._useGhostProxy(this.el,this._dragEl))if(a.x!==l.x||a.y!==l.y){if(!this._isConstrained){var c=this._ghostProxyFunction(this._elementToDrag);kr(c,Ta.ghostProxy),this._ghostProxyParent?(this._ghostProxyParent.appendChild(c),this._currentParentPosition=qo(this._elementToDrag.parentNode),this._ghostParentPosition=qo(this._ghostProxyParent),this._ghostDx=this._currentParentPosition.x-this._ghostParentPosition.x,this._ghostDy=this._currentParentPosition.y-this._ghostParentPosition.y):this._elementToDrag.parentNode.appendChild(c),this._dragEl=c,this._isConstrained=!0}l=a}else this._isConstrained&&(this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag,this._isConstrained=!1,this._currentParentPosition=null,this._ghostParentPosition=null,this._ghostDx=0,this._ghostDy=0);this.manager.setPosition(this._dragEl,{x:l.x+this._ghostDx,y:l.y+this._ghostDy}),this._dispatch(Cb,{el:this.el,pos:l,e:s,drag:this,size:this._size,originalPos:this._posAtDown})}}},{key:"abort",value:function(){this._downAt!=null&&this._upListener()}},{key:"getDragElement",value:function(i){return i?this._elementToDrag||this.el:this._dragEl||this.el}},{key:"stop",value:function(i,o){if(o||this._moving){var s=[],a=this.manager.getPosition(this._dragEl);s.push([this._dragEl,a,this,this._size]),this._dispatch(Db,{el:this._dragEl,pos:this._ghostProxyOffsets||a,finalPos:a,e:i,drag:this,selection:s,size:this._size,originalPos:{x:this._posAtDown.x,y:this._posAtDown.y}})}else this._moving||this._activeSelectorParams.dragAbort&&this._activeSelectorParams.dragAbort(this._elementToDrag)}},{key:"_dispatch",value:function(i,o){var s=null;if(this._activeSelectorParams&&this._activeSelectorParams[i])s=this._activeSelectorParams[i](o);else if(this.listeners[i])for(var a=0;a<this.listeners[i].length;a++)try{var l=this.listeners[i][a](o);l!=null&&(s=l)}catch{}return s}},{key:"resolveGrid",value:function(){var i={grid:null,thresholdX:xO/2,thresholdY:OO/2};return this._activeSelectorParams!=null&&this._activeSelectorParams.grid!=null&&(i.grid=this._activeSelectorParams.grid,this._activeSelectorParams.snapThreshold!=null&&(i.thresholdX=this._activeSelectorParams.snapThreshold,i.thresholdY=this._activeSelectorParams.snapThreshold)),i}},{key:"toGrid",value:function(i){var o=this.resolveGrid(),s=o.grid,a=o.thresholdX,l=o.thresholdY;if(s==null)return i;var c=s?s.w/2:a,u=s?s.h/2:l;return CO(i,s,c,u)}},{key:"setUseGhostProxy",value:function(i){this._useGhostProxy=i?Ip:NO}},{key:"_doConstrain",value:function(i,o,s,a,l){return this._activeSelectorParams!=null&&this._activeSelectorParams.constrainFunction&&typeof this._activeSelectorParams.constrainFunction=="function"?this._activeSelectorParams.constrainFunction(i,o,s,a,l):i}},{key:"_testFilter",value:function(i){for(var o in this._filters){var s=this._filters[o],a=s[0](i);if(s[1]&&(a=!a),!a)return!1}return!0}},{key:"addFilter",value:function(i,o){var s=this;if(i){var a=wO(i);this._filters[a]=[function(l){var c=l.srcElement||l.target,u;return De(i)?u=jr(c,i,s.el):typeof i=="function"&&(u=i(l,s.el)),u},o!==!1]}}},{key:"removeFilter",value:function(i){var o=typeof i=="function"?i._katavorioId:i;delete this._filters[o]}},{key:"clearAllFilters",value:function(){this._filters={}}},{key:"addSelector",value:function(i,o){i.selector&&(o?this._availableSelectors.unshift(i):this._availableSelectors.push(i))}},{key:"destroy",value:function(){this.eventManager.off(this.el,ee,this.downListener),this.eventManager.off(document,Ue,this.moveListener),this.eventManager.off(document,te,this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null,this.scrollTracker!=null&&document.removeEventListener("scroll",this.scrollTracker)}}]),t}(PO),VO=["input","textarea","select","button","option"],jO=VO.join(","),BO=function(){function e(n){R(this,e),f(this,"eventManager",void 0),f(this,"zoom",1),f(this,"css",{}),f(this,"inputFilterSelector",void 0),f(this,"positioningStrategy",void 0),f(this,"_positionSetter",void 0),f(this,"_positionGetter",void 0),f(this,"_sizeSetter",void 0),f(this,"_sizeGetter",void 0),n=n||{},this.inputFilterSelector=n.inputFilterSelector||jO,this.eventManager=new lg,this.zoom=n.zoom||1,this.positioningStrategy=n.positioningStrategy||wn.absolutePosition,this._positionGetter=dg.get(this.positioningStrategy),this._positionSetter=ug.get(this.positioningStrategy),this._sizeGetter=hg.get(this.positioningStrategy),this._sizeSetter=fg.get(this.positioningStrategy);var t=n.css||{};k(this.css,t)}return V(e,[{key:"getPosition",value:function(t){return this._positionGetter(t)}},{key:"setPosition",value:function(t,r){this._positionSetter(t,r)}},{key:"getSize",value:function(t){return this._sizeGetter(t)}},{key:"getZoom",value:function(){return this.zoom}},{key:"setZoom",value:function(t){this.zoom=t}},{key:"_prepareParams",value:function(t){t=t||{};var r={events:{}},i;for(i in t)r[i]=t[i];for(i=0;i<Mp.length;i++)r.events[Mp[i]]=t[Mp[i]]||RO;return r}},{key:"getInputFilterSelector",value:function(){return this.inputFilterSelector}},{key:"setInputFilterSelector",value:function(t){return this.inputFilterSelector=t,this}},{key:"draggable",value:function(t,r){if(t._katavorioDrag==null){var i=this._prepareParams(r),o=new LO(t,i,this);return kr(t,Ta.delegatedDraggable),t._katavorioDrag=o,o}else return t._katavorioDrag}},{key:"destroyDraggable",value:function(t){t._katavorioDrag&&(t._katavorioDrag.destroy(),delete t._katavorioDrag)}}]),e}(),wu="jtk-drag-selected",HO=function(){function e(n){R(this,e),this.instance=n,f(this,"_dragSelection",[]),f(this,"_dragSizes",new Map),f(this,"_dragElements",new Map),f(this,"_dragElementStartPositions",new Map),f(this,"_dragElementPositions",new Map),f(this,"__activeSet",void 0)}return V(e,[{key:"_activeSet",get:function(){return this.__activeSet==null?this._dragSelection:this.__activeSet}},{key:"length",get:function(){return this._dragSelection.length}},{key:"filterActiveSet",value:function(t){var r=this;this.__activeSet=[],P(this._dragSelection,function(i){t(i)&&r.__activeSet.push(i)})}},{key:"clear",value:function(){var t=this;this.reset(),P(this._dragSelection,function(r){return t.instance.removeClass(r.jel,wu)}),this._dragSelection.length=0}},{key:"reset",value:function(){this._dragElementStartPositions.clear(),this._dragElementPositions.clear(),this._dragSizes.clear(),this._dragElements.clear(),this.__activeSet=null}},{key:"initialisePositions",value:function(){var t=this;P(this._activeSet,function(r){var i=t.instance.viewport.getPosition(r.id),o={x:parseInt(""+r.jel.offsetLeft,10),y:parseInt(""+r.jel.offsetTop,10)};t._dragElementStartPositions.set(r.id,o),t._dragElementPositions.set(r.id,o),t._dragSizes.set(r.id,{w:i.w,h:i.h})})}},{key:"updatePositions",value:function(t,r,i){var o=this,s=t.x-r.x,a=t.y-r.y;P(this._activeSet,function(l){var c=o._dragElementStartPositions.get(l.id);if(c){var u=c.x+s,d=c.y+a,p=o._dragSizes.get(l.id),h={x:u,y:d,w:p.w,h:p.h};if(l.jel._jsPlumbParentGroup&&l.jel._jsPlumbParentGroup.constrain){var g={w:l.jel.parentNode.offsetWidth+l.jel.parentNode.scrollLeft,h:l.jel.parentNode.offsetHeight+l.jel.parentNode.scrollTop};h.x=Math.max(h.x,0),h.y=Math.max(h.y,0),h.x=Math.min(h.x,g.w-p.w),h.y=Math.min(h.y,g.h-p.h)}o._dragElementPositions.set(l.id,{x:u,y:d}),l.jel.style.left=h.x+"px",l.jel.style.top=h.y+"px",i(l.jel,l.id,p,h)}})}},{key:"each",value:function(t){var r=this;P(this._activeSet,function(i){var o=r._dragSizes.get(i.id),s=r._dragElementPositions.get(i.id),a=r._dragElementStartPositions.get(i.id);t(i.jel,i.id,s,o,a)})}},{key:"add",value:function(t,r){var i=t;r=r||this.instance.getId(i);var o=xi(this._dragSelection,function(s){return s.id===r});o===-1&&(this.instance.addClass(t,wu),this._dragSelection.push({id:r,jel:i}))}},{key:"remove",value:function(t){var r=this,i=t;this._dragSelection=this._dragSelection.filter(function(o){var s=o.jel!==i;return s||r.instance.removeClass(o.jel,wu),s})}},{key:"toggle",value:function(t){var r=t,i=xi(this._dragSelection,function(o){return o.jel===r});i!==-1?this.remove(r):this.add(t)}}]),e}(),GO="jtk-delegated-draggable",UO="jtk-draggable",$O="jtk-drag",WO="jtk-ghost-proxy",Ii="jtk-drag-active",zO="jtk-dragged",Mi="jtk-drag-hover",YO=function(){function e(n,t,r){var i=this;R(this,e),this.instance=n,this.dragSelection=t,f(this,"collicat",void 0),f(this,"drag",void 0),f(this,"_draggables",{}),f(this,"_dlist",[]),f(this,"_elementsWithEndpoints",{}),f(this,"_draggablesForElements",{}),f(this,"handlers",[]),f(this,"_trackScroll",void 0),f(this,"_filtersToAdd",[]),this.collicat=new BO({zoom:this.instance.currentZoom,css:{noSelect:this.instance.dragSelectClass,delegatedDraggable:GO,draggable:UO,drag:$O,selected:wu,active:Ii,hover:Mi,ghostProxy:WO}}),this.instance.bind(lb,function(o){i.collicat.setZoom(o)}),r=r||{},this._trackScroll=r.trackScroll!==!1}return V(e,[{key:"addHandler",value:function(t,r){var i=this,o=k({selector:t.selector},r||{});o.start=cu(o.start,function(l){return t.onStart(l)},!1),o.drag=cu(o.drag,function(l){return t.onDrag(l)}),o.stop=cu(o.stop,function(l){return t.onStop(l)});var s=(t.onBeforeStart||function(l){}).bind(t);if(o.beforeStart=cu(o.beforeStart,function(l){return s(l)}),o.dragInit=function(l,c){return t.onDragInit(l,c)},o.dragAbort=function(l){return t.onDragAbort(l)},t.useGhostProxy&&(o.useGhostProxy=t.useGhostProxy,o.makeGhostProxy=t.makeGhostProxy),o.constrainFunction==null&&o.containment!=null)switch(o.containment){case Du.notNegative:{o.constrainFunction=function(l,c,u,d){return{x:Math.max(0,Math.min(l.x)),y:Math.max(0,Math.min(l.y))}};break}case Du.parent:{var a=o.containmentPadding||5;o.constrainFunction=function(l,c,u,d){var p=l.x<0?0:l.x>u.w-a?u.w-a:l.x,h=l.y<0?0:l.y>u.h-a?u.h-a:l.y;return{x:p,y:h}};break}case Du.parentEnclosed:{o.constrainFunction=function(l,c,u,d){var p=l.x<0?0:l.x+d.w>u.w?u.w-d.w:l.x,h=l.y<0?0:l.y+d.h>u.h?u.h-d.h:l.y;return{x:p,y:h}};break}}this.drag==null?(o.trackScroll=this._trackScroll,this.drag=this.collicat.draggable(this.instance.getContainer(),o),P(this._filtersToAdd,function(l){return i.drag.addFilter(l[0],l[1])}),this.drag.on(Au,function(l){i.instance.revalidate(l)})):this.drag.addSelector(o),this.handlers.push({handler:t,options:o}),t.init(this.drag)}},{key:"addSelector",value:function(t,r){this.drag&&this.drag.addSelector(t,r)}},{key:"addFilter",value:function(t,r){this.drag==null?this._filtersToAdd.push([t,r===!0]):this.drag.addFilter(t,r)}},{key:"removeFilter",value:function(t){this.drag!=null&&this.drag.removeFilter(t)}},{key:"setFilters",value:function(t){var r=this;P(t,function(i){r.drag.addFilter(i[0],i[1])})}},{key:"reset",value:function(){var t=[];if(P(this.handlers,function(o){o.handler.reset()}),this.handlers.length=0,this.drag!=null){var r=this.drag._filters;for(var i in r)t.push([i,r[i][1]]);this.collicat.destroyDraggable(this.instance.getContainer())}return delete this.drag,t}},{key:"setOption",value:function(t,r){var i=Qp(this.handlers,function(o){return o.handler===t});i!=null&&k(i.options,r||{})}}]),e}();function qO(e,n){return De(n)?{id:n,active:!0}:{id:n.id,active:n.active}}function KO(e,n){var t=$E(e.members,function(r){return r.el===n});return t!==null?t.active===!0:!1}function ZO(e){for(var n=[],t=e._jsPlumbParentGroup;t!=null;)n.push(t.el),t=t.group;return n}var Up=function(){function e(n,t){R(this,e),this.instance=n,this._dragSelection=t,f(this,"selector","> "+ye+":not("+Br(Uu)+")"),f(this,"_dragOffset",null),f(this,"_groupLocations",[]),f(this,"_intersectingGroups",[]),f(this,"_currentDragParentGroup",null),f(this,"_dragGroupByElementIdMap",{}),f(this,"_dragGroupMap",{}),f(this,"_currentDragGroup",null),f(this,"_currentDragGroupOffsets",new Map),f(this,"_currentDragGroupSizes",new Map),f(this,"_currentDragGroupOriginalPositions",new Map),f(this,"_dragPayload",null),f(this,"drag",void 0),f(this,"originalPosition",void 0)}return V(e,[{key:"onDragInit",value:function(t){return null}},{key:"onDragAbort",value:function(t){return null}},{key:"getDropGroup",value:function(){var t=null;if(this._intersectingGroups.length>0){var r=this._intersectingGroups[0].groupLoc.group,i=this._intersectingGroups[0].intersectingElement,o=i._jsPlumbParentGroup;o!==r&&(o==null||!o.overrideDrop(i,r))&&(t=this._intersectingGroups[0])}return t}},{key:"onStop",value:function(t){var r,i=this,o=t.drag.getDragElement(),s=this.getDropGroup(),a=[];a.push({el:o,id:this.instance.getId(o),pos:t.finalPos,originalGroup:o._jsPlumbParentGroup,redrawResult:null,originalPos:t.originalPos,reverted:!1,dropGroup:s!=null?s.groupLoc.group:null});function l(g,y,v,_,b){var E=v.x,C=v.y;if(g._jsPlumbParentGroup&&g._jsPlumbParentGroup.constrain){var T={w:g.parentNode.offsetWidth+g.parentNode.scrollLeft,h:g.parentNode.offsetHeight+g.parentNode.scrollTop};E=Math.max(E,0),C=Math.max(C,0),E=Math.min(E,T.w-_.w),C=Math.min(C,T.h-_.h),v.x=E,v.y=C}a.push({el:g,id:y,pos:v,originalPos:b,originalGroup:g._jsPlumbParentGroup,redrawResult:null,reverted:!1,dropGroup:s?.groupLoc.group})}if(this._dragSelection.each(function(g,y,v,_,b){g!==t.el&&l(g,y,{x:v.x,y:v.y},_,b)}),(r=this._currentDragGroup)===null||r===void 0||r.members.forEach(function(g){if(g.el!==t.el){var y=i._currentDragGroupOffsets.get(g.elId),v=i._currentDragGroupSizes.get(g.elId),_={x:t.finalPos.x+y[0].x,y:t.finalPos.y+y[0].y};l(g.el,g.elId,_,v,i._currentDragGroupOriginalPositions.get(g.elId))}}),P(a,function(g){var y=g.originalGroup!=null,v=y&&X0(i.instance,g.el,g.pos),_={x:0,y:0};if(y&&!v){if(s==null){var b=i._pruneOrOrphan(g,!0,!0);b.pos!=null?g.pos=b.pos.pos:!b.pruned&&g.originalGroup.revert&&(g.pos=g.originalPos,g.reverted=!0)}}else y&&v&&(_=i._computeOffsetByParentGroup(g.originalGroup));s!=null&&!v?i.instance.groupManager.addToGroup(s.groupLoc.group,!1,g.el):g.dropGroup=null,g.reverted&&i.instance.setPosition(g.el,g.pos),g.redrawResult=i.instance.setElementPosition(g.el,g.pos.x+_.x,g.pos.y+_.y),i.instance.removeClass(g.el,zO),i.instance.select({source:g.el}).removeClass(i.instance.elementDraggingClass+" "+i.instance.sourceElementDraggingClass,!0),i.instance.select({target:g.el}).removeClass(i.instance.elementDraggingClass+" "+i.instance.targetElementDraggingClass,!0)}),a[0].originalGroup!=null){var c=o._jsPlumbParentGroup;if(c!==a[0].originalGroup){var u=t.drag.getDragElement(!0);if(a[0].originalGroup.ghost){var d=this.instance.getPosition(this.instance.getGroupContentArea(c)),p=this.instance.getPosition(this.instance.getGroupContentArea(a[0].originalGroup)),h={x:p.x+t.pos.x-d.x,y:p.y+t.pos.y-d.y};u.style.left=h.x+"px",u.style.top=h.y+"px",this.instance.revalidate(u)}}}this.instance.fire(wx,{elements:a,e:t.e,el:o,payload:this._dragPayload}),this._cleanup()}},{key:"_cleanup",value:function(){var t=this;P(this._groupLocations,function(r){t.instance.removeClass(r.el,Ii),t.instance.removeClass(r.el,Mi)}),this._currentDragParentGroup=null,this._groupLocations.length=0,this.instance.hoverSuspended=!1,this._dragOffset=null,this._dragSelection.reset(),this._dragPayload=null,this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroupOriginalPositions.clear(),this._currentDragGroup=null}},{key:"reset",value:function(){}},{key:"init",value:function(t){this.drag=t}},{key:"onDrag",value:function(t){var r=this,i=t.drag.getDragElement(),o=this.instance.getId(i),s=t.pos,a=this.instance.viewport.getPosition(o),l={x:s.x,y:s.y};this._intersectingGroups.length=0,this._dragOffset!=null&&(l.x+=this._dragOffset.x,l.y+=this._dragOffset.y);var c=function(p,h,g){if(g){var y=new Set;P(r._groupLocations,function(v){!y.has(v.group.id)&&_b(h,v.r)?(v.group!==r._currentDragParentGroup&&r.instance.addClass(v.el,Mi),r._intersectingGroups.push({groupLoc:v,intersectingElement:t.drag.getDragElement(!0),d:0}),P(r.instance.groupManager.getAncestors(v.group),function(_){return y.add(_.id)})):r.instance.removeClass(v.el,Mi)})}r.instance.setElementPosition(p,h.x,h.y),r.instance.fire(Dx,{el:p,e:t.e,pos:{x:h.x,y:h.y},originalPosition:r.originalPosition,payload:r._dragPayload})},u={x:l.x,y:l.y,w:a.w,h:a.h};c(i,u,!0),this._dragSelection.updatePositions(s,this.originalPosition,function(d,p,h,g){c(d,g,!1)}),this._currentDragGroupOffsets.forEach(function(d,p){var h=r._currentDragGroupSizes.get(p),g={x:u.x+d[0].x,y:u.y+d[0].y,w:h.w,h:h.h};d[1].style.left=g.x+"px",d[1].style.top=g.y+"px",c(d[1],g,!1)})}},{key:"_computeOffsetByParentGroup",value:function(t){var r=this.instance.getPosition(t.el),i=t.contentArea;if(i!==t.el){var o=this.instance.getPosition(i);r.x+=o.x,r.y+=o.y}if(t.el._jsPlumbParentGroup){var s=this._computeOffsetByParentGroup(t.el._jsPlumbParentGroup);r.x+=s.x,r.y+=s.y}return r}},{key:"onStart",value:function(t){var r=this,i=t.drag.getDragElement(),o=this.instance.getPosition(i);this.originalPosition={x:t.pos.x,y:t.pos.y},i._jsPlumbParentGroup&&(this._dragOffset=this._computeOffsetByParentGroup(i._jsPlumbParentGroup),this._currentDragParentGroup=i._jsPlumbParentGroup);var s=!0,a=i.getAttribute(_u);if((this.instance.elementsDraggable===!1||a!=null&&a!==Ko)&&(s=!1),s){this._groupLocations.length=0,this._intersectingGroups.length=0,this.instance.hoverSuspended=!0;var l=t.drag.getDragElement(!0),c=l.querySelectorAll(ye),u=ZO(l),d=[];Array.prototype.push.apply(d,c),Array.prototype.push.apply(d,u),this._dragSelection.filterActiveSet(function(y){return d.indexOf(y.jel)===-1}),this._dragSelection.initialisePositions();var p=function(v,_,b){if(!v._isJsPlumbGroup||r.instance.allowNestedGroups){var E=!v._jsPlumbParentGroup,C=E||v._jsPlumbParentGroup.dropOverride!==!0,T=!E&&(v._jsPlumbParentGroup.ghost||v._jsPlumbParentGroup.constrain!==!0);(E||C&&T)&&(P(r.instance.groupManager.getGroups(),function(I){var S=v._jsPlumbGroup;if(I.droppable!==!1&&I.enabled!==!1&&v._jsPlumbGroup!==I&&!r.instance.groupManager.isDescendant(I,S)){var D=I.el,N=r.instance.getId(D),O=r.instance.viewport.getPosition(N),Y={x:O.x,y:O.y,w:O.w,h:O.h},M={el:D,r:Y,group:I};r._groupLocations.push(M),I!==r._currentDragParentGroup&&r.instance.addClass(D,Ii)}}),r._groupLocations.sort(function(I,S){return r.instance.groupManager.isDescendant(I.group,S.group)?-1:r.instance.groupManager.isAncestor(S.group,I.group)?1:0}))}return r.instance.select({source:v}).addClass(r.instance.elementDraggingClass+" "+r.instance.sourceElementDraggingClass,!0),r.instance.select({target:v}).addClass(r.instance.elementDraggingClass+" "+r.instance.targetElementDraggingClass,!0),r.instance.fire(Tx,{el:v,e:t.e,originalPosition:r.originalPosition,pos:r.originalPosition,dragGroup:_,dragGroupMemberSpec:b})},h=this.instance.getId(i);this._currentDragGroup=this._dragGroupByElementIdMap[h],this._currentDragGroup&&!KO(this._currentDragGroup,i)&&(this._currentDragGroup=null);var g=p(i);if(g===!1)return this._cleanup(),!1;this._dragPayload=g,this._currentDragGroup!=null&&(this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroup.members.forEach(function(y){var v=r.instance.viewport.getPosition(y.elId);r._currentDragGroupOffsets.set(y.elId,[{x:v.x-o.x,y:v.y-o.y},y.el]),r._currentDragGroupSizes.set(y.elId,v),r._currentDragGroupOriginalPositions.set(y.elId,{x:v.x,y:v.y}),p(y.el,r._currentDragGroup,y)}))}return s}},{key:"addToDragGroup",value:function(t){var r=this,i=qO(this.instance,t),o=this._dragGroupMap[i.id];o==null&&(o={id:i.id,members:new Set},this._dragGroupMap[i.id]=o);for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];this.removeFromDragGroup.apply(this,a),P(a,function(c){var u=r.instance.getId(c);o.members.add({elId:u,el:c,active:i.active}),r._dragGroupByElementIdMap[u]=o})}},{key:"removeFromDragGroup",value:function(){for(var t=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];P(i,function(s){var a=t.instance.getId(s),l=t._dragGroupByElementIdMap[a];if(l!=null){var c=new Set;l.members.forEach(function(u){u.el!==s&&c.add(u)}),l.members=c,delete t._dragGroupByElementIdMap[a]}})}},{key:"setDragGroupState",value:function(t){for(var r=this,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var a=o.map(function(l){return r.instance.getId(l)});P(a,function(l){var c=r._dragGroupByElementIdMap[l];if(c!=null){var u=$E(c.members,function(d){return d.elId===l});u!=null&&(u.active=t)}})}},{key:"clearDragGroup",value:function(t){var r=this,i=this._dragGroupMap[t];i!=null&&(i.members.forEach(function(o){delete r._dragGroupByElementIdMap[o.elId]}),i.members.clear())}},{key:"_pruneOrOrphan",value:function(t,r,i){var o=t.el,s={pruned:!1,pos:null};if(i||!X0(this.instance,o,t.pos)){var a=o._jsPlumbParentGroup;a.prune?(o._isJsPlumbGroup?this.instance.removeGroup(o._jsPlumbGroup):a.remove(t.el,!0),s.pruned=!0):a.orphan&&(s.pos=this.instance.groupManager.orphan(t.el,r),o._isJsPlumbGroup?a.removeGroup(o._jsPlumbGroup):a.remove(t.el))}return s}}]),e}(),Q0={},J0={},eE={},Ai={get:function(n,t,r){var i=Q0[t];if(i)return new i(n,r);throw{message:"jsPlumb: unknown endpoint type '"+t+"'"}},clone:function(n){var t=eE[n.type];return Ai.get(n.endpoint,n.type,t.getParams(n))},compute:function(n,t,r,i){var o=J0[n.type];if(o!=null)return o(n,t,r,i);Le("jsPlumb: cannot find endpoint calculator for endpoint of type ",n.type)},registerHandler:function(n){eE[n.type]=n,Q0[n.type]=n.cls,J0[n.type]=n.compute}},ls=function(){function e(n,t){R(this,e),this.endpoint=n,f(this,"typeId",void 0),f(this,"x",void 0),f(this,"y",void 0),f(this,"w",void 0),f(this,"h",void 0),f(this,"computedValue",void 0),f(this,"bounds",xu()),f(this,"classes",[]),f(this,"instance",void 0),f(this,"type",void 0),t=t||{},this.instance=n.instance,n.cssClass&&this.classes.push(n.cssClass),t.cssClass&&this.classes.push(t.cssClass)}return V(e,[{key:"addClass",value:function(t){this.classes.push(t),this.instance.addEndpointClass(this.endpoint,t)}},{key:"removeClass",value:function(t){this.classes=this.classes.filter(function(r){return r!==t}),this.instance.removeEndpointClass(this.endpoint,t)}},{key:"compute",value:function(t,r,i){this.computedValue=Ai.compute(this,t,r,i),this.bounds.xmin=this.x,this.bounds.ymin=this.y,this.bounds.xmax=this.x+this.w,this.bounds.ymax=this.y+this.h}},{key:"setVisible",value:function(t){this.instance.setEndpointVisible(this.endpoint,t)}}]),e}(),jo,Bo,Ho,Va=function(e){return e.top="top",e.left="left",e.right="right",e.bottom="bottom",e}(Va||{}),Te=Va.top,at=Va.left,et=Va.right,yt=Va.bottom,XO=[at,et],QO=[Te,yt],JO=function(){function e(n,t,r){R(this,e),this.instance=n,this.element=t,f(this,"isFloating",!0),f(this,"isContinuous",void 0),f(this,"isDynamic",void 0),f(this,"locations",[]),f(this,"currentLocation",0),f(this,"locked",!1),f(this,"cssClass",""),f(this,"timestamp",null),f(this,"type","Floating"),f(this,"id",Ve()),f(this,"orientation",[0,0]),f(this,"size",void 0),this.size=n.viewport.getPosition(r),this.locations.push({x:.5,y:.5,ox:this.orientation[0],oy:this.orientation[1],offx:0,offy:0,iox:this.orientation[0],ioy:this.orientation[1],cls:""})}return V(e,[{key:"_updateOrientationInRouter",value:function(){this.instance.router.setAnchorOrientation(this,[this.locations[0].ox,this.locations[0].oy])}},{key:"over",value:function(t){this.orientation=this.instance.router.getEndpointOrientation(t),this.locations[0].ox=this.orientation[0],this.locations[0].oy=this.orientation[1],this._updateOrientationInRouter()}},{key:"out",value:function(){this.orientation=null,this.locations[0].ox=this.locations[0].iox,this.locations[0].oy=this.locations[0].ioy,this._updateOrientationInRouter()}}]),e}(),tE=(jo={},f(jo,Te,yt),f(jo,et,at),f(jo,at,et),f(jo,yt,Te),jo),Tb=(Bo={},f(Bo,Te,et),f(Bo,et,yt),f(Bo,at,Te),f(Bo,yt,at),Bo),Sb=(Ho={},f(Ho,Te,at),f(Ho,et,Te),f(Ho,at,yt),f(Ho,yt,et),Ho);function eN(e){return e.faces.length===0?Te:e.faces[0]}function Sa(e,n){return e.faces.indexOf(n)!==-1}function tN(e,n){return(e.clockwise?Tb:Sb)[n]}function nN(e,n){return(e.clockwise?Sb:Tb)[n]}function nE(e,n){return e.lockedAxis==null?e.lockedFace==null?Sa(e,n)===!0:e.lockedFace===n:e.lockedAxis.indexOf(n)!==-1}function iN(e,n){if(Sa(e,n))return n;if(Sa(e,tE[n]))return tE[n];var t=tN(e,n);if(Sa(e,t))return t;var r=nN(e,n);return Sa(e,r)?r:n}var iE={x:.5,y:0,ox:0,oy:-1,offx:0,offy:0},rE={x:.5,y:1,ox:0,oy:1,offx:0,offy:0},oE={x:0,y:.5,ox:-1,oy:0,offx:0,offy:0},sE={x:1,y:.5,ox:1,oy:0,offx:0,offy:0},rN={x:0,y:0,ox:0,oy:-1,offx:0,offy:0},oN={x:1,y:0,ox:1,oy:-1,offx:0,offy:0},sN={x:0,y:1,ox:0,oy:1,offx:0,offy:0},aN={x:1,y:1,ox:0,oy:1,offx:0,offy:0},lN={x:.5,y:.5,ox:0,oy:0,offx:0,offy:0},Ib={Top:[iE],Bottom:[rE],Left:[oE],Right:[sE],TopLeft:[rN],TopRight:[oN],BottomLeft:[sN],BottomRight:[aN],Center:[lN],AutoDefault:[iE,oE,rE,sE]},cN={Continuous:{faces:[Te,at,yt,et]},ContinuousTop:{faces:[Te]},ContinuousRight:{faces:[et]},ContinuousBottom:{faces:[yt]},ContinuousLeft:{faces:[at]},ContinuousLeftRight:{faces:[at,et]},ContinuousTopBottom:{faces:[Te,yt]}};function aE(e,n){if(n=n||{},e===Xn.Perimeter)return vN(n);var t=Ib[e];if(t!=null)return Pu(e,zE(t,function(r){return k({iox:r.ox,ioy:r.oy},r)}),n);if(t=cN[e],t!=null)return fN(e,t.faces,n);throw{message:"jsPlumb: unknown anchor type '"+e+"'"}}function Pu(e,n,t){return{type:e,locations:n,currentLocation:0,locked:!1,id:Ve(),isFloating:!1,isContinuous:!1,isDynamic:n.length>1,timestamp:null,cssClass:t.cssClass||""}}function uN(e,n,t){return new JO(e,n,t)}var dN="currentFace";function fN(e,n,t){var r={type:e,locations:[],currentLocation:0,locked:!1,id:Ve(),cssClass:t.cssClass||"",isFloating:!1,isContinuous:!0,timestamp:null,faces:t.faces||n,lockedFace:null,lockedAxis:null,clockwise:t.clockwise!==!1,__currentFace:null};return Object.defineProperty(r,dN,{get:function(){return this.__currentFace},set:function(o){this.__currentFace=iN(this,o)}}),r}function lE(e){return e.length<7&&e.every(kp)||e.length===7&&e.slice(0,5).every(kp)&&De(e[6])}function Ia(e){if(De(e))return aE(e,null);if(Array.isArray(e))if(lE(e)){var n=e;return Pu(null,[{x:n[0],y:n[1],ox:n[2],oy:n[3],offx:n[4]==null?0:n[4],offy:n[5]==null?0:n[5],iox:n[2],ioy:n[3],cls:n[6]||""}],{cssClass:n[6]||""})}else{var t=zE(e,function(i){if(De(i)){var o=Ib[i];return o!=null?k({iox:o[0].ox,ioy:o[0].oy,cls:""},o[0]):null}else if(lE(i))return{x:i[0],y:i[1],ox:i[2],oy:i[3],offx:i[4]==null?0:i[4],offy:i[5]==null?0:i[5],iox:i[2],ioy:i[3],cls:i[6]||""}}).filter(function(i){return i!=null});return Pu("Dynamic",t,{})}else{var r=e;return aE(r.type,r.options)}}function Mb(e){for(var n=.5,t=Math.PI*2/e,r=[],i=0,o=0;o<e;o++){var s=n+n*Math.sin(i),a=n+n*Math.cos(i);r.push({x:s,y:a,ox:0,oy:0,offx:0,offy:0,iox:0,ioy:0,cls:""}),i+=t}return r}function hN(e,n){for(var t=n/e.length,r=[],i=function(a,l,c,u,d,p,h){t=n*d;for(var g=(c-a)/t,y=(u-l)/t,v=0;v<t;v++)r.push({x:a+g*v,y:l+y*v,ox:p??0,oy:h??0,offx:0,offy:0,iox:0,ioy:0,cls:""})},o=0;o<e.length;o++)i.apply(null,e[o]);return r}function pg(e,n){for(var t=[],r=0;r<e.length;r++)t.push([e[r][0],e[r][1],e[r][2],e[r][3],1/e.length,e[r][4],e[r][5]]);return hN(t,n)}function Ab(e){return pg([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]],e)}function pN(e){return pg([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]],e)}function gN(e){return pg([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]],e)}function mN(e,n){for(var t=[],r=n/180*Math.PI,i=0;i<e.length;i++){var o=e[i].x-.5,s=e[i].y-.5;t.push({x:.5+(o*Math.cos(r)-s*Math.sin(r)),y:.5+(o*Math.sin(r)+s*Math.cos(r)),ox:e[i].ox,oy:e[i].oy,offx:0,offy:0,iox:0,ioy:0,cls:""})}return t}var Oi=new Map;Oi.set(Ur.Circle,Mb);Oi.set(Ur.Ellipse,Mb);Oi.set(Ur.Rectangle,Ab);Oi.set(Ur.Square,Ab);Oi.set(Ur.Diamond,pN);Oi.set(Ur.Triangle,gN);function vN(e){e=e||{};var n=e.anchorCount||60,t=e.shape;if(!t)throw new Error("no shape supplied to Perimeter Anchor type");if(!Oi.has(t))throw new Error("Shape ["+t+"] is unknown by Perimeter Anchor type");var r=Oi.get(t)(n);e.rotation&&(r=mN(r,e.rotation));var i=Pu(Xn.Perimeter,r,e),o=k(i,{shape:t});return o}var cE=function(){function e(n,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;R(this,e),this.selector=n,this.def=t,this.exclude=r,f(this,"id",void 0),f(this,"redrop",void 0),this.id=Ve(),this.redrop=t.def.redrop||xb}return V(e,[{key:"setEnabled",value:function(t){this.def.enabled=t}},{key:"isEnabled",value:function(){return this.def.enabled!==!1}}]),e}(),xb="strict",yN="any",_N="anySource",EN="anyTarget",bN="anySourceOrTarget";function CN(e,n,t,r,i,o){var s=uN(o,r,i),a={paintStyle:e.getPaintStyle(),preparedAnchor:s,element:r,scope:e.scope,cssClass:[ng,e.cssClass].join(" ")};n!=null&&(YE(n,ls)?a.existingEndpoint=n:a.endpoint=n);var l=o._internal_newEndpoint(a);return o._paintEndpoint(l,{}),l}function DN(e,n,t,r,i){for(var o=e.target||e.srcElement,s=!1,a=r.getSelector(n,t),l=0;l<a.length;l++)if(a[l]===o){s=!0;break}return i?!s:s}var wN=Br(Ii,Mi),uE="sourceSelectorEndpoint",dE=function(){function e(n){R(this,e),this.instance=n,f(this,"jpc",void 0),f(this,"existingJpc",void 0),f(this,"_originalAnchorSpec",void 0),f(this,"ep",void 0),f(this,"endpointRepresentation",void 0),f(this,"canvasElement",void 0),f(this,"_activeDefinition",void 0),f(this,"placeholderInfo",{id:null,element:null}),f(this,"floatingIndex",void 0),f(this,"floatingId",void 0),f(this,"floatingElement",void 0),f(this,"floatingEndpoint",void 0),f(this,"floatingAnchor",void 0),f(this,"_stopped",void 0),f(this,"inPlaceCopy",void 0),f(this,"endpointDropTargets",[]),f(this,"currentDropTarget",null),f(this,"payload",void 0),f(this,"floatingConnections",{}),f(this,"_forceReattach",void 0),f(this,"_forceDetach",void 0),f(this,"mousedownHandler",void 0),f(this,"mouseupHandler",void 0),f(this,"selector",Br(Qo));var t=n.getContainer();this.mousedownHandler=this._mousedownHandler.bind(this),this.mouseupHandler=this._mouseupHandler.bind(this),n.on(t,ee,ye,this.mousedownHandler),n.on(t,te,[ye,Br(Qo)].join(","),this.mouseupHandler)}return V(e,[{key:"_resolveDragParent",value:function(t,r){var i=this.instance.getContainer(),o=Wn(r,ye,i,!0);if(t.parentSelector!=null){var s=Wn(r,t.parentSelector,i,!0);return s!=null&&(o=Wn(s.parentNode,ye,i,!1)),s||o}else return o}},{key:"_mousedownHandler",value:function(t){var r,i;if(!(t.which===3||t.button===2)){var o=t.target||t.srcElement;if(i=this._getSourceDefinition(t),!(i!=null&&(r=this._resolveDragParent(i.def.def,o),r==null||r.getAttribute(fu)===Ko))&&i){var s=t.currentTarget,a;if(o.getAttribute(fu)!==Ko){if(Oa(t),this._activeDefinition=i,a=i.def.def,a.canAcceptNewConnection!=null&&!a.canAcceptNewConnection(r,t))return!1;var l=IE(t,r,this.instance.currentZoom),c={element:r};if(k(c,a),c.isTemporarySource=!0,a.scope)c.scope=a.scope;else{var u=o.getAttribute(Tp);u!=null&&(c.scope=u)}var d=a.parameterExtractor?a.parameterExtractor(r,o,t):{};if(c=Su(c,d),c.maxConnections!=null&&c.maxConnections>=0){var p=this.instance.select({source:r}).length;if(p>=c.maxConnections)return Oa(t),a.onMaxConnections&&a.onMaxConnections({element:r,maxConnections:c.maxConnections},t),t.stopImmediatePropagation&&t.stopImmediatePropagation(),!1}if(a.anchorPositionFinder){var h=a.anchorPositionFinder(r,l,a,t);h!=null&&(c.anchor=h)}this._originalAnchorSpec=c.anchor||(this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors[0]:this.instance.defaults.anchor);var g=this.instance.router.prepareAnchor(this._originalAnchorSpec),y=[l.x,l.y,0,0];if(g.locations.length>0)y[2]=g.locations[0].ox,y[3]=g.locations[0].oy;else if(g.isContinuous){var v=l.x<.5?l.x:1-l.x,_=l.y<.5?l.y:1-l.y;y[2]=v<_?l.x<.5?-1:1:0,y[3]=_<v?l.y<.5?-1:1:0}c.anchor=y,c.deleteOnEmpty=!0,this.ep=this.instance._internal_newEndpoint(c);var b={};if(a.extract){for(var E in a.extract){var C=o.getAttribute(E);C&&(b[a.extract[E]]=C)}this.ep.mergeParameters(b)}if(c.uniqueEndpoint){var T=this.ep.elementId,I=this.instance.getManagedData(T,uE,i.id);I==null?(this.instance.setManagedData(T,uE,i.id,this.ep),this.ep.deleteOnEmpty=!1):this.ep.finalEndpoint=I}s._jsPlumbOrphanedEndpoints=s._jsPlumbOrphanedEndpoints||[],s._jsPlumbOrphanedEndpoints.push(this.ep),this.instance.trigger(this.ep.endpoint.canvas,ee,t,b)}}}}},{key:"_mouseupHandler",value:function(t){var r=t.currentTarget||t.srcElement;r._jsPlumbOrphanedEndpoints&&(MA(r._jsPlumbOrphanedEndpoints,this.instance._maybePruneEndpoint.bind(this.instance)),r._jsPlumbOrphanedEndpoints.length=0),this._activeDefinition=null}},{key:"onDragInit",value:function(t){var r=uu(t,this.instance),i=_a(t,this.instance);return this._makeDraggablePlaceholder(r,i),this.placeholderInfo.element.jtk=t.jtk,this.placeholderInfo.element}},{key:"onDragAbort",value:function(t){this._cleanupDraggablePlaceholder()}},{key:"_makeDraggablePlaceholder",value:function(t,r){this.placeholderInfo=this.placeholderInfo||{};var i=KE(hb,{position:"absolute"});this.instance._appendElementToContainer(i);var o=this.instance.getId(i);return this.instance.setPosition(i,t),i.style.width=r.w+"px",i.style.height=r.h+"px",this.instance.manage(i),this.placeholderInfo.id=o,this.placeholderInfo.element=i,i}},{key:"_cleanupDraggablePlaceholder",value:function(){this.placeholderInfo.element&&(this.instance.unmanage(this.placeholderInfo.element,!0),delete this.placeholderInfo.element,delete this.placeholderInfo.id)}},{key:"reset",value:function(){var t=this.instance.getContainer();this.instance.off(t,te,this.mouseupHandler),this.instance.off(t,ee,this.mousedownHandler)}},{key:"init",value:function(t){}},{key:"startNewConnectionDrag",value:function(t,r){this.jpc=this.instance._newConnection({sourceEndpoint:this.ep,targetEndpoint:this.floatingEndpoint,source:this.ep.element,target:this.placeholderInfo.element,paintStyle:this.ep.connectorStyle,hoverPaintStyle:this.ep.connectorHoverStyle,connector:this.ep.connector,overlays:this.ep.connectorOverlays,type:this.ep.edgeType,cssClass:this.ep.connectorClass,hoverClass:this.ep.connectorHoverClass,scope:t,data:r}),this.jpc.pending=!0,this.jpc.addClass(this.instance.draggingClass),this.ep.addClass(this.instance.draggingClass),this.instance.fire(W0,this.jpc)}},{key:"startExistingConnectionDrag",value:function(){this.existingJpc=!0,this.instance.setHover(this.jpc,!1);var t=this.jpc.endpoints[0].id===this.ep.id?0:1;this.ep.detachFromConnection(this.jpc,null,!0),this.floatingEndpoint.addConnection(this.jpc),this.instance.fire(W0,this.jpc),this.instance.sourceOrTargetChanged(this.jpc.endpoints[t].elementId,this.placeholderInfo.id,this.jpc,this.placeholderInfo.element,t),this.jpc.suspendedEndpoint=this.jpc.endpoints[t],this.jpc.suspendedElement=this.jpc.endpoints[t].element,this.jpc.suspendedElementId=this.jpc.endpoints[t].elementId,this.jpc.suspendedElementType=t===0?Lp:XE,this.instance.setHover(this.jpc.suspendedEndpoint,!1),this.floatingEndpoint.referenceEndpoint=this.jpc.suspendedEndpoint,this.floatingEndpoint.mergeParameters(this.jpc.suspendedEndpoint.parameters),this.jpc.endpoints[t]=this.floatingEndpoint,this.jpc.addClass(this.instance.draggingClass),this.floatingId=this.placeholderInfo.id,this.floatingIndex=t,this.instance._refreshEndpoint(this.ep)}},{key:"_shouldStartDrag",value:function(){var t=!0;this.ep.enabled||(t=!1),this.jpc==null&&!this.ep.isSource&&!this.ep.isTemporarySource&&(t=!1),this.ep.isSource&&this.ep.isFull()&&!(this.jpc!=null&&this.ep.dragAllowedWhenFull)&&(t=!1),this.jpc!=null&&!this.jpc.isDetachable(this.ep)&&(this.ep.isFull()?t=!1:this.jpc=null);var r={},i=this.instance.checkCondition(this.jpc==null?ax:lx,{endpoint:this.ep,source:this.ep.element,sourceId:this.ep.elementId,connection:this.jpc});return i===!1?t=!1:Xo(i)==="object"?(r=i,k(r,this.payload||{})):r=this.payload||{},[t,r]}},{key:"_createFloatingEndpoint",value:function(t){var r=this.ep.endpoint;if(this.ep.edgeType!=null){var i=this.instance._deriveEndpointAndAnchorSpec(this.ep.edgeType);r=i.endpoints[1]}this.floatingEndpoint=CN(this.ep,r,t,this.placeholderInfo.element,this.placeholderInfo.id,this.instance),this.floatingAnchor=this.floatingEndpoint._anchor,this.floatingEndpoint.deleteOnEmpty=!0,this.floatingElement=this.floatingEndpoint.endpoint.canvas,this.floatingId=this.instance.getId(this.floatingElement)}},{key:"_populateTargets",value:function(t,r){var i=this,o=this.jpc&&this.jpc.endpoints[0]===this.ep,s,a=this.instance.getContainer().querySelectorAll([".",Qo,"[",JE,this.ep.scope,"]:not(.",ng,")"].join(""));if(P(a,function(d){if((i.jpc!=null||d!==t)&&d!==i.floatingElement&&(i.jpc!=null||!d.jtk.endpoint.isFull())&&(o&&d.jtk.endpoint.isSource||!o&&d.jtk.endpoint.isTarget)){var p=uu(d,i.instance),h=_a(d,i.instance);s={x:p.x,y:p.y,w:h.w,h:h.h},i.endpointDropTargets.push({el:d,targetEl:d,r:s,endpoint:d.jtk.endpoint,def:null}),i.instance.addClass(d,Ii)}}),o){var l=Qp(this.instance.sourceSelectors,function(d){return d.isEnabled()&&(d.def.def.scope==null||d.def.def.scope===i.ep.scope)});if(l!=null){var c=this._findTargetZones(l);P(c,function(d){if(d.getAttribute(fu)!==Ko){var p=d.getAttribute(Tp);if(p!=null&&p!==i.ep.scope)return;var h={r:null,el:d};h.targetEl=Wn(d,ye,i.instance.getContainer(),!0);var g=uu(h.el,i.instance),y=_a(h.el,i.instance);h.r={x:g.x,y:g.y,w:y.w,h:y.h},l.def.def.rank!=null&&(h.rank=l.def.def.rank),h.def=l.def,i.endpointDropTargets.push(h),i.instance.addClass(h.targetEl,Ii)}})}}else{var u=SA(this.instance.targetSelectors,function(d){return d.isEnabled()});u.forEach(function(d){var p=i._findTargetZones(d);P(p,function(h){if(h.getAttribute(fu)!==Ko){var g=h.getAttribute(Tp);if(g!=null&&g!==i.ep.scope)return;var y={r:null,el:h};if(d.def.def.parentSelector!=null&&(y.targetEl=Wn(h,d.def.def.parentSelector,i.instance.getContainer(),!0)),y.targetEl==null&&(y.targetEl=Wn(h,ye,i.instance.getContainer(),!0)),(d.def.def.allowLoopback===!1||i._activeDefinition&&i._activeDefinition.def.def.allowLoopback===!1)&&y.targetEl===i.ep.element||d.def.def.canAcceptNewConnection!=null&&!d.def.def.canAcceptNewConnection(y.targetEl,r))return;var v=d.def.def.maxConnections;if(v!=null&&v!==-1&&i.instance.select({target:y.targetEl}).length>=v)return;var _=uu(h,i.instance),b=_a(h,i.instance);y.r={x:_.x,y:_.y,w:b.w,h:b.h},y.def=d.def,d.def.def.rank!=null&&(y.rank=d.def.def.rank),i.endpointDropTargets.push(y),i.instance.addClass(y.targetEl,Ii)}})})}this.endpointDropTargets.sort(function(d,p){if(d.targetEl._isJsPlumbGroup&&!p.targetEl._isJsPlumbGroup)return 1;if(!d.targetEl._isJsPlumbGroup&&p.targetEl._isJsPlumbGroup)return-1;if(d.targetEl._isJsPlumbGroup&&p.targetEl._isJsPlumbGroup){if(i.instance.groupManager.isAncestor(d.targetEl._jsPlumbGroup,p.targetEl._jsPlumbGroup))return-1;if(i.instance.groupManager.isAncestor(p.targetEl._jsPlumbGroup,d.targetEl._jsPlumbGroup))return 1}else if(d.rank!=null&&p.rank!=null){if(d.rank>p.rank)return-1;if(d.rank<p.rank)return 1}else return 0})}},{key:"_findTargetZones",value:function(t){var r;if(t.redrop===yN){var i=this.instance.targetSelectors.map(function(s){return s.selector});i.push.apply(i,es(this.instance.sourceSelectors.map(function(s){return s.selector}))),i.push(ye),r=i.join(",")}else if(t.redrop===xb)r=t.selector;else if(t.redrop===_N)r=this.instance.sourceSelectors.map(function(s){return s.selector}).join(",");else if(t.redrop===EN)r=this.instance.targetSelectors.map(function(s){return s.selector}).join(",");else if(t.redrop===bN){var o=this.instance.targetSelectors.map(function(s){return s.selector});o.push.apply(o,es(this.instance.sourceSelectors.map(function(s){return s.selector}))),r=o.join(",")}return this.instance.getContainer().querySelectorAll(r)}},{key:"onStart",value:function(t){this.endpointDropTargets.length=0,this.currentDropTarget=null,this._stopped=!1;var r=t.drag.getDragElement();if(this.ep=r.jtk.endpoint,!this.ep)return!1;this.endpointRepresentation=this.ep.endpoint,this.canvasElement=this.endpointRepresentation.canvas,this.jpc=this.ep.connectorSelector();var i=this._shouldStartDrag(),o=yu(i,2),s=o[0],a=o[1];if(s===!1)return this._stopped=!0,!1;this.instance.setHover(this.ep,!1),this.instance.isConnectionBeingDragged=!0,this.jpc&&!this.ep.isFull()&&this.ep.isSource&&(this.jpc=null),this._createFloatingEndpoint(this.canvasElement),this._populateTargets(this.canvasElement,t.e),this.jpc==null?this.startNewConnectionDrag(this.ep.scope,a):this.startExistingConnectionDrag(),this._registerFloatingConnection(this.placeholderInfo,this.jpc),this.instance.currentlyDragging=!0}},{key:"onBeforeStart",value:function(t){this.payload=t.e.payload||{}}},{key:"onDrag",value:function(t){if(this._stopped)return!0;if(this.placeholderInfo.element){var r=_a(this.floatingElement,this.instance);this.instance.setElementPosition(this.placeholderInfo.element,t.pos.x,t.pos.y);for(var i={x:t.pos.x,y:t.pos.y,w:r.w,h:r.h},o,s,a,l=0;l<this.endpointDropTargets.length;l++)if(_b(i,this.endpointDropTargets[l].r)){o=this.endpointDropTargets[l];break}if(o!==this.currentDropTarget&&this.currentDropTarget!=null&&(s=this._getFloatingAnchorIndex(),this.instance.removeClass(this.currentDropTarget.el,Mi),this.currentDropTarget.endpoint&&(this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.out()),o!=null&&(this.instance.addClass(o.el,Mi),s=this._getFloatingAnchorIndex(),o.endpoint!=null))if(a=o.endpoint.isSource&&s===0||o.endpoint.isTarget&&s!==0||this.jpc.suspendedEndpoint&&o.endpoint.referenceEndpoint&&o.endpoint.referenceEndpoint.id===this.jpc.suspendedEndpoint.id,a){var c=this.instance.checkCondition(HA,{sourceEndpoint:this.jpc.endpoints[s],targetEndpoint:o.endpoint.endpoint,connection:this.jpc});c?(o.endpoint.endpoint.addClass(this.instance.endpointDropAllowedClass),o.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)):(o.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),o.endpoint.endpoint.addClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.over(o.endpoint),this.instance._paintConnection(this.jpc)}else o=null;this.currentDropTarget=o}}},{key:"_maybeCleanup",value:function(t){t._mtNew&&t.connections.length===0?this.instance.deleteEndpoint(t):delete t._mtNew}},{key:"_reattachOrDiscard",value:function(t){var r=this.jpc.suspendedEndpoint!=null,i=this._getFloatingAnchorIndex();return r&&this._shouldReattach()?(i===0?(this.jpc.source=this.jpc.suspendedElement,this.jpc.sourceId=this.jpc.suspendedElementId):(this.jpc.target=this.jpc.suspendedElement,this.jpc.targetId=this.jpc.suspendedElementId),this._doForceReattach(i),!0):(this._discard(i,t),!1)}},{key:"onStop",value:function(t){var r=this,i=t.e;this.instance.isConnectionBeingDragged=!1,this.instance.currentlyDragging=!1;var o=VA(Mi,Ii),s=this.instance.getContainer().querySelectorAll(wN);if(P(s,function(p){r.instance.removeClass(p,o)}),this.jpc&&this.jpc.endpoints!=null){var a=this.jpc.suspendedEndpoint!=null,l=this._getFloatingAnchorIndex(),c=this.jpc.suspendedEndpoint,u;if(this.currentDropTarget!=null)if(u=this._getDropEndpoint(t,this.jpc),u==null)this._reattachOrDiscard(t.e);else if(c&&c.id===u.id)this._doForceReattach(l);else if(!u.enabled)this._reattachOrDiscard(t.e);else if(u.isFull())u.fire(sb,{endpoint:this,connection:this.jpc,maxConnections:this.instance.defaults.maxConnections},i),this._reattachOrDiscard(t.e);else{l===0?(this.jpc.source=u.element,this.jpc.sourceId=u.elementId):(this.jpc.target=u.element,this.jpc.targetId=u.elementId);var d=!0;a&&this.jpc.suspendedEndpoint.id!==u.id&&(!this.jpc.isDetachAllowed(this.jpc)||!this.jpc.endpoints[l].isDetachAllowed(this.jpc)||!this.jpc.suspendedEndpoint.isDetachAllowed(this.jpc)||!this.instance.checkCondition("beforeDetach",this.jpc))&&(d=!1),d=d&&u.isDropAllowed(this.jpc.sourceId,this.jpc.targetId,this.jpc.scope,this.jpc,u),d?this._drop(u,l,i,d):this._reattachOrDiscard(t.e)}else this._reattachOrDiscard(t.e);this.instance._refreshEndpoint(this.ep),this.ep.removeClass(this.instance.draggingClass),this._cleanupDraggablePlaceholder(),this.jpc.removeClass(this.instance.draggingClass),delete this.jpc.suspendedEndpoint,delete this.jpc.suspendedElement,delete this.jpc.suspendedElementType,delete this.jpc.suspendedElementId,delete this.jpc.suspendedIndex,delete this.floatingId,delete this.floatingIndex,delete this.floatingElement,delete this.floatingEndpoint,delete this.floatingAnchor,delete this.jpc.pending,u!=null&&this._maybeCleanup(u)}}},{key:"_getSourceDefinition",value:function(t){for(var r,i=this.instance.getContainer(),o=0;o<this.instance.sourceSelectors.length;o++)if(r=this.instance.sourceSelectors[o],r.isEnabled()){var s=DN(t,i,r.selector,this.instance,r.exclude);if(s!==!1)return r}}},{key:"_getDropEndpoint",value:function(t,r){var i;if(this.currentDropTarget.endpoint==null){var o=this.currentDropTarget.def,s=t.e.target||t.e.srcElement;if(o==null)return null;var a=this.currentDropTarget.targetEl,l=IE(t.e,a,this.instance.currentZoom),c=this.instance._deriveEndpointAndAnchorSpec(r.getType().join(" "),!0),u=c.endpoints?k(t,{endpoint:o.def.endpoint||c.endpoints[1],cssClass:o.def.cssClass||"",source:o.def.source===!0,target:o.def.target===!0}):t,d=this.instance.validAnchorsSpec(c.anchors)?c.anchors:this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors:null,p=o.def.anchor,h=o.def.anchorPositionFinder?o.def.anchorPositionFinder(a,l,o.def,t.e):null,g=h??p??(d!=null&&d[1]!=null?d[1]:null);g!=null&&(u=k(u,{anchor:g})),o.def.portId!=null&&(u.portId=o.def.portId);var y=o.def.parameterExtractor?o.def.parameterExtractor(this.currentDropTarget.el,s,t.e):{};if(u=Su(u,y),u.element=a,i=this.instance._internal_newEndpoint(u),i._mtNew=!0,i.deleteOnEmpty=!0,o.def.parameters&&i.mergeParameters(o.def.parameters),o.def.extract){var v={};for(var _ in o.def.extract){var b=this.currentDropTarget.el.getAttribute(_);b&&(v[o.def.extract[_]]=b)}i.mergeParameters(v)}}else i=this.currentDropTarget.endpoint;return i&&(i.removeClass(this.instance.endpointDropAllowedClass),i.removeClass(this.instance.endpointDropForbiddenClass)),i}},{key:"_doForceReattach",value:function(t){this.floatingEndpoint.detachFromConnection(this.jpc,null,!0),this.jpc.endpoints[t]=this.jpc.suspendedEndpoint,this.instance.setHover(this.jpc,!1),this.jpc._forceDetach=!0,this.jpc.suspendedEndpoint.addConnection(this.jpc),this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.suspendedEndpoint.elementId,this.jpc,this.jpc.suspendedEndpoint.element,t),this.instance.deleteEndpoint(this.floatingEndpoint),this.instance.repaint(this.jpc.source),delete this.jpc._forceDetach}},{key:"_shouldReattach",value:function(){if(this.jpc.isReattach()||this.jpc._forceReattach)return!0;var t=this.jpc.suspendedEndpoint,r=this.jpc.suspendedElementType==Lp?1:0,i=this.jpc.endpoints[r];return!UE(!0,!1,[[t,Jo,[this.jpc]],[i,Jo,[this.jpc]],[this.jpc,Jo,[this.jpc]],[this.instance,eb,[ub,this.jpc]]])}},{key:"_discard",value:function(t,r){this.jpc.pending?this.instance.fire(Sx,this.jpc,r):(t===0?(this.jpc.source=this.jpc.suspendedEndpoint.element,this.jpc.sourceId=this.jpc.suspendedEndpoint.elementId):(this.jpc.target=this.jpc.suspendedEndpoint.element,this.jpc.targetId=this.jpc.suspendedEndpoint.elementId),this.jpc.endpoints[t]=this.jpc.suspendedEndpoint),this.floatingEndpoint&&this.floatingEndpoint.detachFromConnection(this.jpc),this.instance.deleteConnection(this.jpc,{originalEvent:r,force:!0})}},{key:"_drop",value:function(t,r,i,o){if(this.jpc.endpoints[r].detachFromConnection(this.jpc),this.jpc.suspendedEndpoint&&this.jpc.suspendedEndpoint.detachFromConnection(this.jpc),this.jpc.endpoints[r]=t,t.addConnection(this.jpc),this.jpc.suspendedEndpoint){var s=this.jpc.suspendedEndpoint.elementId;this.instance.fireMoveEvent({index:r,originalSourceId:r===0?s:this.jpc.sourceId,newSourceId:r===0?t.elementId:this.jpc.sourceId,originalTargetId:r===1?s:this.jpc.targetId,newTargetId:r===1?t.elementId:this.jpc.targetId,originalEndpoint:this.jpc.suspendedEndpoint,connection:this.jpc,newEndpoint:t},i)}if(r===1?this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.targetId,this.jpc,this.jpc.target,1):this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.sourceId,this.jpc,this.jpc.source,0),this.jpc.endpoints[0].finalEndpoint){var a=this.jpc.endpoints[0];a.detachFromConnection(this.jpc),this.jpc.endpoints[0]=this.jpc.endpoints[0].finalEndpoint,this.jpc.endpoints[0].addConnection(this.jpc)}ts(o)&&this.jpc.mergeData(o),this._originalAnchorSpec&&(this.jpc.endpoints[0].setAnchor(this._originalAnchorSpec),this._originalAnchorSpec=null),this.instance._finaliseConnection(this.jpc,null,i),this.instance.setHover(this.jpc,!1),this.instance.revalidate(this.jpc.endpoints[0].element)}},{key:"_registerFloatingConnection",value:function(t,r){this.floatingConnections[t.id]=r}},{key:"_getFloatingAnchorIndex",value:function(){return this.floatingIndex==null?1:this.floatingIndex}}]),e}(),fE=function(e){oe(t,e);var n=se(t);function t(r,i){var o;return R(this,t),o=n.call(this,r,i),o.instance=r,o.dragSelection=i,f(m(o),"selector",[">",Kx,ye].join(" ")),f(m(o),"doRevalidate",void 0),o.doRevalidate=o._revalidate.bind(m(o)),o}return V(t,[{key:"reset",value:function(){this.drag.off(Au,this.doRevalidate)}},{key:"_revalidate",value:function(i){this.instance.revalidate(i)}},{key:"init",value:function(i){this.drag=i,i.on(Au,this.doRevalidate)}},{key:"useGhostProxy",value:function(i,o){var s=o._jsPlumbParentGroup;return s==null?!1:s.ghost===!0}},{key:"makeGhostProxy",value:function(i){var o=i,s=o.cloneNode(!0);return s._jsPlumbParentGroup=o._jsPlumbParentGroup,s}}]),t}(Up),gg=function(){function e(n,t){R(this,e),this.instance=n,this.overlay=t,f(this,"htmlElementOverlay",void 0),this.htmlElementOverlay=t}return V(e,null,[{key:"getElement",value:function(t,r,i){if(t.canvas==null){if(i&&r){t.canvas=i(r);var o=t.instance.overlayClass+" "+(t.cssClass?t.cssClass:"");t.instance.addClass(t.canvas,o)}else t.canvas=KE(hb,{},t.instance.overlayClass+" "+(t.cssClass?t.cssClass:""));t.instance.setAttribute(t.canvas,"jtk-overlay-id",t.id);for(var s in t.attributes)t.instance.setAttribute(t.canvas,s,t.attributes[s]);t.canvas.style.position=Ra,t.instance._appendElement(t.canvas,t.instance.getContainer()),t.instance.getId(t.canvas);var a="translate(-50%, -50%)";t.canvas.style.webkitTransform=a,t.canvas.style.mozTransform=a,t.canvas.style.msTransform=a,t.canvas.style.oTransform=a,t.canvas.style.transform=a,t.isVisible()||(t.canvas.style.display=is),t.canvas.jtk={overlay:t}}return t.canvas}},{key:"destroy",value:function(t){t.canvas&&t.canvas.parentNode&&t.canvas.parentNode.removeChild(t.canvas),delete t.canvas,delete t.cachedDimensions}},{key:"_getDimensions",value:function(t,r){return(t.cachedDimensions==null||r)&&(t.cachedDimensions={w:1,h:1}),t.cachedDimensions}}]),e}(),ja=function(){function e(){R(this,e),f(this,"_listeners",{}),f(this,"eventsSuspended",!1),f(this,"tick",!1),f(this,"eventsToDieOn",{ready:!0}),f(this,"queue",[])}return V(e,[{key:"fire",value:function(t,r,i){var o=null;if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var s=this._listeners[t].length,a=0,l=!1;if(!this.shouldFireEvent||this.shouldFireEvent(t,r,i))for(;!l&&a<s&&o!==!1;){if(this.eventsToDieOn[t])this._listeners[t][a](r,i);else try{o=this._listeners[t][a](r,i)}catch(c){Le("jsPlumb: fire failed for event "+t+" : "+(c.message||c))}a++,(this._listeners==null||this._listeners[t]==null)&&(l=!0)}}this.tick=!1,this._drain()}return o}},{key:"_drain",value:function(){var t=this.queue.pop();t&&this.fire.apply(this,t)}},{key:"unbind",value:function(t,r){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof t=="string")delete this._listeners[t];else if(t.__jsPlumb){var i;for(var o in t.__jsPlumb)i=t.__jsPlumb[o],V0(this._listeners[i]||[],t)}}else arguments.length===2&&V0(this._listeners[t]||[],r);return this}},{key:"getListener",value:function(t){return this._listeners[t]||[]}},{key:"isSuspendEvents",value:function(){return this.eventsSuspended}},{key:"setSuspendEvents",value:function(t){this.eventsSuspended=t}},{key:"bind",value:function(t,r,i){var o=this,s=function(c){WE(o._listeners,c,r,i),r.__jsPlumb=r.__jsPlumb||{},r.__jsPlumb[Ve()]=c};if(typeof t=="string")s(t);else if(t.length!=null)for(var a=0;a<t.length;a++)s(t[a]);return this}},{key:"silently",value:function(t){this.setSuspendEvents(!0);try{t()}catch(r){Le("Cannot execute silent function "+r)}this.setSuspendEvents(!1)}}]),e}(),o9=function(e){oe(t,e);var n=se(t);function t(){return R(this,t),n.apply(this,arguments)}return V(t,[{key:"shouldFireEvent",value:function(i,o,s){return!0}}]),t}(ja);function $p(e){var n=null;return De(e)?n={type:e,options:{}}:n=e,n.options.id=n.options.id||Ve(),n}var $u=function(e){oe(t,e);var n=se(t);function t(r,i,o){var s;R(this,t),s=n.call(this),s.instance=r,s.component=i,f(m(s),"id",void 0),f(m(s),"type",void 0),f(m(s),"cssClass",void 0),f(m(s),"visible",!0),f(m(s),"location",void 0),f(m(s),"events",void 0),f(m(s),"attributes",void 0),o=o||{},s.id=o.id||Ve(),s.cssClass=o.cssClass||"",s.setLocation(o.location),s.events=o.events||{},s.attributes=o.attributes||{};for(var a in s.events)s.bind(a,s.events[a]);return s}return V(t,[{key:"setLocation",value:function(i){var o=this.location==null?.5:this.location;if(i!=null)try{var s=typeof i=="string"?parseFloat(i):i;isNaN(s)||(o=s)}catch{}this.location=o}},{key:"shouldFireEvent",value:function(i,o,s){return!0}},{key:"setVisible",value:function(i){this.visible=i,this.instance.setOverlayVisible(this,i)}},{key:"isVisible",value:function(){return this.visible}}]),t}(ja),hE={},Hr={get:function(n,t,r,i){var o=hE[t];if(o)return new o(n,r,i);throw{message:"jsPlumb: unknown overlay type '"+t+"'"}},register:function(n,t){hE[n]=t}},Gr=function(e){oe(t,e);var n=se(t);function t(r,i,o){var s;return R(this,t),s=n.call(this,r,i,o),s.instance=r,s.component=i,f(m(s),"label",void 0),f(m(s),"labelText",void 0),f(m(s),"type",t.type),f(m(s),"cachedDimensions",void 0),o=o||{label:""},s.setLabel(o.label),s}return V(t,[{key:"getLabel",value:function(){return Vr(this.label)?this.label(this):this.labelText}},{key:"setLabel",value:function(i){this.label=i,this.labelText=null,this.instance.updateLabel(this)}},{key:"getDimensions",value:function(){return{w:1,h:1}}},{key:"updateFrom",value:function(i){i.label!=null&&this.setLabel(i.label),i.location!=null&&(this.setLocation(i.location),this.instance.updateLabel(this))}}]),t}($u);f(Gr,"type","Label");function Ci(e){return e.type===Gr.type}Hr.register(Gr.type,Gr);function hu(e){return e==null?null:e.split(" ").filter(function(n){return n!=null&&n.length>0})}function pE(e,n,t){for(var r in n)e[r]=t}var TN="connector",SN="override",IN="cssClass",gE="__default",MN="anchor",AN="anchors",Ma="__label",xN="jtk-default-label",Ob="overlay",ON="labelLocation",mE="add",vE="remove";function Go(e,n){if(e.getDefaultType){var t=e.getTypeDescriptor(),r={},i=e.getDefaultType(),o=k({},i);pE(r,i,gE),e._types.forEach(function(s){if(s!==gE){var a=e.instance.getType(s,t);if(a!=null){var l=new Set([TN,MN,AN]);if(a.mergeStrategy===SN)for(var c in a)l.add(c);o=Su(o,a,[IN],IA(l)),pE(r,a,s)}}}),n&&(o=wA(o,n,"_")),e.applyType(o,r)}}function Ap(e,n){var t=e.instance.getType(n,e.getTypeDescriptor());t!=null&&t.cssClass&&e.removeClass(t.cssClass)}function yE(e){if(e.paintStyle&&e.hoverPaintStyle){var n={};k(n,e.paintStyle),k(n,e.hoverPaintStyle),e.hoverPaintStyle=n}}function NN(e,n){var t={cssClass:n.cssClass,id:Ma,component:e},r=k(t,n);return new Gr(e.instance,e,r)}function RN(e,n){var t=null;if(De(n))t=Hr.get(e.instance,n,e,{});else if(n.type!=null&&n.options!=null){var r=n,i=k({},r.options);t=Hr.get(e.instance,r.type,e,i)}else t=n;return t.id=t.id||Ve(),e.cacheTypeItem(Ob,t,t.id),e.overlays[t.id]=t,t}var Nb=function(e){oe(t,e);var n=se(t);function t(r,i){var o;if(R(this,t),o=n.call(this),o.instance=r,f(m(o),"defaultLabelLocation",.5),f(m(o),"overlays",{}),f(m(o),"overlayPositions",{}),f(m(o),"overlayPlacements",{}),f(m(o),"clone",void 0),f(m(o),"deleted",void 0),f(m(o),"segment",void 0),f(m(o),"x",void 0),f(m(o),"y",void 0),f(m(o),"w",void 0),f(m(o),"h",void 0),f(m(o),"id",void 0),f(m(o),"visible",!0),f(m(o),"typeId",void 0),f(m(o),"params",{}),f(m(o),"paintStyle",void 0),f(m(o),"hoverPaintStyle",void 0),f(m(o),"paintStyleInUse",void 0),f(m(o),"_hover",!1),f(m(o),"lastPaintedAt",void 0),f(m(o),"data",void 0),f(m(o),"_defaultType",void 0),f(m(o),"events",void 0),f(m(o),"parameters",void 0),f(m(o),"_types",void 0),f(m(o),"_typeCache",void 0),f(m(o),"cssClass",void 0),f(m(o),"hoverClass",void 0),f(m(o),"beforeDetach",void 0),f(m(o),"beforeDrop",void 0),i=i||{},o.cssClass=i.cssClass||"",o.hoverClass=i.hoverClass||r.defaults.hoverClass,o.beforeDetach=i.beforeDetach,o.beforeDrop=i.beforeDrop,o._types=new Set,o._typeCache={},o.parameters=Tu(i.parameters||{}),o.id=i.id||o.getIdPrefix()+new Date().getTime(),o._defaultType={parameters:o.parameters,scope:i.scope||o.instance.defaultScope,overlays:{}},i.events)for(var s in i.events)o.bind(s,i.events[s]);o.clone=function(){var h=Object.create(o.constructor.prototype);return o.constructor.apply(h,[r,i]),h},o.overlays={},o.overlayPositions={};var a=i.overlays||[],l={},c=o.getDefaultOverlayKey();if(c){var u=o.instance.defaults[c];u&&a.push.apply(a,es(u));for(var d=0;d<a.length;d++){var p=$p(a[d]);l[p.options.id]=p}}return o._defaultType.overlays=l,i.label&&(o.getDefaultType().overlays[Ma]={type:Gr.type,options:{label:i.label,location:i.labelLocation||o.defaultLabelLocation,id:Ma,cssClass:xN}}),o}return V(t,[{key:"isDetachAllowed",value:function(i){var o=!0;if(this.beforeDetach)try{o=this.beforeDetach(i)}catch(s){Le("jsPlumb: beforeDetach callback failed",s)}return o}},{key:"isDropAllowed",value:function(i,o,s,a,l){var c,u={sourceId:i,targetId:o,scope:s,connection:a,dropEndpoint:l};if(this.beforeDrop)try{c=this.beforeDrop(u)}catch(d){Le("jsPlumb: beforeDrop callback failed",d)}else c=this.instance.checkCondition(cb,u);return c}},{key:"getDefaultType",value:function(){return this._defaultType}},{key:"appendToDefaultType",value:function(i){for(var o in i)this._defaultType[o]=i[o]}},{key:"getId",value:function(){return this.id}},{key:"cacheTypeItem",value:function(i,o,s){this._typeCache[s]=this._typeCache[s]||{},this._typeCache[s][i]=o}},{key:"getCachedTypeItem",value:function(i,o){return this._typeCache[o]?this._typeCache[o][i]:null}},{key:"setType",value:function(i,o){this.clearTypes(),(hu(i)||[]).forEach(this._types.add,this._types),Go(this,o)}},{key:"getType",value:function(){return Array.from(this._types.keys())}},{key:"reapplyTypes",value:function(i){Go(this,i)}},{key:"hasType",value:function(i){return this._types.has(i)}},{key:"addType",value:function(i,o){var s=hu(i),a=!1;if(s!=null){for(var l=0,c=s.length;l<c;l++)this._types.has(s[l])||(this._types.add(s[l]),a=!0);a&&Go(this,o)}}},{key:"removeType",value:function(i,o){var s=this,a=hu(i),l=!1,c=function(h){return s._types.has(h)?(Ap(s,h),s._types.delete(h),!0):!1};if(a!=null){for(var u=0,d=a.length;u<d;u++)l=c(a[u])||l;l&&Go(this,o)}}},{key:"clearTypes",value:function(i){var o=this;this._types.forEach(function(s){Ap(o,s)}),this._types.clear(),Go(this,i)}},{key:"toggleType",value:function(i,o){var s=hu(i);if(s!=null){for(var a=0,l=s.length;a<l;a++)this._types.has(s[a])?(Ap(this,s[a]),this._types.delete(s[a])):this._types.add(s[a]);Go(this,o)}}},{key:"applyType",value:function(i,o){if(this.setPaintStyle(i.paintStyle),this.setHoverPaintStyle(i.hoverPaintStyle),this.mergeParameters(i.parameters),this.paintStyleInUse=this.getPaintStyle(),i.overlays){var s={},a;for(a in i.overlays){var l=this.overlays[i.overlays[a].options.id];if(l)l.updateFrom(i.overlays[a].options),s[i.overlays[a].options.id]=!0,this.instance.reattachOverlay(l,this);else{var c=this.getCachedTypeItem(Ob,i.overlays[a].options.id);c!=null?(this.instance.reattachOverlay(c,this),c.setVisible(!0),c.updateFrom(i.overlays[a].options),this.overlays[c.id]=c):c=this.addOverlay(i.overlays[a]),s[c.id]=!0}}for(a in this.overlays)s[this.overlays[a].id]==null&&this.removeOverlay(this.overlays[a].id,!0)}}},{key:"setPaintStyle",value:function(i){this.paintStyle=i,this.paintStyleInUse=this.paintStyle,yE(this)}},{key:"getPaintStyle",value:function(){return this.paintStyle}},{key:"setHoverPaintStyle",value:function(i){this.hoverPaintStyle=i,yE(this)}},{key:"getHoverPaintStyle",value:function(){return this.hoverPaintStyle}},{key:"destroy",value:function(){for(var i in this.overlays)this.instance.destroyOverlay(this.overlays[i]);this.overlays={},this.overlayPositions={},this.unbind(),this.clone=null}},{key:"isHover",value:function(){return this._hover}},{key:"mergeParameters",value:function(i){i!=null&&k(this.parameters,i)}},{key:"setVisible",value:function(i){this.visible=i,i?this.showOverlays():this.hideOverlays()}},{key:"isVisible",value:function(){return this.visible}},{key:"setAbsoluteOverlayPosition",value:function(i,o){this.overlayPositions[i.id]=o}},{key:"getAbsoluteOverlayPosition",value:function(i){return this.overlayPositions?this.overlayPositions[i.id]:null}},{key:"_clazzManip",value:function(i,o){for(var s in this.overlays)i===mE?this.instance.addOverlayClass(this.overlays[s],o):i===vE&&this.instance.removeOverlayClass(this.overlays[s],o)}},{key:"addClass",value:function(i,o){var s=(this.cssClass||"").split(" ");s.push(i),this.cssClass=s.join(" "),this._clazzManip(mE,i)}},{key:"removeClass",value:function(i,o){var s=(this.cssClass||"").split(" ");this.cssClass=s.filter(function(a){return a!==i}).join(" "),this._clazzManip(vE,i)}},{key:"getClass",value:function(){return this.cssClass}},{key:"shouldFireEvent",value:function(i,o,s){return!0}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(i){this.data=i||{}}},{key:"mergeData",value:function(i){this.data=k(this.data,i)}},{key:"addOverlay",value:function(i){var o=RN(this,i);if(this.getData&&o.type===Gr.type&&!De(i)){var s=this.getData(),a=i.options;if(s){var l=a.labelLocationAttribute||ON,c=s[l];c&&(o.location=c)}}return o}},{key:"getOverlay",value:function(i){return this.overlays[i]}},{key:"getOverlays",value:function(){return this.overlays}},{key:"hideOverlay",value:function(i){var o=this.getOverlay(i);o&&o.setVisible(!1)}},{key:"hideOverlays",value:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o=o||[];for(var a in this.overlays)(o.length===0||o.indexOf(a)!==-1)&&this.overlays[a].setVisible(!1)}},{key:"showOverlay",value:function(i){var o=this.getOverlay(i);o&&o.setVisible(!0)}},{key:"showOverlays",value:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o=o||[];for(var a in this.overlays)(o.length===0||o.indexOf(a)!==-1)&&this.overlays[a].setVisible(!0)}},{key:"removeAllOverlays",value:function(){for(var i in this.overlays)this.instance.destroyOverlay(this.overlays[i]);this.overlays={},this.overlayPositions=null,this.overlayPlacements={}}},{key:"removeOverlay",value:function(i,o){var s=this.overlays[i];s&&(s.setVisible(!1),o||this.instance.destroyOverlay(s),delete this.overlays[i],this.overlayPositions&&delete this.overlayPositions[i],this.overlayPlacements&&delete this.overlayPlacements[i])}},{key:"removeOverlays",value:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];for(var a=0,l=o.length;a<l;a++)this.removeOverlay(arguments[a])}},{key:"getLabel",value:function(){var i=this.getLabelOverlay();return i!=null?i.getLabel():null}},{key:"getLabelOverlay",value:function(){return this.getOverlay(Ma)}},{key:"setLabel",value:function(i){var o=this.getLabelOverlay();if(o)if(De(i)||Vr(i))o.setLabel(i);else{var a=i;a.label&&o.setLabel(a.label),a.location&&(o.location=a.location)}else{var s=De(i)||Vr(i)?{label:i}:i;o=NN(this,s),this.overlays[Ma]=o}}}]),t}(ja),kN=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],Zo=function(e){oe(t,e);var n=se(t);function t(r,i){var o;R(this,t),o=n.call(this,r,i),o.instance=r,f(m(o),"connections",[]),f(m(o),"endpoint",void 0),f(m(o),"element",void 0),f(m(o),"elementId",void 0),f(m(o),"dragAllowedWhenFull",!0),f(m(o),"timestamp",void 0),f(m(o),"portId",void 0),f(m(o),"maxConnections",void 0),f(m(o),"proxiedBy",void 0),f(m(o),"connectorClass",void 0),f(m(o),"connectorHoverClass",void 0),f(m(o),"finalEndpoint",void 0),f(m(o),"enabled",!0),f(m(o),"isSource",void 0),f(m(o),"isTarget",void 0),f(m(o),"isTemporarySource",void 0),f(m(o),"connectionCost",1),f(m(o),"connectionsDirected",void 0),f(m(o),"connectionsDetachable",void 0),f(m(o),"reattachConnections",void 0),f(m(o),"currentAnchorClass",void 0),f(m(o),"referenceEndpoint",void 0),f(m(o),"edgeType",void 0),f(m(o),"connector",void 0),f(m(o),"connectorOverlays",void 0),f(m(o),"connectorStyle",void 0),f(m(o),"connectorHoverStyle",void 0),f(m(o),"deleteOnEmpty",void 0),f(m(o),"uuid",void 0),f(m(o),"scope",void 0),f(m(o),"_anchor",void 0),f(m(o),"defaultLabelLocation",[.5,.5]),o.appendToDefaultType({edgeType:i.edgeType,maxConnections:i.maxConnections==null?o.instance.defaults.maxConnections:i.maxConnections,paintStyle:i.paintStyle||o.instance.defaults.endpointStyle,hoverPaintStyle:i.hoverPaintStyle||o.instance.defaults.endpointHoverStyle,connectorStyle:i.connectorStyle,connectorHoverStyle:i.connectorHoverStyle,connectorClass:i.connectorClass,connectorHoverClass:i.connectorHoverClass,connectorOverlays:i.connectorOverlays,connector:i.connector}),o.enabled=i.enabled!==!1,o.visible=!0,o.element=i.element,o.uuid=i.uuid,o.portId=i.portId,o.elementId=i.elementId,o.connectionCost=i.connectionCost==null?1:i.connectionCost,o.connectionsDirected=i.connectionsDirected,o.currentAnchorClass="",o.events={},o.connectorOverlays=i.connectorOverlays,o.connectorStyle=i.connectorStyle,o.connectorHoverStyle=i.connectorHoverStyle,o.connector=i.connector,o.edgeType=i.edgeType,o.connectorClass=i.connectorClass,o.connectorHoverClass=i.connectorHoverClass,o.deleteOnEmpty=i.deleteOnEmpty===!0,o.isSource=i.source||!1,o.isTemporarySource=i.isTemporarySource||!1,o.isTarget=i.target||!1,o.connections=i.connections||[],o.scope=i.scope||r.defaultScope,o.timestamp=null,o.reattachConnections=i.reattachConnections||r.defaults.reattachConnections,o.connectionsDetachable=r.defaults.connectionsDetachable,i.connectionsDetachable===!1&&(o.connectionsDetachable=!1),o.dragAllowedWhenFull=i.dragAllowedWhenFull!==!1,i.onMaxConnections&&o.bind(sb,i.onMaxConnections);var s=i.endpoint||i.existingEndpoint||r.defaults.endpoint;if(o.setEndpoint(s),i.preparedAnchor!=null)o.setPreparedAnchor(i.preparedAnchor);else{var a=i.anchor?i.anchor:i.anchors?i.anchors:r.defaults.anchor||Xn.Top;o.setAnchor(a)}var l=[Ou,i.type||""].join(" ");return o.addType(l,i.data),o}return V(t,[{key:"getIdPrefix",value:function(){return"_jsplumb_e"}},{key:"getTypeDescriptor",value:function(){return"endpoint"}},{key:"getXY",value:function(){return{x:this.endpoint.x,y:this.endpoint.y}}},{key:"getDefaultOverlayKey",value:function(){return"endpointOverlays"}},{key:"_updateAnchorClass",value:function(){var i=this._anchor&&this._anchor.cssClass;if(i!=null&&i.length>0){var o=this.instance.endpointAnchorClassPrefix+"-"+this.currentAnchorClass;this.currentAnchorClass=i;var s=this.instance.endpointAnchorClassPrefix+(this.currentAnchorClass?"-"+this.currentAnchorClass:"");o!==s&&(this.removeClass(o),this.addClass(s),this.instance.removeClass(this.element,o),this.instance.addClass(this.element,s))}}},{key:"setPreparedAnchor",value:function(i){return this.instance.router.setAnchor(this,i),this._updateAnchorClass(),this}},{key:"_anchorLocationChanged",value:function(i){this.fire(KA,{endpoint:this,anchor:i}),this._updateAnchorClass()}},{key:"setAnchor",value:function(i){var o=this.instance.router.prepareAnchor(i);return this.setPreparedAnchor(o),this}},{key:"addConnection",value:function(i){this.connections.push(i),this.instance._refreshEndpoint(this)}},{key:"detachFromConnection",value:function(i,o,s){o=o??this.connections.indexOf(i),o>=0&&(this.connections.splice(o,1),this.instance._refreshEndpoint(this)),!s&&this.deleteOnEmpty&&this.connections.length===0&&this.instance.deleteEndpoint(this)}},{key:"deleteEveryConnection",value:function(i){for(var o=this.connections.length,s=0;s<o;s++)this.instance.deleteConnection(this.connections[0],i)}},{key:"detachFrom",value:function(i){for(var o=[],s=0;s<this.connections.length;s++)(this.connections[s].endpoints[1]===i||this.connections[s].endpoints[0]===i)&&o.push(this.connections[s]);for(var a=0,l=o.length;a<l;a++)this.instance.deleteConnection(o[0]);return this}},{key:"setVisible",value:function(i,o,s){if(Ce(_e(t.prototype),"setVisible",this).call(this,i),this.endpoint.setVisible(i),i?this.showOverlays():this.hideOverlays(),!o){for(var a=0;a<this.connections.length;a++)if(this.connections[a].setVisible(i),!s){var l=this===this.connections[a].endpoints[0]?1:0;this.connections[a].endpoints[l].connections.length===1&&this.connections[a].endpoints[l].setVisible(i,!0,!0)}}}},{key:"applyType",value:function(i,o){Ce(_e(t.prototype),"applyType",this).call(this,i,o),this.setPaintStyle(i.endpointStyle||i.paintStyle),this.setHoverPaintStyle(i.endpointHoverStyle||i.hoverPaintStyle),this.connectorStyle=i.connectorStyle,this.connectorHoverStyle=i.connectorHoverStyle,this.connector=i.connector,this.connectorOverlays=i.connectorOverlays,this.edgeType=i.edgeType,i.maxConnections!=null&&(this.maxConnections=i.maxConnections),i.scope&&(this.scope=i.scope),k(i,kN),this.instance.applyEndpointType(this,i)}},{key:"destroy",value:function(){Ce(_e(t.prototype),"destroy",this).call(this),this.deleted=!0,this.endpoint!=null&&this.instance.destroyEndpoint(this)}},{key:"isFull",value:function(){return this.maxConnections===0?!0:!(this.isFloating()||this.maxConnections<0||this.connections.length<this.maxConnections)}},{key:"isFloating",value:function(){return this.instance.router.isFloating(this)}},{key:"isConnectedTo",value:function(i){var o=!1;if(i){for(var s=0;s<this.connections.length;s++)if(this.connections[s].endpoints[1]===i||this.connections[s].endpoints[0]===i){o=!0;break}}return o}},{key:"setDragAllowedWhenFull",value:function(i){this.dragAllowedWhenFull=i}},{key:"getUuid",value:function(){return this.uuid}},{key:"connectorSelector",value:function(){return this.connections[0]}},{key:"prepareEndpoint",value:function(i,o){var s={cssClass:this.cssClass,endpoint:this},a;if(YE(i,ls)){var l=i;a=Ai.clone(l),a.classes=s.cssClass.split(" ")}else if(De(i))a=Ai.get(this,i,s);else{var c=i;k(s,c.options||{}),a=Ai.get(this,c.type,s)}return a.typeId=o,a}},{key:"setEndpoint",value:function(i){var o=this.prepareEndpoint(i);this.setPreparedEndpoint(o)}},{key:"setPreparedEndpoint",value:function(i){this.endpoint!=null&&this.instance.destroyEndpoint(this),this.endpoint=i}},{key:"addClass",value:function(i,o){Ce(_e(t.prototype),"addClass",this).call(this,i,o),this.endpoint!=null&&this.endpoint.addClass(i)}},{key:"removeClass",value:function(i,o){Ce(_e(t.prototype),"removeClass",this).call(this,i,o),this.endpoint!=null&&this.endpoint.removeClass(i)}}]),t}(Nb),pu="anchors",xp="connector";function _E(e,n,t,r,i,o,s){var a;if(n)e.endpoints[t]=n,n.addConnection(e);else{var l=s||e.endpointSpec||e.endpointsSpec[t]||e.instance.defaults.endpoints[t]||e.instance.defaults.endpoint,c=e.endpointStyles[t]||e.endpointStyle||e.instance.defaults.endpointStyles[t]||e.instance.defaults.endpointStyle;c.fill==null&&e.paintStyle!=null&&(c.fill=e.paintStyle.stroke),c.outlineStroke==null&&e.paintStyle!=null&&(c.outlineStroke=e.paintStyle.outlineStroke),c.outlineWidth==null&&e.paintStyle!=null&&(c.outlineWidth=e.paintStyle.outlineWidth);var u=e.endpointHoverStyles[t]||e.endpointHoverStyle||e.endpointHoverStyle||e.instance.defaults.endpointHoverStyles[t]||e.instance.defaults.endpointHoverStyle;e.hoverPaintStyle!=null&&(u==null&&(u={}),u.fill==null&&(u.fill=e.hoverPaintStyle.stroke));var d=e.uuids?e.uuids[t]:null;r=r??(e.instance.defaults.anchors!=null?e.instance.defaults.anchors[t]:e.instance.defaults.anchor),a=e.instance._internal_newEndpoint({paintStyle:c,hoverPaintStyle:u,endpoint:l,connections:[e],uuid:d,element:i,scope:e.scope,anchor:r,reattachConnections:e.reattach||e.instance.defaults.reattachConnections,connectionsDetachable:e.detachable||e.instance.defaults.connectionsDetachable}),e.instance._refreshEndpoint(a),n==null&&(a.deleteOnEmpty=!0),e.endpoints[t]=a}return a}var Fa=function(e){oe(t,e);var n=se(t);function t(r,i){var o;R(this,t),o=n.call(this,r,i),o.instance=r,f(m(o),"connector",void 0),f(m(o),"defaultLabelLocation",.5),f(m(o),"scope",void 0),f(m(o),"typeId","_jsplumb_connection"),f(m(o),"previousConnection",void 0),f(m(o),"sourceId",void 0),f(m(o),"targetId",void 0),f(m(o),"source",void 0),f(m(o),"target",void 0),f(m(o),"detachable",!0),f(m(o),"reattach",!1),f(m(o),"uuids",void 0),f(m(o),"cost",1),f(m(o),"directed",void 0),f(m(o),"endpoints",[null,null]),f(m(o),"endpointStyles",void 0),f(m(o),"endpointSpec",void 0),f(m(o),"endpointsSpec",void 0),f(m(o),"endpointStyle",{}),f(m(o),"endpointHoverStyle",{}),f(m(o),"endpointHoverStyles",void 0),f(m(o),"suspendedEndpoint",void 0),f(m(o),"suspendedIndex",void 0),f(m(o),"suspendedElement",void 0),f(m(o),"suspendedElementId",void 0),f(m(o),"suspendedElementType",void 0),f(m(o),"_forceReattach",void 0),f(m(o),"_forceDetach",void 0),f(m(o),"proxies",[]),f(m(o),"pending",!1),o.id=i.id,o.previousConnection=i.previousConnection,o.source=i.source,o.target=i.target,i.sourceEndpoint?(o.source=i.sourceEndpoint.element,o.sourceId=i.sourceEndpoint.elementId):o.sourceId=r.getId(o.source),i.targetEndpoint?(o.target=i.targetEndpoint.element,o.targetId=i.targetEndpoint.elementId):o.targetId=r.getId(o.target),o.scope=i.scope;var s=i.anchors?i.anchors[0]:i.anchor,a=i.anchors?i.anchors[1]:i.anchor;r.manage(o.source),r.manage(o.target),o.visible=!0,o.params={cssClass:i.cssClass,hoverClass:i.hoverClass,"pointer-events":i["pointer-events"],overlays:i.overlays},o.lastPaintedAt=null,i.type&&(i.endpoints=i.endpoints||o.instance._deriveEndpointAndAnchorSpec(i.type).endpoints),o.endpointSpec=i.endpoint,o.endpointsSpec=i.endpoints||[null,null],o.endpointStyle=i.endpointStyle,o.endpointHoverStyle=i.endpointHoverStyle,o.endpointStyles=i.endpointStyles||[null,null],o.endpointHoverStyles=i.endpointHoverStyles||[null,null],o.paintStyle=i.paintStyle,o.hoverPaintStyle=i.hoverPaintStyle,o.uuids=i.uuids,o.makeEndpoint(!0,o.source,o.sourceId,s,i.sourceEndpoint),o.makeEndpoint(!1,o.target,o.targetId,a,i.targetEndpoint),o.scope||(o.scope=o.endpoints[0].scope),i.deleteEndpointsOnEmpty!=null&&(o.endpoints[0].deleteOnEmpty=i.deleteEndpointsOnEmpty,o.endpoints[1].deleteOnEmpty=i.deleteEndpointsOnEmpty);var l=o.instance.defaults.connectionsDetachable;i.detachable===!1&&(l=!1),o.endpoints[0].connectionsDetachable===!1&&(l=!1),o.endpoints[1].connectionsDetachable===!1&&(l=!1),o.endpointsSpec=i.endpoints||[null,null],o.endpointSpec=i.endpoint||null;var c=i.reattach||o.endpoints[0].reattachConnections||o.endpoints[1].reattachConnections||o.instance.defaults.reattachConnections,u=k({},o.endpoints[0].connectorStyle||o.endpoints[1].connectorStyle||i.paintStyle||o.instance.defaults.paintStyle);if(o.appendToDefaultType({detachable:l,reattach:c,paintStyle:u,hoverPaintStyle:k({},o.endpoints[0].connectorHoverStyle||o.endpoints[1].connectorHoverStyle||i.hoverPaintStyle||o.instance.defaults.hoverPaintStyle)}),i.outlineWidth&&(u.outlineWidth=i.outlineWidth),i.outlineColor&&(u.outlineStroke=i.outlineColor),i.lineWidth&&(u.strokeWidth=i.lineWidth),i.color&&(u.stroke=i.color),!o.instance._suspendDrawing){var d=o.instance._suspendedAt||Ve();o.instance._paintEndpoint(o.endpoints[0],{timestamp:d}),o.instance._paintEndpoint(o.endpoints[1],{timestamp:d})}o.cost=i.cost||o.endpoints[0].connectionCost,o.directed=i.directed,i.directed==null&&(o.directed=o.endpoints[0].connectionsDirected);var p=k({},o.endpoints[1].parameters);k(p,o.endpoints[0].parameters),k(p,o.parameters),o.parameters=p,o.paintStyleInUse=o.getPaintStyle()||{},o._setConnector(o.endpoints[0].connector||o.endpoints[1].connector||i.connector||o.instance.defaults.connector,!0);var h=i.data==null||!ts(i.data)?{}:i.data;o.setData(h);var g=[Ou,o.endpoints[0].edgeType,o.endpoints[1].edgeType,i.type].join(" ");return/[^\s]/.test(g)&&o.addType(g,i.data),o}return V(t,[{key:"getIdPrefix",value:function(){return"_jsPlumb_c"}},{key:"getDefaultOverlayKey",value:function(){return hx}},{key:"getXY",value:function(){return{x:this.connector.x,y:this.connector.y}}},{key:"makeEndpoint",value:function(i,o,s,a,l){return s=s||this.instance.getId(o),_E(this,l,i?0:1,a,o)}},{key:"getTypeDescriptor",value:function(){return t.type}},{key:"isDetachable",value:function(i){return this.detachable===!1?!1:i!=null?i.connectionsDetachable===!0:this.detachable===!0}},{key:"setDetachable",value:function(i){this.detachable=i===!0}},{key:"isReattach",value:function(){return this.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0}},{key:"setReattach",value:function(i){this.reattach=i===!0}},{key:"applyType",value:function(i,o){var s=null;i.connector!=null&&(s=this.getCachedTypeItem(xp,o.connector),s==null&&(s=this.prepareConnector(i.connector,o.connector),this.cacheTypeItem(xp,s,o.connector)),this.setPreparedConnector(s)),Ce(_e(t.prototype),"applyType",this).call(this,i,o),i.detachable!=null&&this.setDetachable(i.detachable),i.reattach!=null&&this.setReattach(i.reattach),i.scope&&(this.scope=i.scope);var a=null;i.anchor?(a=this.getCachedTypeItem(pu,o.anchor),a==null&&(a=[Ia(i.anchor),Ia(i.anchor)],this.cacheTypeItem(pu,a,o.anchor))):i.anchors&&(a=this.getCachedTypeItem(pu,o.anchors),a==null&&(a=[Ia(i.anchors[0]),Ia(i.anchors[1])],this.cacheTypeItem(pu,a,o.anchors))),a!=null&&(this.instance.router.setConnectionAnchors(this,a),this.instance.router.isDynamicAnchor(this.endpoints[1])&&this.instance.repaint(this.endpoints[1].element)),this.instance.applyConnectorType(this.connector,i)}},{key:"addClass",value:function(i,o){Ce(_e(t.prototype),"addClass",this).call(this,i),o&&(this.endpoints[0].addClass(i),this.endpoints[1].addClass(i),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(i)),this.connector&&this.instance.addConnectorClass(this.connector,i)}},{key:"removeClass",value:function(i,o){Ce(_e(t.prototype),"removeClass",this).call(this,i),o&&(this.endpoints[0].removeClass(i),this.endpoints[1].removeClass(i),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(i)),this.connector&&this.instance.removeConnectorClass(this.connector,i)}},{key:"setVisible",value:function(i){Ce(_e(t.prototype),"setVisible",this).call(this,i),this.connector&&this.instance.setConnectorVisible(this.connector,i),this.instance._paintConnection(this)}},{key:"destroy",value:function(){Ce(_e(t.prototype),"destroy",this).call(this),this.endpoints=null,this.endpointStyles=null,this.source=null,this.target=null,this.instance.destroyConnector(this),this.connector=null,this.deleted=!0}},{key:"getUuids",value:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]}},{key:"prepareConnector",value:function(i,o){var s={cssClass:this.params.cssClass,hoverClass:this.params.hoverClass,"pointer-events":this.params["pointer-events"]},a;if(De(i))a=this.instance._makeConnector(this,i,s);else{var l=i;a=this.instance._makeConnector(this,l.type,Su(l.options||{},s))}return o!=null&&(a.typeId=o),a}},{key:"setPreparedConnector",value:function(i,o,s,a){if(this.connector!==i){var l,c="";if(this.connector!=null&&(l=this.connector,c=this.instance.getConnectorClass(this.connector),this.instance.destroyConnector(this)),this.connector=i,a&&this.cacheTypeItem(xp,i,a),this.addClass(c),l!=null){var u=this.getOverlays();for(var d in u)this.instance.reattachOverlay(u[d],this)}o||this.instance._paintConnection(this)}}},{key:"_setConnector",value:function(i,o,s,a){var l=this.prepareConnector(i,a);this.setPreparedConnector(l,o,s,a)}},{key:"replaceEndpoint",value:function(i,o){var s=this.endpoints[i],a=s.elementId,l=this.instance.getEndpoints(s.element),c=l.indexOf(s),u=_E(this,null,i,null,s.element,a,o);this.endpoints[i]=u,l.splice(c,1,u),s.detachFromConnection(this),this.instance.deleteEndpoint(s),this.instance.fire(QA,{previous:s,current:u})}}]),t}(Nb);f(Fa,"type","connection");function Aa(e){if(e.path==null){var n=k({"jtk-overlay-id":e.id},e.attributes);e.path=Zn(jp,n);var t=e.instance.overlayClass+" "+(e.cssClass?e.cssClass:"");e.instance.addClass(e.path,t),e.path.jtk={overlay:e}}var r=e.path.parentNode;if(r==null){if(e.component instanceof Fa){var i=e.component.connector;r=i!=null?i.canvas:null}else if(e.component instanceof Zo){var o=e.component.endpoint;r=o!=null?o.canvas:o}r!=null&&Eu(r,e.path,1)}return e.path}function PN(e,n,t,r){Aa(e);var i=[0,0];r.xmin<0&&(i[0]=-r.xmin),r.ymin<0&&(i[1]=-r.ymin);var o={d:n,stroke:t.stroke?t.stroke:null,fill:t.fill?t.fill:null,transform:"translate("+i[0]+","+i[1]+")","pointer-events":"visibleStroke"};Kn(e.path,o)}function FN(e,n){var t=e;t.path!=null&&t.path.parentNode!=null&&t.path.parentNode.removeChild(t.path),t.bgPath!=null&&t.bgPath.parentNode!=null&&t.bgPath.parentNode.removeChild(t.bgPath),delete t.path,delete t.bgPath}(function(e){oe(t,e);var n=se(t);function t(){var r;R(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=n.call.apply(n,[this].concat(o)),f(m(r),"path",void 0),r}return t})($u);var Rb=function(){function e(){R(this,e)}return V(e,null,[{key:"paint",value:function(t,r,i,o){if(i!=null){var s=[t.x,t.y],a=[t.w,t.h];if(o!=null&&(o.xmin<0&&(s[0]+=o.xmin),o.ymin<0&&(s[1]+=o.ymin),a[0]=o.xmax+(o.xmin<0?-o.xmin:0),a[1]=o.ymax+(o.ymin<0?-o.ymin:0)),isFinite(a[0])&&isFinite(a[1])){var l={width:""+(a[0]||0),height:""+(a[1]||0)};r.containerType===ns.HTML?Kn(t.canvas,k(l,{style:fb([s[0],s[1]])})):Kn(t.canvas,k(l,{x:s[0],y:s[1]}))}}}}]),e}();function LN(e,n,t,r){VN(e,n),Rb.paint(n,e,t,r);var i="",o=[0,0];if(r.xmin<0&&(o[0]=-r.xmin),r.ymin<0&&(o[1]=-r.ymin),n.segments.length>0){i=e.getPathData(n);var s={d:i,transform:"translate("+o[0]+","+o[1]+")","pointer-events":"visibleStroke"},a=null;if(t.outlineStroke){var l=t.outlineWidth||1,c=t.strokeWidth+2*l;a=k({},t),a.stroke=t.outlineStroke,a.strokeWidth=c,n.bgPath==null?(n.bgPath=Zn(jp,s),e.addClass(n.bgPath,e.connectorOutlineClass),Eu(n.canvas,n.bgPath,0)):Kn(n.bgPath,s),Bp(n.canvas,n.bgPath,a)}var u=n;u.path==null?(u.path=Zn(jp,s),Eu(u.canvas,u.path,t.outlineStroke?1:0)):(u.path.parentNode!==u.canvas&&Eu(u.canvas,u.path,t.outlineStroke?1:0),Kn(n.path,s)),Bp(n.canvas,n.path,t)}}function VN(e,n){if(n.canvas!=null)return n.canvas;var t=Zn(db,{style:"",width:"0",height:"0","pointer-events":is,position:Ra});return n.canvas=t,e._appendElement(n.canvas,e.getContainer()),n.cssClass!=null&&e.addClass(t,n.cssClass),e.addClass(t,e.connectorClass),t.jtk=t.jtk||{},t.jtk.connector=n,t}var jN=function(){function e(){R(this,e)}return V(e,null,[{key:"getEndpointElement",value:function(t){if(t.canvas!=null)return t.canvas;var r=Zn(db,{style:"",width:"0",height:"0","pointer-events":"all",position:Ra});t.canvas=r;var i=t.classes.join(" ");t.instance.addClass(r,i);for(var o=t.endpoint.scope.split(/\s/),s=0;s<o.length;s++)t.instance.setAttribute(r,JE+o[s],gb);return t.instance._appendElementToContainer(r),t.cssClass!=null&&t.instance.addClass(r,t.cssClass),t.instance.addClass(r,t.instance.endpointClass),r.jtk=r.jtk||{},r.jtk.endpoint=t.endpoint,r.style.display=t.endpoint.visible!==!1?Vp:is,r}},{key:"paint",value:function(t,r,i){if(t.endpoint.deleted!==!0){this.getEndpointElement(t),Rb.paint(t,t.instance,i);var o=k({},i);o.outlineStroke&&(o.stroke=o.outlineStroke),t.node==null?(t.node=r.makeNode(t,o),t.canvas.appendChild(t.node)):r.updateNode!=null&&r.updateNode(t,t.node),Bp(t.canvas,t.node,o)}}}]),e}(),Wu=function(){function e(n,t){R(this,e),this.connection=n,f(this,"type",void 0),f(this,"edited",!1),f(this,"stub",void 0),f(this,"sourceStub",void 0),f(this,"targetStub",void 0),f(this,"maxStub",void 0),f(this,"typeId",void 0),f(this,"gap",void 0),f(this,"sourceGap",void 0),f(this,"targetGap",void 0),f(this,"segments",[]),f(this,"totalLength",0),f(this,"segmentProportions",[]),f(this,"segmentProportionalLengths",[]),f(this,"paintInfo",null),f(this,"strokeWidth",void 0),f(this,"x",void 0),f(this,"y",void 0),f(this,"w",void 0),f(this,"h",void 0),f(this,"segment",void 0),f(this,"bounds",xu()),f(this,"cssClass",void 0),f(this,"hoverClass",void 0),f(this,"geometry",void 0),this.stub=t.stub||this.getDefaultStubs(),this.sourceStub=Array.isArray(this.stub)?this.stub[0]:this.stub,this.targetStub=Array.isArray(this.stub)?this.stub[1]:this.stub,this.gap=t.gap||0,this.sourceGap=Array.isArray(this.gap)?this.gap[0]:this.gap,this.targetGap=Array.isArray(this.gap)?this.gap[1]:this.gap,this.maxStub=Math.max(this.sourceStub,this.targetStub),this.cssClass=t.cssClass||"",this.hoverClass=t.hoverClass||""}return V(e,[{key:"getTypeDescriptor",value:function(){return"connector"}},{key:"getIdPrefix",value:function(){return"_jsplumb_connector"}},{key:"setGeometry",value:function(t,r){this.geometry=t,this.edited=t!=null&&!r}},{key:"exportGeometry",value:function(){return this.geometry}},{key:"importGeometry",value:function(t){return this.geometry=t,!0}},{key:"resetGeometry",value:function(){this.geometry=null,this.edited=!1}},{key:"transformAnchorPlacement",value:function(t,r,i){return{x:t.x,y:t.y,ox:t.ox,oy:t.oy,curX:t.curX+r,curY:t.curY+i}}},{key:"resetBounds",value:function(){this.bounds=xu()}},{key:"findSegmentForPoint",value:function(t,r){for(var i={d:1/0,s:null,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null,index:null,connectorLocation:null},o=0;o<this.segments.length;o++){var s=this.segments[o].findClosestPointOnPath(t,r);s.d<i.d&&(i.d=s.d,i.l=s.l,i.x=s.x,i.y=s.y,i.s=this.segments[o],i.x1=s.x1,i.x2=s.x2,i.y1=s.y1,i.y2=s.y2,i.index=o,i.connectorLocation=this.segmentProportions[o][0]+s.l*(this.segmentProportions[o][1]-this.segmentProportions[o][0]))}return i}},{key:"lineIntersection",value:function(t,r,i,o){for(var s=[],a=0;a<this.segments.length;a++)s.push.apply(s,this.segments[a].lineIntersection(t,r,i,o));return s}},{key:"boxIntersection",value:function(t,r,i,o){for(var s=[],a=0;a<this.segments.length;a++)s.push.apply(s,this.segments[a].boxIntersection(t,r,i,o));return s}},{key:"boundingBoxIntersection",value:function(t){for(var r=[],i=0;i<this.segments.length;i++)r.push.apply(r,this.segments[i].boundingBoxIntersection(t));return r}},{key:"_updateSegmentProportions",value:function(){for(var t=0,r=0;r<this.segments.length;r++){var i=this.segments[r].getLength();this.segmentProportionalLengths[r]=i/this.totalLength,this.segmentProportions[r]=[t,t+=i/this.totalLength]}}},{key:"_findSegmentForLocation",value:function(t,r){var i,o,s;if(r&&(t=t>0?t/this.totalLength:(this.totalLength+t)/this.totalLength),t===1)i=this.segments.length-1,s=1;else if(t===0)s=0,i=0;else if(t>=.5){for(i=0,s=0,o=this.segmentProportions.length-1;o>-1;o--)if(this.segmentProportions[o][1]>=t&&this.segmentProportions[o][0]<=t){i=o,s=(t-this.segmentProportions[o][0])/this.segmentProportionalLengths[o];break}}else for(i=this.segmentProportions.length-1,s=1,o=0;o<this.segmentProportions.length;o++)if(this.segmentProportions[o][1]>=t){i=o,s=(t-this.segmentProportions[o][0])/this.segmentProportionalLengths[o];break}return{segment:this.segments[i],proportion:s,index:i}}},{key:"_addSegment",value:function(t,r){if(!(r.x1===r.x2&&r.y1===r.y2)){var i=new t(r);this.segments.push(i),this.totalLength+=i.getLength(),this.updateBounds(i)}}},{key:"_clearSegments",value:function(){this.totalLength=0,this.segments.length=0,this.segmentProportions.length=0,this.segmentProportionalLengths.length=0}},{key:"getLength",value:function(){return this.totalLength}},{key:"_prepareCompute",value:function(t){this.strokeWidth=t.strokeWidth;var r=t.sourcePos.curX,i=t.targetPos.curX,o=t.sourcePos.curY,s=t.targetPos.curY,a=cg({x:r,y:o},{x:i,y:s}),l=i<r,c=s<o,u=[t.sourcePos.ox,t.sourcePos.oy],d=[t.targetPos.ox,t.targetPos.oy],p=l?i:r,h=c?s:o,g=Math.abs(i-r),y=Math.abs(s-o),v=u[0]===0&&u[1]===0,_=d[0]===0&&d[1]===0;if(v||_){var b=g>y?0:1,E=[1,0][b],C=b===0?r:o,T=b===0?i:s;v&&(u[b]=C>T?-1:1,u[E]=0),_&&(d[b]=C>T?1:-1,d[E]=0)}var I=l?g+this.sourceGap*u[0]:this.sourceGap*u[0],S=c?y+this.sourceGap*u[1]:this.sourceGap*u[1],D=l?this.targetGap*d[0]:g+this.targetGap*d[0],N=c?this.targetGap*d[1]:y+this.targetGap*d[1],O=u[0]*d[0]+u[1]*d[1],Y={sx:I,sy:S,tx:D,ty:N,xSpan:Math.abs(D-I),ySpan:Math.abs(N-S),mx:(I+D)/2,my:(S+N)/2,so:u,to:d,x:p,y:h,w:g,h:y,segment:a,startStubX:I+u[0]*this.sourceStub,startStubY:S+u[1]*this.sourceStub,endStubX:D+d[0]*this.targetStub,endStubY:N+d[1]*this.targetStub,isXGreaterThanStubTimes2:Math.abs(I-D)>this.sourceStub+this.targetStub,isYGreaterThanStubTimes2:Math.abs(S-N)>this.sourceStub+this.targetStub,opposite:O===-1,perpendicular:O===0,orthogonal:O===1,sourceAxis:u[0]===0?"y":"x",points:[p,h,g,y,I,S,D,N],stubs:[this.sourceStub,this.targetStub]};return Y.anchorOrientation=Y.opposite?"opposite":Y.orthogonal?"orthogonal":"perpendicular",Y}},{key:"updateBounds",value:function(t){var r=t.extents;this.bounds.xmin=Math.min(this.bounds.xmin,r.xmin),this.bounds.xmax=Math.max(this.bounds.xmax,r.xmax),this.bounds.ymin=Math.min(this.bounds.ymin,r.ymin),this.bounds.ymax=Math.max(this.bounds.ymax,r.ymax)}},{key:"dumpSegmentsToConsole",value:function(){Le("SEGMENTS:");for(var t=0;t<this.segments.length;t++)Le(this.segments[t].type,""+this.segments[t].getLength(),""+this.segmentProportions[t])}},{key:"pointOnPath",value:function(t,r){var i=this._findSegmentForLocation(t,r);return i.segment&&i.segment.pointOnPath(i.proportion,!1)||{x:0,y:0}}},{key:"gradientAtPoint",value:function(t,r){var i=this._findSegmentForLocation(t,r);return i.segment&&i.segment.gradientAtPoint(i.proportion,!1)||0}},{key:"pointAlongPathFrom",value:function(t,r,i){var o=this._findSegmentForLocation(t,i);return o.segment&&o.segment.pointAlongPathFrom(o.proportion,r,!1)||{x:0,y:0}}},{key:"compute",value:function(t){this.paintInfo=this._prepareCompute(t),this._clearSegments(),this._compute(this.paintInfo,t),this.x=this.paintInfo.points[0],this.y=this.paintInfo.points[1],this.w=this.paintInfo.points[2],this.h=this.paintInfo.points[3],this.segment=this.paintInfo.segment,this._updateSegmentProportions()}},{key:"setAnchorOrientation",value:function(t,r){}}]),e}(),BN=20,HN=20,ss=function(e){oe(t,e);var n=se(t);function t(r,i,o){var s;return R(this,t),s=n.call(this,r,i,o),s.instance=r,s.component=i,f(m(s),"width",void 0),f(m(s),"length",void 0),f(m(s),"foldback",void 0),f(m(s),"direction",void 0),f(m(s),"location",.5),f(m(s),"paintStyle",void 0),f(m(s),"type",t.type),f(m(s),"cachedDimensions",void 0),o=o||{},s.width=o.width||BN,s.length=o.length||HN,s.direction=(o.direction||1)<0?-1:1,s.foldback=o.foldback||.623,s.paintStyle=o.paintStyle||{strokeWidth:1},s.location=o.location==null?s.location:Array.isArray(o.location)?o.location[0]:o.location,s}return V(t,[{key:"draw",value:function(i,o,s){if(i instanceof Wu){var a=i,l,c,u,d,p;if(this.location>1||this.location<0){var h=this.location<0?1:0;l=a.pointAlongPathFrom(h,this.location,!1),c=a.pointAlongPathFrom(h,this.location-this.direction*this.length/2,!1),u=Pr(l,c,this.length)}else if(this.location===1){if(l=a.pointOnPath(this.location),c=a.pointAlongPathFrom(this.location,-this.length),u=Pr(l,c,this.length),this.direction===-1){var g=u;u=l,l=g}}else if(this.location===0){if(u=a.pointOnPath(this.location),c=a.pointAlongPathFrom(this.location,this.length),l=Pr(u,c,this.length),this.direction===-1){var y=u;u=l,l=y}}else l=a.pointAlongPathFrom(this.location,this.direction*this.length/2),c=a.pointOnPath(this.location),u=Pr(l,c,this.length);d=bO(l,u,this.width),p=Pr(l,u,this.foldback*this.length);var v={hxy:l,tail:d,cxy:p},_=this.paintStyle.stroke||o.stroke,b=this.paintStyle.fill||o.stroke,E=this.paintStyle.strokeWidth||o.strokeWidth;return{component:i,d:v,"stroke-width":E,stroke:_,fill:b,xmin:Math.min(l.x,d[0].x,d[1].x),xmax:Math.max(l.x,d[0].x,d[1].x),ymin:Math.min(l.y,d[0].y,d[1].y),ymax:Math.max(l.y,d[0].y,d[1].y)}}}},{key:"updateFrom",value:function(i){}}]),t}($u);f(ss,"type","Arrow");function Wp(e){return e.type===ss.type}Hr.register(ss.type,ss);var Fu=function(e){oe(t,e);var n=se(t);function t(r,i,o){var s;return R(this,t),s=n.call(this,r,i,o),s.instance=r,f(m(s),"type",t.type),s.length=s.length/2,s.foldback=2,s}return t}(ss);f(Fu,"type","Diamond");function zp(e){return e.type===Fu.type}Hr.register(Fu.type,Fu);var mg=function(e){oe(t,e);var n=se(t);function t(r,i,o){var s;return R(this,t),s=n.call(this,r,i,o),s.instance=r,f(m(s),"type",t.type),s.foldback=1,s}return t}(ss);f(mg,"type","PlainArrow");function Yp(e){return e.type===mg.type}Hr.register("PlainArrow",mg);var Lu=function(e){oe(t,e);var n=se(t);function t(r,i,o){var s;return R(this,t),s=n.call(this,r,i,o),s.instance=r,s.component=i,f(m(s),"create",void 0),f(m(s),"type",t.type),s.create=o.create,s}return V(t,[{key:"updateFrom",value:function(i){}}]),t}($u);f(Lu,"type","Custom");function Di(e){return e.type===Lu.type}Hr.register(Lu.type,Lu);var GN="allowNestedGroups";var Uo="paintStyle";var UN="scope",as=function(e){oe(t,e);var n=se(t);function t(r,i){var o;return R(this,t),o=n.call(this,r,i),f(m(o),"radius",void 0),f(m(o),"defaultOffset",void 0),f(m(o),"defaultInnerRadius",void 0),f(m(o),"type",t.type),i=i||{},o.radius=i.radius||5,o.defaultOffset=.5*o.radius,o.defaultInnerRadius=o.radius/3,o}return t}(ls);f(as,"type","Dot");var $N={type:as.type,cls:as,compute:function(n,t,r,i){var o=t.curX-n.radius,s=t.curY-n.radius,a=n.radius*2,l=n.radius*2;if(i&&i.stroke){var c=i.strokeWidth||1;o-=c,s-=c,a+=c*2,l+=c*2}return n.x=o,n.y=s,n.w=a,n.h=l,[o,s,a,l,n.radius]},getParams:function(n){return{radius:n.radius}}},Op=function e(n,t){R(this,e),this.instance=n,this.el=t,f(this,"group",void 0)},WN=function(e){oe(t,e);var n=se(t);function t(r,i,o){var s;R(this,t),s=n.call(this,r,i),s.instance=r,f(m(s),"children",[]),f(m(s),"collapsed",!1),f(m(s),"droppable",void 0),f(m(s),"enabled",void 0),f(m(s),"orphan",void 0),f(m(s),"constrain",void 0),f(m(s),"proxied",void 0),f(m(s),"ghost",void 0),f(m(s),"revert",void 0),f(m(s),"prune",void 0),f(m(s),"dropOverride",void 0),f(m(s),"anchor",void 0),f(m(s),"endpoint",void 0),f(m(s),"connections",{source:[],target:[],internal:[]}),f(m(s),"manager",void 0),f(m(s),"id",void 0),f(m(s),"elId",void 0);var a=s.el;return a._isJsPlumbGroup=!0,a._jsPlumbGroup=m(s),s.elId=r.getId(i),s.orphan=o.orphan===!0,s.revert=s.orphan===!0?!1:o.revert!==!1,s.droppable=o.droppable!==!1,s.ghost=o.ghost===!0,s.enabled=o.enabled!==!1,s.prune=s.orphan!==!0&&o.prune===!0,s.constrain=s.ghost||o.constrain===!0,s.proxied=o.proxied!==!1,s.id=o.id||Ve(),s.dropOverride=o.dropOverride===!0,s.anchor=o.anchor,s.endpoint=o.endpoint,s.anchor=o.anchor,r.setAttribute(i,QE,""),s}return V(t,[{key:"contentArea",get:function(){return this.instance.getGroupContentArea(this)}},{key:"overrideDrop",value:function(i,o){return this.dropOverride&&(this.revert||this.prune||this.orphan)}},{key:"getAnchor",value:function(i,o){return this.anchor||"Continuous"}},{key:"getEndpoint",value:function(i,o){return this.endpoint||{type:as.type,options:{radius:10}}}},{key:"add",value:function(i,o){var s=this.instance.getGroupContentArea(this),a=i;if(a._jsPlumbParentGroup!=null){if(a._jsPlumbParentGroup===this)return;a._jsPlumbParentGroup.remove(i,!0,o,!1)}a._jsPlumbParentGroup=this,this.children.push(new Op(this.instance,i)),this.instance._appendElement(a,s),this.manager._updateConnectionsForGroup(this)}},{key:"resolveNode",value:function(i){return i==null?null:Qp(this.children,function(o){return o.el===i})}},{key:"remove",value:function(i,o,s,a,l){var c=this.resolveNode(i);c!=null&&this._doRemove(c,o,s,a,l)}},{key:"_doRemove",value:function(i,o,s,a,l){var c=i.el;if(delete c._jsPlumbParentGroup,$e(this.children,function(d){return d===i}),o)try{this.instance.getGroupContentArea(this).removeChild(c)}catch(d){Le("Could not remove element from Group "+d)}if(!s){var u={group:this,el:c};l&&(u.targetGroup=l),this.instance.fire(ix,u)}a||this.manager._updateConnectionsForGroup(this)}},{key:"removeAll",value:function(i,o){for(var s=0,a=this.children.length;s<a;s++){var l=this.children[0];this._doRemove(l,i,o,!0),this.instance.unmanage(l.el,!0)}this.children.length=0,this.manager._updateConnectionsForGroup(this)}},{key:"orphanAll",value:function(){for(var i={},o=0;o<this.children.length;o++){var s=this.manager.orphan(this.children[o].el,!1);i[s.id]=s.pos}return this.children.length=0,i}},{key:"addGroup",value:function(i){if(this.instance.allowNestedGroups&&i!==this){if(this.instance.groupManager.isAncestor(this,i))return!1;i.group!=null&&i.group.removeGroup(i);var o=this.instance.getId(i.el),s=this.instance.getManagedElements()[o];s.group=this.elId;var a=this.instance.getOffsetRelativeToRoot(i.el),l=this.collapsed?this.instance.getOffsetRelativeToRoot(this.el):this.instance.getOffsetRelativeToRoot(this.instance.getGroupContentArea(this));i.el._jsPlumbParentGroup=this,this.children.push(i),this.instance._appendElementToGroup(this,i.el),i.group=this;var c={x:a.x-l.x,y:a.y-l.y};return this.instance.setPosition(i.el,c),this.instance.fire(ox,{parent:this,child:i}),!0}else return!1}},{key:"removeGroup",value:function(i){if(i.group===this){var o=i.el,s=this.instance.getGroupContentArea(this);s===o.parentNode&&s.removeChild(i.el);var a=this.instance.getId(i.el),l=this.instance.getManagedElements()[a];l&&delete l.group,this.children=this.children.filter(function(c){return c.id!==i.id}),delete i.group,delete o._jsPlumbParentGroup,this.instance.fire(sx,{parent:this,child:i})}}},{key:"getGroups",value:function(){return this.children.filter(function(i){return i.constructor===t})}},{key:"getNodes",value:function(){return this.children.filter(function(i){return i.constructor===Op})}},{key:"collapseParent",get:function(){var i=null;if(this.group==null)return null;for(var o=this.group;o!=null;)o.collapsed&&(i=o),o=o.group;return i}}]),t}(Op),zN=function(){function e(n){var t=this;R(this,e),this.instance=n,f(this,"groupMap",{}),f(this,"_connectionSourceMap",{}),f(this,"_connectionTargetMap",{}),n.bind(nb,function(r){var i=t.getGroupFor(r.source),o=t.getGroupFor(r.target);i!=null&&o!=null&&i===o?(t._connectionSourceMap[r.connection.id]=i,t._connectionTargetMap[r.connection.id]=i,ya(i.connections.internal,r.connection)):(i!=null&&(r.target._jsPlumbGroup===i?ya(i.connections.internal,r.connection):ya(i.connections.source,r.connection),t._connectionSourceMap[r.connection.id]=i),o!=null&&(r.source._jsPlumbGroup===o?ya(o.connections.internal,r.connection):ya(o.connections.target,r.connection),t._connectionTargetMap[r.connection.id]=o))}),n.bind(ig,function(r){t._cleanupDetachedConnection(r.connection)}),n.bind(ib,function(r){var i=r.originalEndpoint.element,o=t.getGroupFor(i),s=r.connection.endpoints[r.index],a=s.element,l=t.getGroupFor(a),c=r.index===0?t._connectionSourceMap:t._connectionTargetMap,u=r.index===0?t._connectionTargetMap:t._connectionSourceMap;l!=null?(c[r.connection.id]=l,r.connection.source===r.connection.target&&(u[r.connection.id]=l)):(delete c[r.connection.id],r.connection.source===r.connection.target&&delete u[r.connection.id]),o!=null&&t._updateConnectionsForGroup(o),l!=null&&t._updateConnectionsForGroup(l)})}return V(e,[{key:"_cleanupDetachedConnection",value:function(t){t.proxies.length=0;var r=this._connectionSourceMap[t.id],i;r!=null&&(i=function(s){return s.id===t.id},$e(r.connections.source,i),$e(r.connections.target,i),$e(r.connections.internal,i),delete this._connectionSourceMap[t.id]),r=this._connectionTargetMap[t.id],r!=null&&(i=function(s){return s.id===t.id},$e(r.connections.source,i),$e(r.connections.target,i),$e(r.connections.internal,i),delete this._connectionTargetMap[t.id])}},{key:"addGroup",value:function(t){var r=t.el;if(this.groupMap[t.id]!=null)throw new Error("cannot create Group ["+t.id+"]; a Group with that ID exists");if(r._isJsPlumbGroup!=null)throw new Error("cannot create Group ["+t.id+"]; the given element is already a Group");var i=new WN(this.instance,t.el,t);return this.groupMap[i.id]=i,t.collapsed&&this.collapseGroup(i),this.instance.manage(i.el),this.instance.addClass(i.el,Ea),i.manager=this,this._updateConnectionsForGroup(i),this.instance.fire(JA,{group:i}),i}},{key:"getGroup",value:function(t){var r=t;if(De(t)&&(r=this.groupMap[t],r==null))throw new Error("No such group ["+t+"]");return r}},{key:"getGroupFor",value:function(t){for(var r=t,i=this.instance.getContainer(),o=!1,s=null;!o;)r==null||r===i?o=!0:r._jsPlumbParentGroup?(s=r._jsPlumbParentGroup,o=!0):r=r.parentNode;return s}},{key:"getGroups",value:function(){var t=[];for(var r in this.groupMap)t.push(this.groupMap[r]);return t}},{key:"removeGroup",value:function(t,r,i,o){var s=this,a=this.getGroup(t);this.expandGroup(a,!0);var l={};return P(a.children,function(c){var u=s.instance.getManagedElements()[s.instance.getId(c.el)];u&&delete u.group}),r?(P(a.getGroups(),function(c){return s.removeGroup(c,r,i)}),a.removeAll(i,o)):(a.group&&P(a.children,function(c){return a.group.add(c.el)}),l=a.orphanAll()),a.group&&a.group.removeGroup(a),this.instance.unmanage(a.el,!0),delete this.groupMap[a.id],this.instance.fire(rx,{group:a}),l}},{key:"removeAllGroups",value:function(t,r,i){for(var o in this.groupMap)this.removeGroup(this.groupMap[o],t,r,i)}},{key:"forEach",value:function(t){for(var r in this.groupMap)t(this.groupMap[r])}},{key:"orphan",value:function(t,r){var i=t;if(i._jsPlumbParentGroup){var o=i._jsPlumbParentGroup,s=this.instance.getId(i),a=this.instance.getOffset(t);return r!==!0&&o.group?this.instance._appendElementToGroup(o.group,t):this.instance._appendElementToContainer(t),this.instance.setPosition(t,a),delete i._jsPlumbParentGroup,{id:s,pos:a}}}},{key:"_updateConnectionsForGroup",value:function(t){var r=this;t.connections.source.length=0,t.connections.target.length=0,t.connections.internal.length=0;var i=t.children.slice().map(function(p){return p.el}),o=[];if(P(i,function(p){Array.prototype.push.apply(o,r.instance.getSelector(p,ye))}),Array.prototype.push.apply(i,o),i.length>0){var s=this.instance.getConnections({source:i,scope:Fr},!0),a=this.instance.getConnections({target:i,scope:Fr},!0),l={},c,u,d=function(h){for(var g=0;g<h.length;g++)l[h[g].id]||(l[h[g].id]=!0,c=r.getGroupFor(h[g].source),u=r.getGroupFor(h[g].target),h[g].source===t.el&&u===t||h[g].target===t.el&&c===t?t.connections.internal.push(h[g]):c===t?(u!==t?t.connections.source.push(h[g]):t.connections.internal.push(h[g]),r._connectionSourceMap[h[g].id]=t):u===t&&(t.connections.target.push(h[g]),r._connectionTargetMap[h[g].id]=t))};d(s),d(a)}}},{key:"_collapseConnection",value:function(t,r,i){var o=t.endpoints[r===0?1:0].element;if(o._jsPlumbParentGroup&&!o._jsPlumbParentGroup.proxied&&o._jsPlumbParentGroup.collapsed)return!1;var s=t.endpoints[0].element,a=s._jsPlumbParentGroup,l=a!=null?a.collapseParent||a:null,c=t.endpoints[1].element,u=c._jsPlumbParentGroup,d=u!=null?u.collapseParent||u:null;if(l==null||d==null||l.id!==d.id){var p=i.el;return this.instance.getId(p),this.instance.proxyConnection(t,r,p,function(h,g){return i.getEndpoint(h,g)},function(h,g){return i.getAnchor(h,g)}),!0}else return!1}},{key:"_expandConnection",value:function(t,r,i){this.instance.unproxyConnection(t,r)}},{key:"isElementDescendant",value:function(t,r){for(var i=this.instance.getContainer(),o=!1;!o;){if(t==null||t===i)return!1;if(t===r)return!0;t=t.parentNode}}},{key:"collapseGroup",value:function(t){var r=this,i=this.getGroup(t);if(!(i==null||i.collapsed)){var o=i.el;if(i.collapseParent==null){if(this.instance.setGroupVisible(i,!1),i.collapsed=!0,this.instance.removeClass(o,Ea),this.instance.addClass(o,du),i.proxied){var s=new Set,a=function(c,u){for(var d=0;d<c.length;d++){var p=c[d];r._collapseConnection(p,u,i)===!0&&s.add(p.id)}};a(i.connections.source,0),a(i.connections.target,1),P(i.getGroups(),function(l){r.cascadeCollapse(i,l,s)})}this.instance.revalidate(o),this.repaintGroup(i),this.instance.fire(ex,{group:i})}else i.collapsed=!0,this.instance.removeClass(o,Ea),this.instance.addClass(o,du)}}},{key:"cascadeCollapse",value:function(t,r,i){var o=this;if(t.proxied){var s=function(l,c){for(var u=0;u<l.length;u++){var d=l[u];i.has(d.id)||o._collapseConnection(d,c,t)===!0&&i.add(d.id)}};s(r.connections.source,0),s(r.connections.target,1)}P(r.getGroups(),function(a){o.cascadeCollapse(t,a,i)})}},{key:"expandGroup",value:function(t,r){var i=this,o=this.getGroup(t);if(o!=null){var s=o.el;if(o.collapseParent==null){if(this.instance.setGroupVisible(o,!0),o.collapsed=!1,this.instance.addClass(s,Ea),this.instance.removeClass(s,du),o.proxied){var a=function(u,d){for(var p=0;p<u.length;p++){var h=u[p];i._expandConnection(h,d,o)}};a(o.connections.source,0),a(o.connections.target,1);var l=function c(u,d){if(d||u.collapsed){var p=function(g,y){for(var v=0;v<g.length;v++){var _=g[v];i._collapseConnection(_,y,u.collapseParent||u)}};p(u.connections.source,0),p(u.connections.target,1),P(u.connections.internal,function(h){return h.setVisible(!1)}),P(u.getGroups(),function(h){return c(h,!0)})}else i.expandGroup(u,!0)};P(o.getGroups(),l)}this.instance.revalidate(s),this.repaintGroup(o),r||this.instance.fire(tx,{group:o})}else o.collapsed=!1,this.instance.addClass(s,Ea),this.instance.removeClass(s,du)}}},{key:"toggleGroup",value:function(t){t=this.getGroup(t),t!=null&&(t.collapsed?this.expandGroup(t):this.collapseGroup(t))}},{key:"repaintGroup",value:function(t){for(var r=this.getGroup(t),i=r.children,o=0;o<i.length;o++)this.instance.revalidate(i[o].el)}},{key:"addToGroup",value:function(t,r){var i=this,o=this.getGroup(t);if(o){for(var s=o.el,a=function(p){var h=p,g=h._isJsPlumbGroup!=null,y=h._jsPlumbGroup,v=h._jsPlumbParentGroup;if(v!==o){var _=i.instance.manage(p),b=i.instance.getOffset(p),E=o.collapsed?i.instance.getOffsetRelativeToRoot(s):i.instance.getOffset(i.instance.getGroupContentArea(o));_.group=o.elId,v!=null&&(v.remove(p,!1,r,!1,o),i._updateConnectionsForGroup(v)),g?o.addGroup(y):o.add(p,r);var C=function(D,N){var O=N===0?1:0;D.each(function(Y){Y.setVisible(!1),Y.endpoints[O].element._jsPlumbGroup===o?(Y.endpoints[O].setVisible(!1),i._expandConnection(Y,O,o)):(Y.endpoints[N].setVisible(!1),i._collapseConnection(Y,N,o))})};o.collapsed&&(C(i.instance.select({source:p}),0),C(i.instance.select({target:p}),1)),i.instance.getId(p);var T={x:b.x-E.x,y:b.y-E.y};if(i.instance.setPosition(p,T),i._updateConnectionsForGroup(o),i.instance.revalidate(p),!r){var I={group:o,el:p,pos:T};v&&(I.sourceGroup=v),i.instance.fire(nx,I)}}},l=arguments.length,c=new Array(l>2?l-2:0),u=2;u<l;u++)c[u-2]=arguments[u];P(c,a)}}},{key:"removeFromGroup",value:function(t,r){var i=this,o=this.getGroup(t);if(o){for(var s=function(d){if(o.collapsed){var p=function(y,v){for(var _=0;_<y.length;_++){var b=y[_];if(b.proxies){for(var E=0;E<b.proxies.length;E++)if(b.proxies[E]!=null){var C=b.proxies[E].originalEp.element;(C===d||i.isElementDescendant(C,d))&&i._expandConnection(b,v,o)}}}};p(o.connections.source.slice(),0),p(o.connections.target.slice(),1)}o.remove(d,null,r);var h=i.instance.getManagedElements()[i.instance.getId(d)];h&&delete h.group},a=arguments.length,l=new Array(a>2?a-2:0),c=2;c<a;c++)l[c-2]=arguments[c];P(l,s)}}},{key:"getAncestors",value:function(t){for(var r=[],i=t.group;i!=null;)r.push(i),i=i.group;return r}},{key:"isAncestor",value:function(t,r){return t==null||r==null?!1:this.getAncestors(t).indexOf(r)!==-1}},{key:"getDescendants",value:function(t){var r=[],i=function o(s){var a=s.getGroups();r.push.apply(r,es(a)),P(a,o)};return i(t),r}},{key:"isDescendant",value:function(t,r){return t==null||r==null?!1:this.getDescendants(r).indexOf(t)!==-1}},{key:"reset",value:function(){this._connectionSourceMap={},this._connectionTargetMap={},this.groupMap={}}}]),e}(),kb=function(){function e(n,t){R(this,e),this.instance=n,this.entries=t}return V(e,[{key:"length",get:function(){return this.entries.length}},{key:"each",value:function(t){return P(this.entries,function(r){return t(r)}),this}},{key:"get",value:function(t){return this.entries[t]}},{key:"addClass",value:function(t,r){return this.each(function(i){return i.addClass(t,r)}),this}},{key:"removeClass",value:function(t,r){return this.each(function(i){return i.removeClass(t,r)}),this}},{key:"removeAllOverlays",value:function(){return this.each(function(t){return t.removeAllOverlays()}),this}},{key:"setLabel",value:function(t){return this.each(function(r){return r.setLabel(t)}),this}},{key:"clear",value:function(){return this.entries.length=0,this}},{key:"map",value:function(t){var r=[];return this.each(function(i){return r.push(t(i))}),r}},{key:"addOverlay",value:function(t){return this.each(function(r){return r.addOverlay(t)}),this}},{key:"removeOverlay",value:function(t){return this.each(function(r){return r.removeOverlay(t)}),this}},{key:"removeOverlays",value:function(){return this.each(function(t){return t.removeOverlays()}),this}},{key:"showOverlay",value:function(t){return this.each(function(r){return r.showOverlay(t)}),this}},{key:"hideOverlay",value:function(t){return this.each(function(r){return r.hideOverlay(t)}),this}},{key:"setPaintStyle",value:function(t){return this.each(function(r){return r.setPaintStyle(t)}),this}},{key:"setHoverPaintStyle",value:function(t){return this.each(function(r){return r.setHoverPaintStyle(t)}),this}},{key:"setSuspendEvents",value:function(t){return this.each(function(r){return r.setSuspendEvents(t)}),this}},{key:"setParameter",value:function(t,r){return this.each(function(i){return i.parameters[t]=r}),this}},{key:"setParameters",value:function(t){return this.each(function(r){return r.parameters=t}),this}},{key:"setVisible",value:function(t){return this.each(function(r){return r.setVisible(t)}),this}},{key:"addType",value:function(t){return this.each(function(r){return r.addType(t)}),this}},{key:"toggleType",value:function(t){return this.each(function(r){return r.toggleType(t)}),this}},{key:"removeType",value:function(t){return this.each(function(r){return r.removeType(t)}),this}},{key:"bind",value:function(t,r){return this.each(function(i){return i.bind(t,r)}),this}},{key:"unbind",value:function(t,r){return this.each(function(i){return i.unbind(t,r)}),this}},{key:"setHover",value:function(t){var r=this;return this.each(function(i){return r.instance.setHover(i,t)}),this}}]),e}(),YN=function(e){oe(t,e);var n=se(t);function t(){return R(this,t),n.apply(this,arguments)}return V(t,[{key:"setEnabled",value:function(i){return this.each(function(o){return o.enabled=i}),this}},{key:"setAnchor",value:function(i){return this.each(function(o){return o.setAnchor(i)}),this}},{key:"deleteEveryConnection",value:function(){return this.each(function(i){return i.deleteEveryConnection()}),this}},{key:"deleteAll",value:function(){var i=this;return this.each(function(o){return i.instance.deleteEndpoint(o)}),this.clear(),this}}]),t}(kb),qN=function(e){oe(t,e);var n=se(t);function t(){return R(this,t),n.apply(this,arguments)}return V(t,[{key:"setDetachable",value:function(i){return this.each(function(o){return o.setDetachable(i)}),this}},{key:"setReattach",value:function(i){return this.each(function(o){return o.setReattach(i)}),this}},{key:"setConnector",value:function(i){return this.each(function(o){return o._setConnector(i)}),this}},{key:"deleteAll",value:function(){var i=this;this.each(function(o){return i.instance.deleteConnection(o)}),this.clear()}},{key:"repaint",value:function(){var i=this;return this.each(function(o){return i.instance._paintConnection(o)}),this}}]),t}(kb),KN=function e(){R(this,e),f(this,"affectedElements",new Set)};function EE(){return{x:0,y:0,w:0,h:0,r:0,c:{x:0,y:0},x2:0,y2:0,t:{x:0,y:0,c:{x:0,y:0},w:0,h:0,r:0,x2:0,y2:0,cr:0,sr:0},dirty:!0}}function ZN(e,n,t,r,i){var o={x:e+t/2,y:n+r/2},s=Math.cos(i/360*Math.PI*2),a=Math.sin(i/360*Math.PI*2),l=function(E,C){return{x:o.x+Math.round((E-o.x)*s-(C-o.y)*a),y:o.y+Math.round((C-o.y)*s-(E-o.x)*a)}},c=l(e,n),u=l(e+t,n),d=l(e+t,n+r),p=l(e,n+r),h=l(e+t/2,n+r/2),g=Math.min(c.x,u.x,d.x,p.x),y=Math.max(c.x,u.x,d.x,p.x),v=Math.min(c.y,u.y,d.y,p.y),_=Math.max(c.y,u.y,d.y,p.y);return{x:g,y:v,w:y-g,h:_-v,c:h,r:i,x2:y,y2:_,cr:s,sr:a}}var Vu=function(n,t){var r=0;return t[1]>n[1]?r=-1:t[1]<n[1]&&(r=1),r},bE=function(n,t){return Vu(n,t)*-1};function gu(e,n,t,r){AA([e,n],t,Vu,r)}function wi(e,n){var t=xi(n,function(r){return r[0]===e});t>-1&&n.splice(t,1)}var XN=function(e){oe(t,e);var n=se(t);function t(r){var i;return R(this,t),i=n.call(this),i.instance=r,f(m(i),"_currentTransaction",null),f(m(i),"_sortedElements",{xmin:[],xmax:[],ymin:[],ymax:[]}),f(m(i),"_elementMap",new Map),f(m(i),"_transformedElementMap",new Map),f(m(i),"_bounds",{minx:0,maxx:0,miny:0,maxy:0}),i}return V(t,[{key:"_updateBounds",value:function(i,o,s){o!=null&&(wi(i,this._sortedElements.xmin),wi(i,this._sortedElements.xmax),wi(i,this._sortedElements.ymin),wi(i,this._sortedElements.ymax),gu(i,o.t.x,this._sortedElements.xmin,!1),gu(i,o.t.x+o.t.w,this._sortedElements.xmax,!0),gu(i,o.t.y,this._sortedElements.ymin,!1),gu(i,o.t.y+o.t.h,this._sortedElements.ymax,!0),s!==!0&&this._recalculateBounds())}},{key:"_recalculateBounds",value:function(){this._bounds.minx=this._sortedElements.xmin.length>0?this._sortedElements.xmin[0][1]:0,this._bounds.maxx=this._sortedElements.xmax.length>0?this._sortedElements.xmax[0][1]:0,this._bounds.miny=this._sortedElements.ymin.length>0?this._sortedElements.ymin[0][1]:0,this._bounds.maxy=this._sortedElements.ymax.length>0?this._sortedElements.ymax[0][1]:0}},{key:"recomputeBounds",value:function(){var i=this;this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.forEach(function(o,s){i._sortedElements.xmin.push([s,o.t.x]),i._sortedElements.xmax.push([s,o.t.x+o.t.w]),i._sortedElements.ymin.push([s,o.t.y]),i._sortedElements.ymax.push([s,o.t.y+o.t.h])}),this._sortedElements.xmin.sort(Vu),this._sortedElements.ymin.sort(Vu),this._sortedElements.xmax.sort(bE),this._sortedElements.ymax.sort(bE),this._recalculateBounds()}},{key:"_finaliseUpdate",value:function(i,o,s){o.t=ZN(o.x,o.y,o.w,o.h,o.r),this._transformedElementMap.set(i,o.t),s!==!0&&this._updateBounds(i,o,s)}},{key:"shouldFireEvent",value:function(i,o,s){return!0}},{key:"startTransaction",value:function(){if(this._currentTransaction!=null)throw new Error("Viewport: cannot start transaction; a transaction is currently active.");this._currentTransaction=new KN}},{key:"endTransaction",value:function(){var i=this;this._currentTransaction!=null&&(this._currentTransaction.affectedElements.forEach(function(o){var s=i.getPosition(o);i._finaliseUpdate(o,s,!0)}),this.recomputeBounds(),this._currentTransaction=null)}},{key:"updateElements",value:function(i){var o=this;P(i,function(s){return o.updateElement(s.id,s.x,s.y,s.width,s.height,s.rotation)})}},{key:"updateElement",value:function(i,o,s,a,l,c,u){var d=j0(this._elementMap,i,EE);return d.dirty=o==null&&d.x==null||s==null&&d.y==null||a==null&&d.w==null||l==null&&d.h==null,o!=null&&(d.x=o),s!=null&&(d.y=s),a!=null&&(d.w=a),l!=null&&(d.h=l),c!=null&&(d.r=c||0),d.c.x=d.x+d.w/2,d.c.y=d.y+d.h/2,d.x2=d.x+d.w,d.y2=d.y+d.h,this._currentTransaction==null?this._finaliseUpdate(i,d,u):this._currentTransaction.affectedElements.add(i),d}},{key:"refreshElement",value:function(i,o){var s=this.instance.getManagedElements(),a=s[i]?s[i].el:null;if(a!=null){var l=this.getSize(a),c=this.getOffset(a);return this.updateElement(i,c.x,c.y,l.w,l.h,null,o)}else return null}},{key:"getSize",value:function(i){return this.instance.getSize(i)}},{key:"getOffset",value:function(i){return this.instance.getOffset(i)}},{key:"registerElement",value:function(i,o){return this.updateElement(i,0,0,0,0,0,o)}},{key:"addElement",value:function(i,o,s,a,l,c){return this.updateElement(i,o,s,a,l,c)}},{key:"rotateElement",value:function(i,o){var s=j0(this._elementMap,i,EE);return s.r=o||0,this._finaliseUpdate(i,s),s}},{key:"getBoundsWidth",value:function(){return this._bounds.maxx-this._bounds.minx}},{key:"getBoundsHeight",value:function(){return this._bounds.maxy-this._bounds.miny}},{key:"getX",value:function(){return this._bounds.minx}},{key:"getY",value:function(){return this._bounds.miny}},{key:"setSize",value:function(i,o,s){if(this._elementMap.has(i))return this.updateElement(i,null,null,o,s,null)}},{key:"setPosition",value:function(i,o,s){if(this._elementMap.has(i))return this.updateElement(i,o,s,null,null,null)}},{key:"reset",value:function(){this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.clear(),this._transformedElementMap.clear(),this._recalculateBounds()}},{key:"remove",value:function(i){wi(i,this._sortedElements.xmin),wi(i,this._sortedElements.xmax),wi(i,this._sortedElements.ymin),wi(i,this._sortedElements.ymax),this._elementMap.delete(i),this._transformedElementMap.delete(i),this._recalculateBounds()}},{key:"getPosition",value:function(i){return this._elementMap.get(i)}},{key:"getElements",value:function(){return this._elementMap}},{key:"isEmpty",value:function(){return this._elementMap.size===0}}]),t}(ja),$o;function QN(e,n,t,r,i){for(var o=t?e.w:e.h,s=t?e.h:e.w,a=[],l=o/(n.length+1),c=0;c<n.length;c++){var u=(c+1)*l,d=r*s;i&&(u=o-u);var p=t?u:d,h=e.x+p,g=p/e.w,y=t?d:u,v=e.y+y,_=y/e.h;if(e.r!==0&&e.r!=null){var b=Iu({x:h,y:v},e.c,e.r);h=b.x,v=b.y}a.push({x:h,y:v,xLoc:g,yLoc:_,c:n[c].c})}return a}function CE(e,n){return n.theta-e.theta}function DE(e,n){var t=e.theta<0?-Math.PI-e.theta:Math.PI-e.theta,r=n.theta<0?-Math.PI-n.theta:Math.PI-n.theta;return t-r}var JN=($o={},f($o,Te,DE),f($o,et,CE),f($o,yt,CE),f($o,at,DE),$o);function Ti(e){return e.isContinuous===!0}function wE(e){return e.isContinuous===!0}function eR(e){return e.locations.length>1}function TE(e){return[e.currentLocation,e.locations[e.currentLocation]]}var tR=function(){function e(n){var t=this;R(this,e),this.instance=n,f(this,"anchorLists",new Map),f(this,"anchorLocations",new Map),n.bind(ig,function(r){r.sourceEndpoint._anchor.isContinuous&&t._removeEndpointFromAnchorLists(r.sourceEndpoint),r.targetEndpoint._anchor.isContinuous&&t._removeEndpointFromAnchorLists(r.targetEndpoint)}),n.bind(rb,function(r){t._removeEndpointFromAnchorLists(r)})}return V(e,[{key:"getAnchorOrientation",value:function(t){var r=this.anchorLocations.get(t.id);return r?[r.ox,r.oy]:[0,0]}},{key:"_distance",value:function(t,r,i,o,s,a,l){var c=o.x+t.x*s.w,u=o.y+t.y*s.h,d=o.x+s.w/2,p=o.y+s.h/2;if(a!=null&&a.length>0){var h=this.instance._applyRotations([c,u,0,0],a);c=h.x,u=h.y}return Math.sqrt(Math.pow(r-c,2)+Math.pow(i-u,2))+Math.sqrt(Math.pow(d-c,2)+Math.pow(p-u,2))}},{key:"_anchorSelector",value:function(t,r,i,o,s,a,l){for(var c=i.x+o.w/2,u=i.y+o.h/2,d=-1,p=1/0,h=0;h<l.length;h++){var g=this._distance(l[h],c,u,t,r,s,a);g<p&&(d=h+0,p=g)}return[d,l[d]]}},{key:"_floatingAnchorCompute",value:function(t,r){var i=r.xy,o={curX:i.x+t.size.w/2,curY:i.y+t.size.h/2,x:0,y:0,ox:0,oy:0};return this._setComputedPosition(t,o)}},{key:"_setComputedPosition",value:function(t,r,i){return this.anchorLocations.set(t.id,r),t.computedPosition=r,i&&(t.timestamp=i),r}},{key:"_computeSingleLocation",value:function(t,r,i,o){var s,a=o.rotation,l={curX:r.x+t.x*i.w+t.offx,curY:r.y+t.y*i.h+t.offy,x:t.x,y:t.y,ox:0,oy:0};if(a!=null&&a.length>0){var c=[t.iox,t.ioy],u={x:l.curX,y:l.curY,cr:0,sr:0};P(a,function(d){u=Iu(u,d.c,d.r);var p=[Math.round(c[0]*u.cr-c[1]*u.sr),Math.round(c[1]*u.cr+c[0]*u.sr)];c=p.slice()}),t.ox=c[0],t.oy=c[1],s={curX:u.x,curY:u.y,x:t.x,y:t.y,ox:c[0],oy:c[1]}}else t.ox=t.iox,t.oy=t.ioy,s=k({ox:t.iox,oy:t.ioy},l);return s}},{key:"_singleAnchorCompute",value:function(t,r){var i=r.xy,o=r.wh,s=r.timestamp,a=this.anchorLocations.get(t.id);if(a!=null&&s&&s===t.timestamp)return a;var l=TE(t),c=yu(l,2);c[0];var u=c[1];return a=this._computeSingleLocation(u,i,o,r),this._setComputedPosition(t,a,s)}},{key:"_defaultAnchorCompute",value:function(t,r){var i;if(t.locations.length===1)return this._singleAnchorCompute(t,r);var o=r.xy,s=r.wh,a=r.txy,l=r.twh,c=TE(t),u=yu(c,2),d=u[0],p=u[1];if(t.locked||a==null||l==null)i=this._computeSingleLocation(p,o,s,r);else{var h=this._anchorSelector(o,s,a,l,r.rotation,r.tRotation,t.locations),g=yu(h,2),y=g[0],v=g[1];t.currentLocation=y,y!==d&&(t.cssClass=v.cls||t.cssClass,r.element._anchorLocationChanged(t)),i=this._computeSingleLocation(v,o,s,r)}return this._setComputedPosition(t,i,r.timestamp)}},{key:"_placeAnchors",value:function(t,r){var i=this,o=this.instance.viewport.getPosition(t),s=function(l,c,u,d,p,h){if(u.length>0)for(var g=u.sort(JN[l]),y=l===et||l===Te,v=QN(o,g,d,p,y),_=0;_<v.length;_++){var b=v[_].c,E=b.endpoints[0].elementId===t,C=E?b.endpoints[0]:b.endpoints[1];i._setComputedPosition(C._anchor,{curX:v[_].x,curY:v[_].y,x:v[_].xLoc,y:v[_].yLoc,ox:h[0],oy:h[1]})}};s(yt,o,r.bottom,!0,1,[0,1]),s(Te,o,r.top,!0,0,[0,-1]),s(at,o,r.left,!1,0,[-1,0]),s(et,o,r.right,!1,1,[1,0])}},{key:"_updateAnchorList",value:function(t,r,i,o,s,a,l,c,u,d,p){var h=o.endpoints[l],g=h.id,y=[1,0][l],v={theta:r,order:i,c:o,b:s,elId:a,epId:g},_=t[u],b=h._continuousAnchorEdge?t[h._continuousAnchorEdge]:null,E;if(b){var C=xi(b,function(D){return D.epId===g});if(C!==-1){b.splice(C,1);for(var T=0;T<b.length;T++)E=b[T].c,E.placeholder!==!0&&d.add(E),p.add(b[T].c.endpoints[l]),p.add(b[T].c.endpoints[y])}}for(var I=0;I<_.length;I++)E=_[I].c,E.placeholder!==!0&&d.add(E),p.add(_[I].c.endpoints[l]),p.add(_[I].c.endpoints[y]);{var S=c?0:_.length;_.splice(S,0,v)}h._continuousAnchorEdge=u}},{key:"_removeEndpointFromAnchorLists",value:function(t){var r=this.anchorLists.get(t.elementId),i=0;(function(o,s){if(o){var a=function(c){return c.epId===s};$e(o.top,a),$e(o.left,a),$e(o.bottom,a),$e(o.right,a),i+=o.top.length,i+=o.left.length,i+=o.bottom.length,i+=o.right.length}})(r,t.id),i===0&&this.anchorLists.delete(t.elementId),this.anchorLocations.delete(t._anchor.id)}},{key:"computeAnchorLocation",value:function(t,r){var i;return Ti(t)?i=this.anchorLocations.get(t.id)||{curX:0,curY:0,x:0,y:0,ox:0,oy:0}:wE(t)?i=this._floatingAnchorCompute(t,r):i=this._defaultAnchorCompute(t,r),t.timestamp=r.timestamp,i}},{key:"computePath",value:function(t,r){var i=this.instance.viewport.getPosition(t.sourceId),o=this.instance.viewport.getPosition(t.targetId),s=t.endpoints[0],a=t.endpoints[1],l=this.getEndpointLocation(s,{xy:i,wh:i,element:s,timestamp:r,rotation:this.instance._getRotations(t.sourceId)}),c=this.getEndpointLocation(a,{xy:o,wh:o,element:a,timestamp:r,rotation:this.instance._getRotations(t.targetId)});t.connector.resetBounds(),t.connector.compute({sourcePos:l,targetPos:c,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1],strokeWidth:t.paintStyleInUse.strokeWidth,sourceInfo:i,targetInfo:o})}},{key:"getEndpointLocation",value:function(t,r){r=r||{};var i=t._anchor,o=this.anchorLocations.get(i.id);return(o==null||r.timestamp!=null&&i.timestamp!==r.timestamp)&&(o=this.computeAnchorLocation(i,r),this._setComputedPosition(i,o,r.timestamp)),o}},{key:"getEndpointOrientation",value:function(t){return t._anchor?this.getAnchorOrientation(t._anchor):[0,0]}},{key:"setAnchorOrientation",value:function(t,r){var i=this.anchorLocations.get(t.id);i!=null&&(i.ox=r[0],i.oy=r[1])}},{key:"isDynamicAnchor",value:function(t){return t._anchor?!Ti(t._anchor)&&t._anchor.locations.length>1:!1}},{key:"isFloating",value:function(t){return t._anchor?wE(t._anchor):!1}},{key:"prepareAnchor",value:function(t){return Ia(t)}},{key:"redraw",value:function(t,r,i){var o=this,s=new Set,a=new Set,l=new Set;if(!this.instance._suspendDrawing){var c=this.instance.endpointsByElement[t]||[];r=r||Ve();for(var u={},d,p,h=0;h<c.length;h++)if(p=c[h],p.visible!==!1)if(a.add(p),d=p._anchor,p.connections.length===0)Ti(d)&&(this.anchorLists.has(t)||this.anchorLists.set(t,{top:[],right:[],bottom:[],left:[]}),this._updateAnchorList(this.anchorLists.get(t),-Math.PI/2,0,{endpoints:[p,p],placeholder:!0},!1,t,0,!1,eN(d),s,a),l.add(t));else for(var g=0;g<p.connections.length;g++){var y=p.connections[g],v=y.sourceId,_=y.targetId,b=Ti(y.endpoints[0]._anchor),E=Ti(y.endpoints[1]._anchor);if(b||E){var C=(y.endpoints[0]._anchor.faces||[]).join("-"),T=(y.endpoints[1]._anchor.faces||[]).join("-"),I=[v,C,_,T].join("-"),S=u[I],D=y.sourceId===t?1:0;b&&!this.anchorLists.has(v)&&this.anchorLists.set(v,{top:[],right:[],bottom:[],left:[]}),E&&!this.anchorLists.has(_)&&this.anchorLists.set(_,{top:[],right:[],bottom:[],left:[]});var N=this.instance.viewport.getPosition(_),O=this.instance.viewport.getPosition(v);if(_===v&&(b||E))this._updateAnchorList(this.anchorLists.get(v),-Math.PI/2,0,y,!1,_,0,!1,Te,s,a),this._updateAnchorList(this.anchorLists.get(_),-Math.PI/2,0,y,!1,v,1,!1,Te,s,a);else{var Y=this.instance._getRotations(v),M=this.instance._getRotations(_);S||(S=this._calculateOrientation(v,_,O,N,y.endpoints[0]._anchor,y.endpoints[1]._anchor,Y,M),u[I]=S),b&&this._updateAnchorList(this.anchorLists.get(v),S.theta,0,y,!1,_,0,!1,S.a[0],s,a),E&&this._updateAnchorList(this.anchorLists.get(_),S.theta2,-1,y,!0,v,1,!0,S.a[1],s,a)}b&&l.add(v),E&&l.add(_),s.add(y),(b&&D===0||E&&D===1)&&a.add(y.endpoints[D])}else{var ne=p.connections[g].endpoints[y.sourceId===t?1:0],_t=ne._anchor;if(eR(_t)){this.instance._paintEndpoint(ne,{elementWithPrecedence:t,timestamp:r}),s.add(p.connections[g]);for(var tt=0;tt<ne.connections.length;tt++)ne.connections[tt]!==p.connections[g]&&s.add(ne.connections[tt])}else s.add(p.connections[g])}}l.forEach(function(le){o._placeAnchors(le,o.anchorLists.get(le))}),a.forEach(function(le){var lt=o.instance.viewport.getPosition(le.elementId);o.instance._paintEndpoint(le,{timestamp:r,offset:lt})}),s.forEach(function(le){o.instance._paintConnection(le,{timestamp:r})})}return{c:s,e:a}}},{key:"reset",value:function(){this.anchorLocations.clear(),this.anchorLists.clear()}},{key:"setAnchor",value:function(t,r){r!=null&&(t._anchor=r)}},{key:"setConnectionAnchors",value:function(t,r){t.endpoints[0]._anchor=r[0],t.endpoints[1]._anchor=r[1]}},{key:"_calculateOrientation",value:function(t,r,i,o,s,a,l,c){var u=this,d={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"};if(t===r)return{orientation:d.IDENTITY,a:[Te,Te]};var p=Math.atan2(o.c.y-i.c.y,o.c.x-i.c.x),h=Math.atan2(i.c.y-o.c.y,i.c.x-o.c.x),g=[],y={};(function(I,S){for(var D=0;D<I.length;D++){var N;if(y[I[D]]=(N={},f(N,at,{x:S[D][0].x,y:S[D][0].c.y}),f(N,et,{x:S[D][0].x+S[D][0].w,y:S[D][0].c.y}),f(N,Te,{x:S[D][0].c.x,y:S[D][0].y}),f(N,yt,{x:S[D][0].c.x,y:S[D][0].y+S[D][0].h}),N),S[D][1]!=null&&S[D][1].length>0)for(var O in y[I[D]])y[I[D]][O]=u.instance._applyRotationsXY(y[I[D]][O],S[D][1])}})([Lp,XE],[[i,l],[o,c]]);for(var v=[Te,at,et,yt],_=0;_<v.length;_++)for(var b=0;b<v.length;b++)g.push({source:v[_],target:v[b],dist:Gp(y.source[v[_]],y.target[v[b]])});g.sort(function(I,S){if(I.dist<S.dist)return-1;if(S.dist<I.dist)return 1;var D,N=(D={},f(D,at,0),f(D,Te,1),f(D,et,2),f(D,yt,3),D),O=N[I.source],Y=N[S.source],M=N[I.target],ne=N[S.target];return O<Y?-1:Y<O?1:M<ne?-1:ne<M?1:0});for(var E=g[0].source,C=g[0].target,T=0;T<g.length&&(Ti(s)&&s.locked?E=s.currentFace:!s.isContinuous||nE(s,g[T].source)?E=g[T].source:E=null,a.isContinuous&&a.locked?C=a.currentFace:!a.isContinuous||nE(a,g[T].target)?C=g[T].target:C=null,!(E!=null&&C!=null));T++);return s.isContinuous&&this.setCurrentFace(s,E),a.isContinuous&&this.setCurrentFace(a,C),{a:[E,C],theta:p,theta2:h}}},{key:"setCurrentFace",value:function(t,r,i){t.currentFace=r,i&&t.lockedFace!=null&&(t.lockedFace=t.currentFace)}},{key:"lock",value:function(t){t.locked=!0,Ti(t)&&(t.lockedFace=t.currentFace)}},{key:"unlock",value:function(t){t.locked=!1,Ti(t)&&(t.lockedFace=null)}},{key:"selectAnchorLocation",value:function(t,r){var i=xi(t.locations,function(o){return o.x===r.x&&o.y===r.y});return i!==-1?(t.currentLocation=i,!0):!1}},{key:"lockCurrentAxis",value:function(t){t.currentFace!=null&&(t.lockedAxis=t.currentFace===at||t.currentFace===et?XO:QO)}},{key:"unlockCurrentAxis",value:function(t){t.lockedAxis=null}},{key:"anchorsEqual",value:function(t,r){if(!t||!r)return!1;var i=t.locations[t.currentLocation],o=r.locations[r.currentLocation];return i.x===o.x&&i.y===o.y&&i.offx===o.offx&&i.offy===o.offy&&i.ox===o.ox&&i.oy===o.oy}}]),e}(),SE={},Ba={get:function(n,t,r){var i=SE[t];if(i)return new i(n,r);throw{message:"jsPlumb: unknown connector type '"+t+"'"}},register:function(n,t){SE[n]=t}},Lr=function(e){oe(t,e);var n=se(t);function t(r){var i;return R(this,t),i=n.call(this,r),f(m(i),"length",void 0),f(m(i),"m",void 0),f(m(i),"m2",void 0),f(m(i),"type",t.segmentType),i._setCoordinates({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2}),i}return V(t,[{key:"getPath",value:function(i){return(i?"M "+this.x1+" "+this.y1+" ":"")+"L "+this.x2+" "+this.y2}},{key:"_recalc",value:function(){this.length=Math.sqrt(Math.pow(this.x2-this.x1,2)+Math.pow(this.y2-this.y1,2)),this.m=os({x:this.x1,y:this.y1},{x:this.x2,y:this.y2}),this.m2=-1/this.m,this.extents={xmin:Math.min(this.x1,this.x2),ymin:Math.min(this.y1,this.y2),xmax:Math.max(this.x1,this.x2),ymax:Math.max(this.y1,this.y2)}}},{key:"getLength",value:function(){return this.length}},{key:"getGradient",value:function(){return this.m}},{key:"_setCoordinates",value:function(i){this.x1=i.x1,this.y1=i.y1,this.x2=i.x2,this.y2=i.y2,this._recalc()}},{key:"pointOnPath",value:function(i,o){if(i===0&&!o)return{x:this.x1,y:this.y1};if(i===1&&!o)return{x:this.x2,y:this.y2};var s=o?i>0?i:this.length+i:i*this.length;return Pr({x:this.x1,y:this.y1},{x:this.x2,y:this.y2},s)}},{key:"gradientAtPoint",value:function(i,o){return this.m}},{key:"pointAlongPathFrom",value:function(i,o,s){var a=this.pointOnPath(i,s),l=o<=0?{x:this.x1,y:this.y1}:{x:this.x2,y:this.y2};return o<=0&&Math.abs(o)>1&&(o*=-1),Pr(a,l,o)}},{key:"within",value:function(i,o,s){return s>=Math.min(i,o)&&s<=Math.max(i,o)}},{key:"closest",value:function(i,o,s){return Math.abs(s-i)<Math.abs(s-o)?i:o}},{key:"findClosestPointOnPath",value:function(i,o){var s={d:1/0,x:null,y:null,l:null,x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};if(this.m===0)s.y=this.y1,s.x=this.within(this.x1,this.x2,i)?i:this.closest(this.x1,this.x2,i);else if(this.m===1/0||this.m===-1/0)s.x=this.x1,s.y=this.within(this.y1,this.y2,o)?o:this.closest(this.y1,this.y2,o);else{var a=this.y1-this.m*this.x1,l=o-this.m2*i,c=(l-a)/(this.m-this.m2),u=this.m*c+a;s.x=this.within(this.x1,this.x2,c)?c:this.closest(this.x1,this.x2,c),s.y=this.within(this.y1,this.y2,u)?u:this.closest(this.y1,this.y2,u)}var d=Gp({x:s.x,y:s.y},{x:this.x1,y:this.y1});return s.d=Gp({x:i,y:o},s),s.l=d/length,s}},{key:"_pointLiesBetween",value:function(i,o,s){return s>o?o<=i&&i<=s:o>=i&&i>=s}},{key:"lineIntersection",value:function(i,o,s,a){var l=Math.abs(os({x:i,y:o},{x:s,y:a})),c=Math.abs(this.m),u=c===1/0?this.x1:this.y1-c*this.x1,d=[],p=l===1/0?i:o-l*i;if(l!==c)if(l===1/0&&c===0)this._pointLiesBetween(i,this.x1,this.x2)&&this._pointLiesBetween(this.y1,o,a)&&d.push({x:i,y:this.y1});else if(l===0&&c===1/0)this._pointLiesBetween(o,this.y1,this.y2)&&this._pointLiesBetween(this.x1,i,s)&&d.push({x:this.x1,y:o});else{var h,g;l===1/0?(h=i,this._pointLiesBetween(h,this.x1,this.x2)&&(g=c*i+u,this._pointLiesBetween(g,o,a)&&d.push({x:h,y:g}))):l===0?(g=o,this._pointLiesBetween(g,this.y1,this.y2)&&(h=(o-u)/c,this._pointLiesBetween(h,i,s)&&d.push({x:h,y:g}))):(h=(p-u)/(c-l),g=c*h+u,this._pointLiesBetween(h,this.x1,this.x2)&&this._pointLiesBetween(g,this.y1,this.y2)&&d.push({x:h,y:g}))}return d}},{key:"boxIntersection",value:function(i,o,s,a){var l=[];return l.push.apply(l,this.lineIntersection(i,o,i+s,o)),l.push.apply(l,this.lineIntersection(i+s,o,i+s,o+a)),l.push.apply(l,this.lineIntersection(i+s,o+a,i,o+a)),l.push.apply(l,this.lineIntersection(i,o+a,i,o)),l}}]),t}(sg);f(Lr,"segmentType","Straight");var ju=function(e){oe(t,e);var n=se(t);function t(){var r;R(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=n.call.apply(n,[this].concat(o)),f(m(r),"type",t.type),r}return V(t,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(i,o){this._addSegment(Lr,{x1:i.sx,y1:i.sy,x2:i.startStubX,y2:i.startStubY}),this._addSegment(Lr,{x1:i.startStubX,y1:i.startStubY,x2:i.endStubX,y2:i.endStubY}),this._addSegment(Lr,{x1:i.endStubX,y1:i.endStubY,x2:i.tx,y2:i.ty}),this.geometry={source:o.sourcePos,target:o.targetPos}}},{key:"transformGeometry",value:function(i,o,s){return{source:this.transformAnchorPlacement(i.source,o,s),target:this.transformAnchorPlacement(i.target,o,s)}}}]),t}(Wu);f(ju,"type","Straight");function nR(e,n){for(var t=e.scope.split(/\s/),r=n.scope.split(/\s/),i=0;i<t.length;i++)for(var o=0;o<r.length;o++)if(r[o]===t[i])return!0;return!1}function Nr(e,n,t){var r=[],i=function(a){return De(a)?a:e.getId(a)};if(n)if(typeof n=="string"){if(n==="*")return n;r.push(n)}else if(t)r=n;else if(n.length!=null){var o;(o=r).push.apply(o,es(es(n).map(i)))}else r.push(i(n));return r}function iR(e,n){e?.endpoints.push(n)}function rR(e,n){e!=null&&$e(e.endpoints,function(t){return t===n})}function mu(e,n,t){n!=null&&(n.connections.push(e),n.connections.length===1&&e.instance.addClass(e.source,e.instance.connectedClass)),t!=null&&(n==null||e.sourceId!==e.targetId)&&(t.connections.push(e),t.connections.length===1&&e.instance.addClass(e.target,e.instance.connectedClass))}function vu(e,n,t){if(n!=null){var r=n.connections.length;$e(n.connections,function(o){return e.id===o.id}),r>0&&n.connections.length===0&&e.instance.removeClass(e.source,e.instance.connectedClass)}if(t!=null){var i=t.connections.length;(n==null||e.sourceId!==e.targetId)&&$e(t.connections,function(o){return e.id===o.id}),i>0&&t.connections.length===0&&e.instance.removeClass(e.target,e.instance.connectedClass)}}var oR=function(e){oe(t,e);var n=se(t);function t(r,i){var o;return R(this,t),o=n.call(this),o._instanceIndex=r,f(m(o),"defaults",void 0),f(m(o),"_initialDefaults",{}),f(m(o),"isConnectionBeingDragged",!1),f(m(o),"currentlyDragging",!1),f(m(o),"hoverSuspended",!1),f(m(o),"_suspendDrawing",!1),f(m(o),"_suspendedAt",null),f(m(o),"connectorClass",tg),f(m(o),"connectorOutlineClass",GA),f(m(o),"connectedClass",UA),f(m(o),"endpointClass",Qo),f(m(o),"endpointConnectedClass",$A),f(m(o),"endpointFullClass",WA),f(m(o),"endpointFloatingClass",ng),f(m(o),"endpointDropAllowedClass",zA),f(m(o),"endpointDropForbiddenClass",YA),f(m(o),"endpointAnchorClassPrefix",qA),f(m(o),"overlayClass",Uu),f(m(o),"connections",[]),f(m(o),"endpointsByElement",{}),f(m(o),"endpointsByUUID",new Map),f(m(o),"sourceSelectors",[]),f(m(o),"targetSelectors",[]),f(m(o),"allowNestedGroups",void 0),f(m(o),"_curIdStamp",1),f(m(o),"viewport",new XN(m(o))),f(m(o),"router",void 0),f(m(o),"groupManager",void 0),f(m(o),"_connectionTypes",new Map),f(m(o),"_endpointTypes",new Map),f(m(o),"_container",void 0),f(m(o),"_managedElements",{}),f(m(o),"DEFAULT_SCOPE",void 0),f(m(o),"_zoom",1),o.defaults={anchor:Xn.Bottom,anchors:[null,null],connectionsDetachable:!0,connectionOverlays:[],connector:ju.type,container:null,endpoint:as.type,endpointOverlays:[],endpoints:[null,null],endpointStyle:{fill:"#456"},endpointStyles:[null,null],endpointHoverStyle:null,endpointHoverStyles:[null,null],hoverPaintStyle:null,listStyle:{},maxConnections:1,paintStyle:{strokeWidth:2,stroke:"#456"},reattachConnections:!1,scope:"jsplumb_defaultscope",allowNestedGroups:!0},i&&k(o.defaults,i),k(o._initialDefaults,o.defaults),o._initialDefaults[Uo]!=null&&(o._initialDefaults[Uo].strokeWidth=o._initialDefaults[Uo].strokeWidth||2),o.DEFAULT_SCOPE=o.defaults[UN],o.allowNestedGroups=o._initialDefaults[GN]!==!1,o.router=new tR(m(o)),o.groupManager=new zN(m(o)),o.setContainer(o._initialDefaults.container),o}return V(t,[{key:"defaultScope",get:function(){return this.DEFAULT_SCOPE}},{key:"currentZoom",get:function(){return this._zoom}},{key:"areDefaultAnchorsSet",value:function(){return this.validAnchorsSpec(this.defaults.anchors)}},{key:"validAnchorsSpec",value:function(i){return i!=null&&i[0]!=null&&i[1]!=null}},{key:"getContainer",value:function(){return this._container}},{key:"setZoom",value:function(i,o){return this._zoom=i,this.fire(lb,this._zoom),o&&this.repaintEverything(),!0}},{key:"_idstamp",value:function(){return""+this._curIdStamp++}},{key:"checkCondition",value:function(i,o){var s=this.getListener(i),a=!0;if(s&&s.length>0){var l=Array.prototype.slice.call(arguments,1);try{for(var c=0,u=s.length;c<u;c++)a=a&&s[c].apply(s[c],l)}catch(d){Le("cannot check condition ["+i+"]"+d)}}return a}},{key:"getId",value:function(i,o){if(i==null)return null;var s=this.getAttribute(i,Si);return(!s||s==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?s=o:(arguments.length===1||arguments.length===3&&!arguments[2])&&(s="jsplumb-"+this._instanceIndex+"-"+this._idstamp()),this.setAttribute(i,Si,s)),s}},{key:"getConnections",value:function(i,o){i?i.constructor===String&&(i={scope:i}):i={};for(var s=i.scope||this.defaultScope,a=Nr(this,s,!0),l=Nr(this,i.source),c=Nr(this,i.target),u=!o&&a.length>1?{}:[],d=function(b,E){if(!o&&a.length>1){var C=u[b];C==null&&(C=u[b]=[]),C.push(E)}else u.push(E)},p=0,h=this.connections.length;p<h;p++){var g=this.connections[p],y=g.proxies&&g.proxies[0]?g.proxies[0].originalEp.elementId:g.sourceId,v=g.proxies&&g.proxies[1]?g.proxies[1].originalEp.elementId:g.targetId;Ar(a,g.scope)&&Ar(l,y)&&Ar(c,v)&&d(g.scope,g)}return u}},{key:"select",value:function(i){return i=i||{},i.scope=i.scope||"*",new qN(this,i.connections||this.getConnections(i,!0))}},{key:"selectEndpoints",value:function(i){i=i||{},i.scope=i.scope||Fr;var o=!i.element&&!i.source&&!i.target,s=o?Fr:Nr(this,i.element),a=o?Fr:Nr(this,i.source),l=o?Fr:Nr(this,i.target),c=Nr(this,i.scope,!0),u=[];for(var d in this.endpointsByElement){var p=Ar(s,d,!0),h=Ar(a,d,!0),g=a!=="*",y=Ar(l,d,!0),v=l!=="*";if(p||h||y)e:for(var _=0,b=this.endpointsByElement[d].length;_<b;_++){var E=this.endpointsByElement[d][_];if(Ar(c,E.scope,!0)){var C=g&&a.length>0&&!E.isSource,T=v&&l.length>0&&!E.isTarget;if(C||T)continue e;u.push(E)}}}return new YN(this,u)}},{key:"setContainer",value:function(i){this._container=i,this.fire(XA,this._container)}},{key:"_set",value:function(i,o,s){var a=[{el:"source",elId:"sourceId"},{el:"target",elId:"targetId"}],l,c=a[s],u=i[c.elId],d,p=i.endpoints[s],h={index:s,originalEndpoint:p,originalSourceId:s===0?u:i.sourceId,newSourceId:i.sourceId,originalTargetId:s===1?u:i.targetId,newTargetId:i.targetId,connection:i,newEndpoint:p};return o instanceof Zo?(l=o,l.addConnection(i)):(d=this.getId(o),d===i[c.elId]?l=null:l=i.makeEndpoint(s===0,o,d)),l!=null&&(h.newEndpoint=l,p.detachFromConnection(i),i.endpoints[s]=l,i[c.el]=l.element,i[c.elId]=l.elementId,h[s===0?"newSourceId":"newTargetId"]=l.elementId,this.fireMoveEvent(h),this._paintConnection(i)),h}},{key:"setSource",value:function(i,o){vu(i,this._managedElements[i.sourceId]);var s=this._set(i,o,0);mu(i,this._managedElements[s.newSourceId])}},{key:"setTarget",value:function(i,o){vu(i,this._managedElements[i.targetId]);var s=this._set(i,o,1);mu(i,this._managedElements[s.newTargetId])}},{key:"setConnectionType",value:function(i,o,s){i.setType(o,s),this._paintConnection(i)}},{key:"isHoverSuspended",value:function(){return this.hoverSuspended}},{key:"setSuspendDrawing",value:function(i,o){var s=this._suspendDrawing;return this._suspendDrawing=i,i?this._suspendedAt=""+new Date().getTime():(this._suspendedAt=null,this.viewport.recomputeBounds()),o&&this.repaintEverything(),s}},{key:"getSuspendedAt",value:function(){return this._suspendedAt}},{key:"batch",value:function(i,o){var s=this._suspendDrawing===!0;s||this.setSuspendDrawing(!0),i(),s||this.setSuspendDrawing(!1,!o)}},{key:"each",value:function(i,o){if(i!=null){if(i.length!=null)for(var s=0;s<i.length;s++)o(i[s]);else o(i);return this}}},{key:"updateOffset",value:function(i){var o=i.elId;return i.recalc?this.viewport.refreshElement(o):this.viewport.getPosition(o)}},{key:"deleteConnection",value:function(i,o){if(i!=null&&i.deleted!==!0&&(o=o||{},o.force||UE(!0,!1,[[i.endpoints[0],Jo,[i]],[i.endpoints[1],Jo,[i]],[i,Jo,[i]],[this,eb,[ub,i]]]))){vu(i,this._managedElements[i.sourceId],this._managedElements[i.targetId]),this.fireDetachEvent(i,!i.pending&&o.fireEvent!==!1,o.originalEvent);var s=i.endpoints[0],a=i.endpoints[1];return s!==o.endpointToIgnore&&s.detachFromConnection(i,null,!0),a!==o.endpointToIgnore&&a.detachFromConnection(i,null,!0),$e(this.connections,function(l){return i.id===l.id}),i.destroy(),s!==o.endpointToIgnore&&s.deleteOnEmpty&&s.connections.length===0&&this.deleteEndpoint(s),a!==o.endpointToIgnore&&a.deleteOnEmpty&&a.connections.length===0&&this.deleteEndpoint(a),!0}return!1}},{key:"deleteEveryConnection",value:function(i){var o=this;i=i||{};var s=this.connections.length,a=0;return this.batch(function(){for(var l=0;l<s;l++)a+=o.deleteConnection(o.connections[0],i)?1:0}),a}},{key:"deleteConnectionsForElement",value:function(i,o){var s=this.getId(i),a=this._managedElements[s];if(a)for(var l=a.connections.length,c=0;c<l;c++)this.deleteConnection(a.connections[0],o);return this}},{key:"fireDetachEvent",value:function(i,o,s){var a=i.id!=null,l=a?{connection:i,source:i.source,target:i.target,sourceId:i.sourceId,targetId:i.targetId,sourceEndpoint:i.endpoints[0],targetEndpoint:i.endpoints[1]}:i;o&&this.fire(ZA,l,s),this.fire(ig,l,s)}},{key:"fireMoveEvent",value:function(i,o){this.fire(ib,i,o)}},{key:"manageAll",value:function(i,o){for(var s=De(i)?this.getSelector(this.getContainer(),i):i,a=0;a<s.length;a++)this.manage(s[a],null,o)}},{key:"manage",value:function(i,o,s){this.getAttribute(i,Si)==null&&(o=o||this.getAttribute(i,"id")||Ve(),this.setAttribute(i,Si,o));var a=this.getId(i);if(this._managedElements[a])s&&(this._managedElements[a].viewportElement=this.updateOffset({elId:a,timestamp:null,recalc:!0}));else{var l={el:i,endpoints:[],connections:[],rotation:0,data:{}};this._managedElements[a]=l,this._suspendDrawing?l.viewportElement=this.viewport.registerElement(a,!0):l.viewportElement=this.updateOffset({elId:a,recalc:!0}),this.fire(ob,{el:i})}return this._managedElements[a]}},{key:"getManagedData",value:function(i,o,s){if(this._managedElements[i]){var a=this._managedElements[i].data[o];return a!=null?a[s]:null}}},{key:"setManagedData",value:function(i,o,s,a){this._managedElements[i]&&(this._managedElements[i].data[o]=this._managedElements[i].data[o]||{},this._managedElements[i].data[o][s]=a)}},{key:"getManagedElement",value:function(i){return this._managedElements[i]?this._managedElements[i].el:null}},{key:"unmanage",value:function(i,o){var s=this;this.removeAllEndpoints(i,!0);var a=function(c){var u=s.getId(c);s.removeAttribute(c,Si),delete s._managedElements[u],s.viewport.remove(u),s.fire(ab,{el:c,id:u}),c&&o&&s._removeElement(c)};this._getAssociatedElements(i).map(a),a(i)}},{key:"rotate",value:function(i,o,s){var a=this.getId(i);return this._managedElements[a]&&(this._managedElements[a].rotation=o,this.viewport.rotateElement(a,o),s!==!0)?this.revalidate(i):{c:new Set,e:new Set}}},{key:"_getRotation",value:function(i){var o=this._managedElements[i];return o!=null&&o.rotation||0}},{key:"_getRotations",value:function(i){var o=this,s=[],a=this._managedElements[i],l=function c(u){if(u.group!=null){var d=o._managedElements[u.group];d!=null&&(s.push({r:d.viewportElement.r,c:d.viewportElement.c}),c(d))}};return a!=null&&(s.push({r:a.viewportElement.r||0,c:a.viewportElement.c}),l(a)),s}},{key:"_applyRotations",value:function(i,o){var s=i.slice(),a={x:s[0],y:s[1],cr:0,sr:0};return P(o,function(l){a=Iu(a,l.c,l.r)}),a}},{key:"_applyRotationsXY",value:function(i,o){return P(o,function(s){i=Iu(i,s.c,s.r)}),i}},{key:"_internal_newEndpoint",value:function(i){var o=k({},i),s=this.manage(o.element);o.elementId=this.getId(o.element),o.id="ep_"+this._idstamp();var a=new Zo(this,o);return iR(s,a),i.uuid&&this.endpointsByUUID.set(i.uuid,a),WE(this.endpointsByElement,a.elementId,a),this._suspendDrawing||this._paintEndpoint(a,{timestamp:this._suspendedAt}),a}},{key:"_deriveEndpointAndAnchorSpec",value:function(i,o){for(var s=((o?"":"default ")+i).split(/[\s]/),a=null,l=null,c=null,u=null,d=0;d<s.length;d++){var p=this.getConnectionType(s[d]);p&&(p.endpoints&&(a=p.endpoints),p.endpoint&&(l=p.endpoint),p.anchors&&(u=p.anchors),p.anchor&&(c=p.anchor))}return{endpoints:a||[l,l],anchors:u||[c,c]}}},{key:"revalidate",value:function(i,o){var s=this.getId(i);return this.updateOffset({elId:s,recalc:!0,timestamp:o}),this.repaint(i)}},{key:"repaintEverything",value:function(){var i=Ve(),o;for(o in this._managedElements)this.viewport.refreshElement(o,!0);this.viewport.recomputeBounds();for(o in this._managedElements)this.repaint(this._managedElements[o].el,i,!0);return this}},{key:"setElementPosition",value:function(i,o,s){var a=this.getId(i);return this.viewport.setPosition(a,o,s),this.repaint(i)}},{key:"repaint",value:function(i,o,s){var a={c:new Set,e:new Set},l=function(g){g.c.forEach(function(y){return a.c.add(y)}),g.e.forEach(function(y){return a.e.add(y)})};if(!this._suspendDrawing){var c=this.getId(i);if(i!=null){var u=this._getAssociatedElements(i);if(o==null&&(o=Ve()),!s)for(var d=0;d<u.length;d++)this.updateOffset({elId:this.getId(u[d]),recalc:!0,timestamp:o});if(l(this.router.redraw(c,o,null)),u.length>0)for(var p=0;p<u.length;p++)l(this.router.redraw(this.getId(u[p]),o,null))}}return a}},{key:"unregisterEndpoint",value:function(i){var o=i.getUuid();o&&this.endpointsByUUID.delete(o),rR(this._managedElements[i.elementId],i);var s=this.endpointsByElement[i.elementId];s!=null&&(this.endpointsByElement[i.elementId]=s.filter(function(a){return a!==i})),this.fire(rb,i)}},{key:"_maybePruneEndpoint",value:function(i){return i.deleteOnEmpty&&i.connections.length===0?(this.deleteEndpoint(i),!0):!1}},{key:"deleteEndpoint",value:function(i){var o=this,s=typeof i=="string"?this.endpointsByUUID.get(i):i;if(s){var a=s.proxiedBy,l=s.connections.slice();P(l,function(c){s.detachFromConnection(c,null,!0)}),this.unregisterEndpoint(s),s.destroy(),P(l,function(c){o.deleteConnection(c,{force:!0,endpointToIgnore:s})}),a!=null&&this.deleteEndpoint(a)}return this}},{key:"addEndpoint",value:function(i,o,s){s=s||{};var a=k({},s);k(a,o||{});var l=k({element:i},a);return this._internal_newEndpoint(l)}},{key:"addEndpoints",value:function(i,o,s){for(var a=[],l=0,c=o.length;l<c;l++)a.push(this.addEndpoint(i,o[l],s));return a}},{key:"reset",value:function(){var i=this;this.silently(function(){i.endpointsByElement={},i._managedElements={},i.endpointsByUUID.clear(),i.viewport.reset(),i.router.reset(),i.groupManager.reset(),i.connections.length=0})}},{key:"destroy",value:function(){this.reset(),this.unbind(),this.sourceSelectors.length=0,this.targetSelectors.length=0,this._connectionTypes.clear(),this._endpointTypes.clear()}},{key:"getEndpoints",value:function(i){return this.endpointsByElement[this.getId(i)]||[]}},{key:"getEndpoint",value:function(i){return this.endpointsByUUID.get(i)}},{key:"setEndpointUuid",value:function(i,o){i.uuid&&this.endpointsByUUID.delete(i.uuid),i.uuid=o,this.endpointsByUUID.set(o,i)}},{key:"connect",value:function(i,o){try{var s=this._prepareConnectionParams(i,o),a=this._newConnection(s);return this._finaliseConnection(a,s),a}catch(l){Le(l);return}}},{key:"_prepareConnectionParams",value:function(i,o){var s=k({},i);o&&k(s,o);var a=s;if(a.source&&a.source.endpoint&&(a.sourceEndpoint=a.source),a.target&&a.target.endpoint&&(a.targetEndpoint=a.target),i.uuids&&(a.sourceEndpoint=this.getEndpoint(i.uuids[0]),a.targetEndpoint=this.getEndpoint(i.uuids[1])),a.sourceEndpoint!=null){if(a.sourceEndpoint.isFull())throw cx;if(a.type||(a.type=a.sourceEndpoint.edgeType),a.sourceEndpoint.connectorOverlays){a.overlays=a.overlays||[];for(var l=0,c=a.sourceEndpoint.connectorOverlays.length;l<c;l++)a.overlays.push(a.sourceEndpoint.connectorOverlays[l])}a.sourceEndpoint.scope&&(a.scope=a.sourceEndpoint.scope)}else if(a.source==null)throw dx;if(a.targetEndpoint!=null){if(a.targetEndpoint.isFull())throw ux}else if(a.target==null)throw fx;if(a.sourceEndpoint&&a.targetEndpoint&&!nR(a.sourceEndpoint,a.targetEndpoint))throw"Cannot establish connection: scopes do not match";return a}},{key:"_newConnection",value:function(i){i.id="con_"+this._idstamp();var o=new Fa(this,i);return mu(o,this._managedElements[o.sourceId],this._managedElements[o.targetId]),this._paintConnection(o),o}},{key:"_finaliseConnection",value:function(i,o,s){o=o||{},i.suspendedEndpoint||this.connections.push(i),i.pending=null,i.endpoints[0].isTemporarySource=!1,this.repaint(i.source);var a={connection:i,source:i.source,target:i.target,sourceId:i.sourceId,targetId:i.targetId,sourceEndpoint:i.endpoints[0],targetEndpoint:i.endpoints[1]};this.fire(nb,a,s),!o.doNotFireConnectionEvent&&o.fireEvent!==!1&&this.fire(tb,a,s)}},{key:"removeAllEndpoints",value:function(i,o){var s=this,a=function(c){var u=s.getId(c),d=s.endpointsByElement[u],p,h;if(d)for(p=0,h=d.length;p<h;p++)s.deleteEndpoint(d[p]);delete s.endpointsByElement[u]};return o&&this._getAssociatedElements(i).map(a),a(i),this}},{key:"_createSourceDefinition",value:function(i,o){var s=k({},o);k(s,i),s.edgeType=s.edgeType||Ou;var a=this._deriveEndpointAndAnchorSpec(s.edgeType);s.endpoint=s.endpoint||a.endpoints[0],s.anchor=s.anchor||a.anchors[0];var l=s.maxConnections||-1,c={def:k({},s),uniqueEndpoint:s.uniqueEndpoint,maxConnections:l,enabled:!0,endpoint:null};return c}},{key:"addSourceSelector",value:function(i,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this._createSourceDefinition(o),l=new cE(i,a,s);return this.sourceSelectors.push(l),l}},{key:"removeSourceSelector",value:function(i){$e(this.sourceSelectors,function(o){return o===i})}},{key:"removeTargetSelector",value:function(i){$e(this.targetSelectors,function(o){return o===i})}},{key:"addTargetSelector",value:function(i,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this._createTargetDefinition(o),l=new cE(i,a,s);return this.targetSelectors.push(l),l}},{key:"_createTargetDefinition",value:function(i,o){var s=k({},o);k(s,i),s.edgeType=s.edgeType||Ou;var a=s.maxConnections||-1,l={def:k({},s),uniqueEndpoint:s.uniqueEndpoint,maxConnections:a,enabled:!0,endpoint:null};return l}},{key:"show",value:function(i,o){return this._setVisible(i,Vp,o)}},{key:"hide",value:function(i,o){return this._setVisible(i,is,o)}},{key:"_setVisible",value:function(i,o,s){var a=o===Vp,l=null;s&&(l=function(d){d.setVisible(a,!0,!0)});var c=this.getId(i);return this._operation(i,function(u){if(a&&s){var d=u.sourceId===c?1:0;u.endpoints[d].isVisible()&&u.setVisible(!0)}else u.setVisible(a)},l),this}},{key:"toggleVisible",value:function(i,o){var s=null;o&&(s=function(l){var c=l.isVisible();l.setVisible(!c)}),this._operation(i,function(a){var l=a.isVisible();a.setVisible(!l)},s)}},{key:"_operation",value:function(i,o,s){var a=this.getId(i),l=this.endpointsByElement[a];if(l&&l.length)for(var c=0,u=l.length;c<u;c++){for(var d=0,p=l[c].connections.length;d<p;d++){var h=o(l[c].connections[d]);if(h)return}s&&s(l[c])}}},{key:"registerConnectionType",value:function(i,o){if(this._connectionTypes.set(i,k({},o)),o.overlays){for(var s={},a=0;a<o.overlays.length;a++){var l=$p(o.overlays[a]);s[l.options.id]=l}this._connectionTypes.get(i).overlays=s}}},{key:"registerConnectionTypes",value:function(i){for(var o in i)this.registerConnectionType(o,i[o])}},{key:"registerEndpointType",value:function(i,o){if(this._endpointTypes.set(i,k({},o)),o.overlays){for(var s={},a=0;a<o.overlays.length;a++){var l=$p(o.overlays[a]);s[l.options.id]=l}this._endpointTypes.get(i).overlays=s}}},{key:"registerEndpointTypes",value:function(i){for(var o in i)this.registerEndpointType(o,i[o])}},{key:"getType",value:function(i,o){return o==="connection"?this.getConnectionType(i):this.getEndpointType(i)}},{key:"getConnectionType",value:function(i){return this._connectionTypes.get(i)}},{key:"getEndpointType",value:function(i){return this._endpointTypes.get(i)}},{key:"importDefaults",value:function(i){for(var o in i)this.defaults[o]=i[o];return this.defaults[Uo]!=null&&(this.defaults[Uo].strokeWidth=this.defaults[Uo].strokeWidth||2),i.container&&this.setContainer(i.container),this}},{key:"restoreDefaults",value:function(){return this.defaults=k({},this._initialDefaults),this}},{key:"getManagedElements",value:function(){return this._managedElements}},{key:"proxyConnection",value:function(i,o,s,a,l){var c=i.proxies[o]!=null,u,d=c?i.proxies[o].originalEp.elementId:i.endpoints[o].elementId,p=c?i.proxies[o].originalEp:i.endpoints[o],h=this.getId(s);i.proxies[o]?i.proxies[o].ep.elementId===h?u=i.proxies[o].ep:(i.proxies[o].ep.detachFromConnection(i,o),u=this._internal_newEndpoint({element:s,endpoint:a(i,o),anchor:l(i,o),parameters:{isProxyEndpoint:!0}})):u=this._internal_newEndpoint({element:s,endpoint:a(i,o),anchor:l(i,o),parameters:{isProxyEndpoint:!0}}),u.deleteOnEmpty=!0,i.proxies[o]={ep:u,originalEp:p},this.sourceOrTargetChanged(d,h,i,s,o),p.detachFromConnection(i,null,!0),u.connections=[i],i.endpoints[o]=u,p.proxiedBy=u,p.setVisible(!1),i.setVisible(!0),this.revalidate(s)}},{key:"unproxyConnection",value:function(i,o){if(!(i.proxies==null||i.proxies[o]==null)){var s=i.proxies[o].originalEp.element,a=i.proxies[o].originalEp.elementId,l=i.proxies[o].ep.elementId;i.endpoints[o]=i.proxies[o].originalEp,delete i.proxies[o].originalEp.proxiedBy,this.sourceOrTargetChanged(l,a,i,s,o),i.proxies[o].ep.detachFromConnection(i,null),i.proxies[o].originalEp.addConnection(i),i.isVisible()&&i.proxies[o].originalEp.setVisible(!0),i.proxies[o]=null,xi(i.proxies,function(c){return c!=null})===-1&&(i.proxies.length=0)}}},{key:"sourceOrTargetChanged",value:function(i,o,s,a,l){i!==o&&(l===0?(s.sourceId=o,s.source=a):l===1&&(s.targetId=o,s.target=a),vu(s,this._managedElements[i]),mu(s,this._managedElements[o]))}},{key:"getGroup",value:function(i){return this.groupManager.getGroup(i)}},{key:"getGroupFor",value:function(i){return this.groupManager.getGroupFor(i)}},{key:"addGroup",value:function(i){return this.groupManager.addGroup(i)}},{key:"addToGroup",value:function(i){for(var o,s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return(o=this.groupManager).addToGroup.apply(o,[i,!1].concat(a))}},{key:"collapseGroup",value:function(i){this.groupManager.collapseGroup(i)}},{key:"expandGroup",value:function(i){this.groupManager.expandGroup(i)}},{key:"toggleGroup",value:function(i){this.groupManager.toggleGroup(i)}},{key:"removeGroup",value:function(i,o,s,a){return this.groupManager.removeGroup(i,o,s,a)}},{key:"removeAllGroups",value:function(i,o){this.groupManager.removeAllGroups(i,o,!1)}},{key:"removeFromGroup",value:function(i,o,s){this.groupManager.removeFromGroup(i,s,o),this._appendElement(o,this.getContainer()),this.updateOffset({recalc:!0,elId:this.getId(o)})}},{key:"_paintEndpoint",value:function(i,o){function s(E){var C=0;if(o.elementWithPrecedence!=null){for(var T=0;T<E.connections.length;T++)if(E.connections[T].sourceId===o.elementWithPrecedence||E.connections[T].targetId===o.elementWithPrecedence){C=T;break}}return E.connections[C]}o=o||{};var a=o.timestamp,l=o.recalc!==!1;if(!a||i.timestamp!==a){var c=this.viewport.getPosition(i.elementId),u=o.offset?{x:o.offset.x,y:o.offset.y}:{x:c.x,y:c.y};if(u!=null){var d=o.anchorLoc;if(d==null){var p={xy:u,wh:c,element:i,timestamp:a};if(l&&this.router.isDynamicAnchor(i)&&i.connections.length>0){var h=s(i),g=h.endpoints[0]===i?1:0,y=g===0?h.sourceId:h.targetId,v=this.viewport.getPosition(y);p.index=g===0?1:0,p.connection=h,p.txy=v,p.twh=v,p.tElement=h.endpoints[g],p.tRotation=this._getRotations(y)}else i.connections.length>0&&(p.connection=i.connections[0]);p.rotation=this._getRotations(i.elementId),d=this.router.computeAnchorLocation(i._anchor,p)}i.endpoint.compute(d,this.router.getEndpointOrientation(i),i.paintStyleInUse),this.renderEndpoint(i,i.paintStyleInUse),i.timestamp=a;for(var _ in i.overlays)if(i.overlays.hasOwnProperty(_)){var b=i.overlays[_];b.isVisible()&&(i.overlayPlacements[_]=this.drawOverlay(b,i.endpoint,i.paintStyleInUse,i.getAbsoluteOverlayPosition(b)),this._paintOverlay(b,i.overlayPlacements[_],{xmin:0,ymin:0}))}}}}},{key:"_paintConnection",value:function(i,o){if(!this._suspendDrawing&&i.visible!==!1){o=o||{};var s=o.timestamp;if(s!=null&&s===i.lastPaintedAt)return;if(s==null||s!==i.lastPaintedAt){this.router.computePath(i,s);var a={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0};for(var l in i.overlays)if(i.overlays.hasOwnProperty(l)){var c=i.overlays[l];c.isVisible()&&(i.overlayPlacements[l]=this.drawOverlay(c,i.connector,i.paintStyleInUse,i.getAbsoluteOverlayPosition(c)),a.xmin=Math.min(a.xmin,i.overlayPlacements[l].xmin),a.xmax=Math.max(a.xmax,i.overlayPlacements[l].xmax),a.ymin=Math.min(a.ymin,i.overlayPlacements[l].ymin),a.ymax=Math.max(a.ymax,i.overlayPlacements[l].ymax))}var u=parseFloat(""+i.paintStyleInUse.strokeWidth||"1")/2,d=parseFloat(""+i.paintStyleInUse.strokeWidth||"0"),p={xmin:Math.min(i.connector.bounds.xmin-(u+d),a.xmin),ymin:Math.min(i.connector.bounds.ymin-(u+d),a.ymin),xmax:Math.max(i.connector.bounds.xmax+(u+d),a.xmax),ymax:Math.max(i.connector.bounds.ymax+(u+d),a.ymax)};this.paintConnector(i.connector,i.paintStyleInUse,p);for(var h in i.overlays)if(i.overlays.hasOwnProperty(h)){var g=i.overlays[h];g.isVisible()&&this._paintOverlay(g,i.overlayPlacements[h],p)}}i.lastPaintedAt=s}}},{key:"_refreshEndpoint",value:function(i){i._anchor.isFloating||(i.connections.length>0?this.addEndpointClass(i,this.endpointConnectedClass):this.removeEndpointClass(i,this.endpointConnectedClass),i.isFull()?this.addEndpointClass(i,this.endpointFullClass):this.removeEndpointClass(i,this.endpointFullClass))}},{key:"_makeConnector",value:function(i,o,s){return Ba.get(i,o,s)}},{key:"addOverlay",value:function(i,o,s){if(i.addOverlay(o),!s){var a=i instanceof Zo?i.element:i.source;this.revalidate(a)}}},{key:"removeOverlay",value:function(i,o){i.removeOverlay(o);var s=i instanceof Zo?i.element:i.source;this.revalidate(s)}},{key:"setOutlineColor",value:function(i,o){i.paintStyleInUse.outlineStroke=o,this._paintConnection(i)}},{key:"setOutlineWidth",value:function(i,o){i.paintStyleInUse.outlineWidth=o,this._paintConnection(i)}},{key:"setColor",value:function(i,o){i.paintStyleInUse.stroke=o,this._paintConnection(i)}},{key:"setLineWidth",value:function(i,o){i.paintStyleInUse.strokeWidth=o,this._paintConnection(i)}},{key:"setLineStyle",value:function(i,o){o.lineWidth!=null&&(i.paintStyleInUse.strokeWidth=o.lineWidth),o.outlineWidth!=null&&(i.paintStyleInUse.outlineWidth=o.outlineWidth),o.color!=null&&(i.paintStyleInUse.stroke=o.color),o.outlineColor!=null&&(i.paintStyleInUse.outlineStroke=o.outlineColor),this._paintConnection(i)}},{key:"getPathData",value:function(i){for(var o="",s=0;s<i.segments.length;s++)o+=i.segments[s].getPath(s===0),o+=" ";return o}}]),t}(ja),Pb={};function vg(e,n){Pb[e]=n}function IE(e,n,t){var r=n,i=Xo(n.getBoundingClientRect)!==pb?n.getBoundingClientRect():{left:0,top:0,width:0,height:0},o=document.body,s=document.documentElement,a=window.pageYOffset||s.scrollTop||o.scrollTop,l=window.pageXOffset||s.scrollLeft||o.scrollLeft,c=s.clientTop||o.clientTop||0,u=s.clientLeft||o.clientLeft||0,d=0,p=0,h=i.top+a-c+d*t,g=i.left+l-u+p*t,y=Nu(e),v=i.width||r.offsetWidth*t,_=i.height||r.offsetHeight*t,b=(y.x-g)/v,E=(y.y-h)/_;return{x:b,y:E}}function Wo(e){return Wp(e)||zp(e)||Yp(e)}function ME(e,n){e.canvas&&(e.canvas.style.display=n?"block":"none")}function AE(e){e.canvas&&e.canvas.parentNode.removeChild(e.canvas),delete e.canvas}function wa(e){return e.canvas}function dn(e){return gg.getElement(e)}function Rr(e){return gg.getElement(e,e.component,function(n){var t=e.create(n);return e.instance.addClass(t,e.instance.overlayClass),t})}function sR(e,n,t,r){var i=e.x,o=e.y;return n._jsPlumbParentGroup&&n._jsPlumbParentGroup.constrain&&(i=Math.max(e.x,0),o=Math.max(e.y,0),i=Math.min(i,t.w-r.w),o=Math.min(o,t.h-r.h)),{x:i,y:o}}var aR=function(e){oe(t,e);var n=se(t);function t(r,i){var o;if(R(this,t),o=n.call(this,r,i),o._instanceIndex=r,f(m(o),"containerType",null),f(m(o),"dragSelection",void 0),f(m(o),"dragManager",void 0),f(m(o),"_connectorClick",void 0),f(m(o),"_connectorDblClick",void 0),f(m(o),"_connectorTap",void 0),f(m(o),"_connectorDblTap",void 0),f(m(o),"_endpointClick",void 0),f(m(o),"_endpointDblClick",void 0),f(m(o),"_overlayClick",void 0),f(m(o),"_overlayDblClick",void 0),f(m(o),"_overlayTap",void 0),f(m(o),"_overlayDblTap",void 0),f(m(o),"_connectorMouseover",void 0),f(m(o),"_connectorMouseout",void 0),f(m(o),"_endpointMouseover",void 0),f(m(o),"_endpointMouseout",void 0),f(m(o),"_connectorContextmenu",void 0),f(m(o),"_connectorMousedown",void 0),f(m(o),"_connectorMouseup",void 0),f(m(o),"_endpointMousedown",void 0),f(m(o),"_endpointMouseup",void 0),f(m(o),"_overlayMouseover",void 0),f(m(o),"_overlayMouseout",void 0),f(m(o),"_elementClick",void 0),f(m(o),"_elementTap",void 0),f(m(o),"_elementDblTap",void 0),f(m(o),"_elementMouseenter",void 0),f(m(o),"_elementMouseexit",void 0),f(m(o),"_elementMousemove",void 0),f(m(o),"_elementMouseup",void 0),f(m(o),"_elementMousedown",void 0),f(m(o),"_elementContextmenu",void 0),f(m(o),"_resizeObserver",void 0),f(m(o),"eventManager",void 0),f(m(o),"draggingClass","jtk-dragging"),f(m(o),"elementDraggingClass","jtk-element-dragging"),f(m(o),"hoverClass","jtk-hover"),f(m(o),"sourceElementDraggingClass","jtk-source-element-dragging"),f(m(o),"targetElementDraggingClass","jtk-target-element-dragging"),f(m(o),"hoverSourceClass","jtk-source-hover"),f(m(o),"hoverTargetClass","jtk-target-hover"),f(m(o),"dragSelectClass","jtk-drag-select"),f(m(o),"managedElementsSelector",void 0),f(m(o),"elementsDraggable",void 0),f(m(o),"elementDragHandler",void 0),f(m(o),"groupDragOptions",void 0),f(m(o),"elementDragOptions",void 0),f(m(o),"svg",{node:function(a,l){return Zn(a,l)},attr:function(a,l){return Kn(a,l)},pos:function(a){return fb(a)}}),i=i||{},o.containerType=Fp(o.getContainer()),o.elementsDraggable=i&&i.elementsDraggable!==!1,o.managedElementsSelector=i&&i.managedElementsSelector||ye,o.eventManager=new lg,o.dragSelection=new HO(m(o)),o.dragManager=new YO(m(o),o.dragSelection),o.dragManager.addHandler(new dE(m(o))),o.groupDragOptions={constrainFunction:sR},o.dragManager.addHandler(new fE(m(o),o.dragSelection),o.groupDragOptions),o.elementDragHandler=new Up(m(o),o.dragSelection),o.elementDragOptions=i&&i.dragOptions||{},o.dragManager.addHandler(o.elementDragHandler,o.elementDragOptions),i&&i.dragOptions&&i.dragOptions.filter&&o.dragManager.addFilter(i.dragOptions.filter),o._createEventListeners(),o._attachEventDelegates(),i.resizeObserver!==!1)try{o._resizeObserver=new ResizeObserver(function(s){var a=s.filter(function(l){var c=o.getAttribute(l.target,Si);if(c!=null){var u=o.viewport._elementMap.get(c);return u?u.w!==l.contentRect.width||u.h!==l.contentRect.height:!1}else return!1});a.forEach(function(l){return o.revalidate(l.target)})})}catch{Le("WARN: ResizeObserver could not be attached.")}return o}return V(t,[{key:"fireOverlayMethod",value:function(i,o,s){var a=i.component instanceof Fa?Dn:Qn,l=ce(a,o);s._jsPlumbOverlay=i,i.fire(o,{e:s,overlay:i}),this.fire(l,i.component,s)}},{key:"addDragFilter",value:function(i,o){this.dragManager.addFilter(i,o)}},{key:"removeDragFilter",value:function(i){this.dragManager.removeFilter(i)}},{key:"setDragGrid",value:function(i){this.dragManager.setOption(this.elementDragHandler,{grid:i})}},{key:"setDragConstrainFunction",value:function(i){this.dragManager.setOption(this.elementDragHandler,{constrainFunction:i})}},{key:"_removeElement",value:function(i){i.parentNode&&i.parentNode.removeChild(i)}},{key:"_appendElement",value:function(i,o){o&&o.appendChild(i)}},{key:"_appendElementToGroup",value:function(i,o){this.getGroupContentArea(i).appendChild(o)}},{key:"_appendElementToContainer",value:function(i){this._appendElement(i,this.getContainer())}},{key:"_getAssociatedElements",value:function(i){var o=[];if(i.nodeType!==3&&i.nodeType!==8){var s=i.querySelectorAll(ye);Array.prototype.push.apply(o,s)}return o.filter(function(a){return a.nodeType!==3&&a.nodeType!==8})}},{key:"shouldFireEvent",value:function(i,o,s){return!0}},{key:"getClass",value:function(i){return OA(i)}},{key:"addClass",value:function(i,o){kr(i,o)}},{key:"hasClass",value:function(i,o){return NA(i,o)}},{key:"removeClass",value:function(i,o){Pp(i,o)}},{key:"toggleClass",value:function(i,o){RA(i,o)}},{key:"setAttribute",value:function(i,o,s){i.setAttribute(o,s)}},{key:"getAttribute",value:function(i,o){return i.getAttribute(o)}},{key:"setAttributes",value:function(i,o){for(var s in o)i.setAttribute(s,o[s])}},{key:"removeAttribute",value:function(i,o){i.removeAttribute&&i.removeAttribute(o)}},{key:"on",value:function(i,o,s,a){var l=this,c=function(d){a==null?l.eventManager.on(d,o,s):l.eventManager.on(d,o,s,a)};return Na(i)?P(i,function(u){return c(u)}):c(i),this}},{key:"off",value:function(i,o,s){var a=this;return Na(i)?P(i,function(l){return a.eventManager.off(l,o,s)}):this.eventManager.off(i,o,s),this}},{key:"trigger",value:function(i,o,s,a,l){this.eventManager.trigger(i,o,s,a,l)}},{key:"getOffsetRelativeToRoot",value:function(i){return qo(i)}},{key:"getOffset",value:function(i){for(var o=i,s=this.getContainer(),a=this.getPosition(o),l=i!==s&&o.offsetParent!==s?o.offsetParent:null,c=function(h){h!=null&&h!==document.body&&(h.scrollTop>0||h.scrollLeft>0)&&(a.x-=h.scrollLeft,a.y-=h.scrollTop)};l!=null;)a.x+=l.offsetLeft,a.y+=l.offsetTop,c(l),l=l.offsetParent===s?null:l.offsetParent;if(s!=null&&(s.scrollTop>0||s.scrollLeft>0)){var u=o.offsetParent!=null?this.getStyle(o.offsetParent,K0):jA,d=this.getStyle(o,K0);d!==Ra&&d!==B0&&u!==Ra&&u!==B0&&(a.x-=s.scrollLeft,a.y-=s.scrollTop)}return a}},{key:"getSize",value:function(i){var o=i;if(o.offsetWidth!=null)return kA(i);if(o.width&&o.width.baseVal)return PA(o)}},{key:"getPosition",value:function(i){var o=i;if(o.offsetLeft!=null)return{x:parseFloat(o.offsetLeft),y:parseFloat(o.offsetTop)};if(o.x&&o.x.baseVal)return FA(o)}},{key:"getStyle",value:function(i,o){return Xo(window.getComputedStyle)!==pb?getComputedStyle(i,null).getPropertyValue(o):i.currentStyle[o]}},{key:"getGroupContentArea",value:function(i){var o=this.getSelector(i.el,Zx);return o&&o.length>0?o[0]:i.el}},{key:"getSelector",value:function(i,o){var s=null;if(arguments.length===1){if(!De(i)){var a=document.createDocumentFragment();return a.appendChild(i),lu(a.childNodes)}s=lu(document.querySelectorAll(i))}else s=lu(i.querySelectorAll(o));return s}},{key:"setPosition",value:function(i,o){var s=i;s.style.left=o.x+"px",s.style.top=o.y+"px"}},{key:"setDraggable",value:function(i,o){o?this.removeAttribute(i,_u):this.setAttribute(i,_u,gb)}},{key:"isDraggable",value:function(i){var o=this.getAttribute(i,_u);return o==null||o===Ko}},{key:"toggleDraggable",value:function(i){var o=this.isDraggable(i);return this.setDraggable(i,!o),!o}},{key:"_createEventListeners",value:function(){var i=function(_,b){if(!b.defaultPrevented&&b._jsPlumbOverlay==null){var E=Wn(xt(b),un,this.getContainer(),!0);this.fire(_,E.jtk.connector.connection,b)}};this._connectorClick=i.bind(this,Bx),this._connectorDblClick=i.bind(this,Hx),this._connectorTap=i.bind(this,qx),this._connectorDblTap=i.bind(this,Gx);var o=function(_,b){var E=xt(b).parentNode;if(E.jtk&&E.jtk.connector){var C=E.jtk.connector,T=C.connection;this.setConnectorHover(C,_),_?(this.addClass(T.source,this.hoverSourceClass),this.addClass(T.target,this.hoverTargetClass)):(this.removeClass(T.source,this.hoverSourceClass),this.removeClass(T.target,this.hoverTargetClass)),this.fire(_?$x:Ux,E.jtk.connector.connection,b)}};this._connectorMouseover=o.bind(this,!0),this._connectorMouseout=o.bind(this,!1);var s=function(_,b){var E=xt(b).parentNode;E.jtk&&E.jtk.connector&&this.fire(_?Wx:zx,E.jtk.connector.connection,b)};this._connectorMouseup=s.bind(this,!0),this._connectorMousedown=s.bind(this,!1),this._connectorContextmenu=(function(v){var _=xt(v).parentNode;_.jtk&&_.jtk.connector&&this.fire(Yx,_.jtk.connector.connection,v)}).bind(this);var a=function(_,b,E){!b.defaultPrevented&&b._jsPlumbOverlay==null&&this.fire(_,E.jtk.endpoint,b)};this._endpointClick=a.bind(this,kx),this._endpointDblClick=a.bind(this,Px);var l=function(_,b){var E=xt(b);E.jtk&&E.jtk.endpoint&&(this.setEndpointHover(E.jtk.endpoint,_),this.fire(_?Lx:Fx,E.jtk.endpoint,b))};this._endpointMouseover=l.bind(this,!0),this._endpointMouseout=l.bind(this,!1);var c=function(_,b){var E=xt(b);E.jtk&&E.jtk.endpoint&&this.fire(_?Vx:jx,E.jtk.endpoint,b)};this._endpointMouseup=c.bind(this,!0),this._endpointMousedown=c.bind(this,!1);var u=(function(v,_){var b=Wn(xt(_),$n,this.getContainer(),!0),E=b.jtk.overlay;E&&this.fireOverlayMethod(E,v,_)}).bind(this);this._overlayClick=u.bind(this,vt),this._overlayDblClick=u.bind(this,Ot),this._overlayTap=u.bind(this,qt),this._overlayDblTap=u.bind(this,Wt);var d=function(_,b){var E=Wn(xt(b),$n,this.getContainer(),!0),C=E.jtk.overlay;C&&this.setOverlayHover(C,_)};this._overlayMouseover=d.bind(this,!0),this._overlayMouseout=d.bind(this,!1);var p=function(_,b,E){b.defaultPrevented||this.fire(b.detail===1?z0:Ix,E,b)};this._elementClick=p.bind(this,z0);var h=function(_,b,E){b.defaultPrevented||this.fire(q0,E,b)};this._elementTap=h.bind(this,q0);var g=function(_,b,E){b.defaultPrevented||this.fire(Y0,E,b)};this._elementDblTap=g.bind(this,Y0);var y=function(_,b){this.fire(_?Ax:Mx,xt(b),b)};this._elementMouseenter=y.bind(this,!0),this._elementMouseexit=y.bind(this,!1),this._elementMousemove=(function(v){this.fire(xx,xt(v),v)}).bind(this),this._elementMouseup=(function(v){this.fire(Ox,xt(v),v)}).bind(this),this._elementMousedown=(function(v){this.fire(Nx,xt(v),v)}).bind(this),this._elementContextmenu=(function(v){this.fire(Rx,xt(v),v)}).bind(this)}},{key:"_attachEventDelegates",value:function(){var i=this.getContainer();this.eventManager.on(i,vt,$n,this._overlayClick),this.eventManager.on(i,Ot,$n,this._overlayDblClick),this.eventManager.on(i,qt,$n,this._overlayTap),this.eventManager.on(i,Wt,$n,this._overlayDblTap),this.eventManager.on(i,vt,un,this._connectorClick),this.eventManager.on(i,Ot,un,this._connectorDblClick),this.eventManager.on(i,qt,un,this._connectorTap),this.eventManager.on(i,Wt,un,this._connectorDblTap),this.eventManager.on(i,vt,xr,this._endpointClick),this.eventManager.on(i,Ot,xr,this._endpointDblClick),this.eventManager.on(i,vt,this.managedElementsSelector,this._elementClick),this.eventManager.on(i,qt,this.managedElementsSelector,this._elementTap),this.eventManager.on(i,Wt,this.managedElementsSelector,this._elementDblTap),this.eventManager.on(i,Yt,un,this._connectorMouseover),this.eventManager.on(i,zt,un,this._connectorMouseout),this.eventManager.on(i,Yn,un,this._connectorContextmenu),this.eventManager.on(i,te,un,this._connectorMouseup),this.eventManager.on(i,ee,un,this._connectorMousedown),this.eventManager.on(i,Yt,xr,this._endpointMouseover),this.eventManager.on(i,zt,xr,this._endpointMouseout),this.eventManager.on(i,te,xr,this._endpointMouseup),this.eventManager.on(i,ee,xr,this._endpointMousedown),this.eventManager.on(i,Yt,$n,this._overlayMouseover),this.eventManager.on(i,zt,$n,this._overlayMouseout),this.eventManager.on(i,Yt,ye,this._elementMouseenter),this.eventManager.on(i,zt,ye,this._elementMouseexit),this.eventManager.on(i,Ue,ye,this._elementMousemove),this.eventManager.on(i,te,ye,this._elementMouseup),this.eventManager.on(i,ee,ye,this._elementMousedown),this.eventManager.on(i,Yn,ye,this._elementContextmenu)}},{key:"_detachEventDelegates",value:function(){var i=this.getContainer();i&&(this.eventManager.off(i,vt,this._connectorClick),this.eventManager.off(i,Ot,this._connectorDblClick),this.eventManager.off(i,qt,this._connectorTap),this.eventManager.off(i,Wt,this._connectorDblTap),this.eventManager.off(i,vt,this._endpointClick),this.eventManager.off(i,Ot,this._endpointDblClick),this.eventManager.off(i,vt,this._overlayClick),this.eventManager.off(i,Ot,this._overlayDblClick),this.eventManager.off(i,qt,this._overlayTap),this.eventManager.off(i,Wt,this._overlayDblTap),this.eventManager.off(i,vt,this._elementClick),this.eventManager.off(i,qt,this._elementTap),this.eventManager.off(i,Wt,this._elementDblTap),this.eventManager.off(i,Yt,this._connectorMouseover),this.eventManager.off(i,zt,this._connectorMouseout),this.eventManager.off(i,Yn,this._connectorContextmenu),this.eventManager.off(i,te,this._connectorMouseup),this.eventManager.off(i,ee,this._connectorMousedown),this.eventManager.off(i,Yt,this._endpointMouseover),this.eventManager.off(i,zt,this._endpointMouseout),this.eventManager.off(i,te,this._endpointMouseup),this.eventManager.off(i,ee,this._endpointMousedown),this.eventManager.off(i,Yt,this._overlayMouseover),this.eventManager.off(i,zt,this._overlayMouseout),this.eventManager.off(i,rg,this._elementMouseenter),this.eventManager.off(i,og,this._elementMouseexit),this.eventManager.off(i,Ue,this._elementMousemove),this.eventManager.off(i,te,this._elementMouseup),this.eventManager.off(i,ee,this._elementMousedown),this.eventManager.off(i,Yn,this._elementContextmenu))}},{key:"setContainer",value:function(i){var o=this;if(i===document||i===document.body)throw new Error("Cannot set document or document.body as container element");this._detachEventDelegates();var s;this.dragManager!=null&&(s=this.dragManager.reset()),this.setAttribute(i,$0,Ve().replace("-",""));var a=this.getContainer();if(a!=null){a.removeAttribute($0);var l=lu(a.childNodes).filter(function(c){return c!=null&&(o.hasClass(c,tg)||o.hasClass(c,Qo)||o.hasClass(c,Uu)||c.getAttribute&&c.getAttribute(Si)!=null)});P(l,function(c){i.appendChild(c)})}Ce(_e(t.prototype),"setContainer",this).call(this,i),this.containerType=Fp(i),this.eventManager!=null&&this._attachEventDelegates(),this.dragManager!=null&&(this.dragManager.addHandler(new dE(this)),this.dragManager.addHandler(new fE(this,this.dragSelection),this.groupDragOptions),this.elementDragHandler=new Up(this,this.dragSelection),this.dragManager.addHandler(this.elementDragHandler,this.elementDragOptions),s!=null&&this.dragManager.setFilters(s))}},{key:"reset",value:function(){Ce(_e(t.prototype),"reset",this).call(this),this._resizeObserver&&this._resizeObserver.disconnect();var i=this.getContainer(),o=i.querySelectorAll([ye,xr,un,$n].join(","));P(o,function(s){return s.parentNode&&s.parentNode.removeChild(s)})}},{key:"destroy",value:function(){this._detachEventDelegates(),this.dragManager!=null&&this.dragManager.reset(),this.clearDragSelection(),Ce(_e(t.prototype),"destroy",this).call(this)}},{key:"unmanage",value:function(i,o){this._resizeObserver!=null&&this._resizeObserver.unobserve(i),this.removeFromDragSelection(i),Ce(_e(t.prototype),"unmanage",this).call(this,i,o)}},{key:"addToDragSelection",value:function(){for(var i=this,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];P(s,function(l){return i.dragSelection.add(l)})}},{key:"clearDragSelection",value:function(){this.dragSelection.clear()}},{key:"removeFromDragSelection",value:function(){for(var i=this,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];P(s,function(l){return i.dragSelection.remove(l)})}},{key:"toggleDragSelection",value:function(){for(var i=this,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];P(s,function(l){return i.dragSelection.toggle(l)})}},{key:"addToDragGroup",value:function(i){for(var o,s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];(o=this.elementDragHandler).addToDragGroup.apply(o,[i].concat(a))}},{key:"removeFromDragGroup",value:function(){var i;(i=this.elementDragHandler).removeFromDragGroup.apply(i,arguments)}},{key:"setDragGroupState",value:function(i){for(var o,s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];(o=this.elementDragHandler).setDragGroupState.apply(o,[i].concat(a))}},{key:"clearDragGroup",value:function(i){this.elementDragHandler.clearDragGroup(i)}},{key:"consume",value:function(i,o){Oa(i,o)}},{key:"rotate",value:function(i,o,s){var a=this.getId(i);return this._managedElements[a]?(this._managedElements[a].el.style.transform="rotate("+o+"deg)",this._managedElements[a].el.style.transformOrigin="center center",Ce(_e(t.prototype),"rotate",this).call(this,i,o,s)):{c:new Set,e:new Set}}},{key:"addOverlayClass",value:function(i,o){if(Ci(i))i.instance.addClass(dn(i),o);else if(Wo(i))i.instance.addClass(Aa(i),o);else if(Di(i))i.instance.addClass(Rr(i),o);else throw"Could not add class to overlay of type ["+i.type+"]"}},{key:"removeOverlayClass",value:function(i,o){if(Ci(i))i.instance.removeClass(dn(i),o);else if(Wo(i))i.instance.removeClass(Aa(i),o);else if(Di(i))i.instance.removeClass(Rr(i),o);else throw"Could not remove class from overlay of type ["+i.type+"]"}},{key:"_paintOverlay",value:function(i,o,s){if(Ci(i)){dn(i);var a=i.component.getXY();i.canvas.style.left=a.x+o.d.minx+"px",i.canvas.style.top=a.y+o.d.miny+"px"}else if(Wo(i)){var l=isNaN(o.d.cxy.x)||isNaN(o.d.cxy.y)?"M 0 0":"M"+o.d.hxy.x+","+o.d.hxy.y+" L"+o.d.tail[0].x+","+o.d.tail[0].y+" L"+o.d.cxy.x+","+o.d.cxy.y+" L"+o.d.tail[1].x+","+o.d.tail[1].y+" Z";PN(i,l,o,s)}else if(Di(i)){Rr(i);var c=i.component.getXY();i.canvas.style.left=c.x+o.d.minx+"px",i.canvas.style.top=c.y+o.d.miny+"px"}else throw"Could not paint overlay of type ["+i.type+"]"}},{key:"setOverlayVisible",value:function(i,o){var s=o?"block":"none";function a(l){l!=null&&(l.style.display=s)}Ci(i)?a(dn(i)):Di(i)?a(Rr(i)):Wo(i)&&a(i.path)}},{key:"reattachOverlay",value:function(i,o){Ci(i)?i.instance._appendElement(dn(i),this.getContainer()):Di(i)?i.instance._appendElement(Rr(i),this.getContainer()):Wo(i)&&this._appendElement(Aa(i),o.connector.canvas)}},{key:"setOverlayHover",value:function(i,o){var s;Ci(i)?s=dn(i):Di(i)?s=Rr(i):Wo(i)&&(s=Aa(i)),s!=null&&(this.hoverClass!=null&&(o?this.addClass(s,this.hoverClass):this.removeClass(s,this.hoverClass)),this.setHover(i.component,o))}},{key:"destroyOverlay",value:function(i){if(Ci(i)){var o=dn(i);o.parentNode.removeChild(o),delete i.canvas,delete i.cachedDimensions}else if(Wp(i)||zp(i)||Yp(i))FN(i);else if(Di(i)){var s=Rr(i);s.parentNode.removeChild(s),delete i.canvas,delete i.cachedDimensions}}},{key:"drawOverlay",value:function(i,o,s,a){if(Ci(i)||Di(i)){var l=gg._getDimensions(i);if(l!=null&&l.w!=null&&l.h!=null){var c={x:0,y:0};if(a)c={x:a.x,y:a.y};else if(o instanceof ls){var u=Array.isArray(i.location)?i.location:[i.location,i.location];c={x:u[0]*o.w,y:u[1]*o.h}}else{var d=i.location,p=!1;(De(i.location)||i.location<0||i.location>1)&&(d=parseInt(""+i.location,10),p=!0),c=o.pointOnPath(d,p)}var h=c.x-l.w/2,g=c.y-l.h/2;return{component:i,d:{minx:h,miny:g,td:l,cxy:c},xmin:h,xmax:h+l.w,ymin:g,ymax:g+l.h}}else return{xmin:0,xmax:0,ymin:0,ymax:0}}else{if(Wp(i)||zp(i)||Yp(i))return i.draw(o,s,a);throw"Could not draw overlay of type ["+i.type+"]"}}},{key:"updateLabel",value:function(i){if(Vr(i.label)){var o=i.label(this);o!=null?dn(i).innerText=o:dn(i).innerText=""}else i.labelText==null&&(i.labelText=i.label,i.labelText!=null?dn(i).innerText=i.labelText:dn(i).innerText="")}},{key:"setHover",value:function(i,o){i._hover=o,i instanceof Zo&&i.endpoint!=null?this.setEndpointHover(i,o,-1):i instanceof Fa&&i.connector!=null&&this.setConnectorHover(i.connector,o)}},{key:"paintConnector",value:function(i,o,s){LN(this,i,o,s)}},{key:"setConnectorHover",value:function(i,o,s){if(o===!1||!this.currentlyDragging&&!this.isHoverSuspended()){var a=i.canvas;a!=null&&(i.hoverClass!=null&&(o?this.addClass(a,i.hoverClass):this.removeClass(a,i.hoverClass)),o?this.addClass(a,this.hoverClass):this.removeClass(a,this.hoverClass)),i.connection.hoverPaintStyle!=null&&(i.connection.paintStyleInUse=o?i.connection.hoverPaintStyle:i.connection.paintStyle,this._suspendDrawing||this._paintConnection(i.connection)),i.connection.endpoints[0]!==s&&this.setEndpointHover(i.connection.endpoints[0],o,0,!0),i.connection.endpoints[1]!==s&&this.setEndpointHover(i.connection.endpoints[1],o,1,!0)}}},{key:"destroyConnector",value:function(i){i.connector!=null&&AE(i.connector)}},{key:"addConnectorClass",value:function(i,o){i.canvas&&this.addClass(i.canvas,o)}},{key:"removeConnectorClass",value:function(i,o){i.canvas&&this.removeClass(i.canvas,o)}},{key:"getConnectorClass",value:function(i){return i.canvas?i.canvas.className.baseVal:""}},{key:"setConnectorVisible",value:function(i,o){ME(i,o)}},{key:"applyConnectorType",value:function(i,o){if(i.canvas&&o.cssClass){var s=Array.isArray(o.cssClass)?o.cssClass:[o.cssClass];this.addClass(i.canvas,s.join(" "))}}},{key:"addEndpointClass",value:function(i,o){var s=wa(i.endpoint);s!=null&&this.addClass(s,o)}},{key:"applyEndpointType",value:function(i,o){if(o.cssClass){var s=wa(i.endpoint);if(s){var a=Array.isArray(o.cssClass)?o.cssClass:[o.cssClass];this.addClass(s,a.join(" "))}}}},{key:"destroyEndpoint",value:function(i){var o=this.endpointAnchorClassPrefix+(i.currentAnchorClass?"-"+i.currentAnchorClass:"");this.removeClass(i.element,o),AE(i.endpoint)}},{key:"renderEndpoint",value:function(i,o){var s=Pb[i.endpoint.type];s!=null?jN.paint(i.endpoint,s,o):Le("jsPlumb: no endpoint renderer found for type ["+i.endpoint.type+"]")}},{key:"removeEndpointClass",value:function(i,o){var s=wa(i.endpoint);s!=null&&this.removeClass(s,o)}},{key:"getEndpointClass",value:function(i){var o=wa(i.endpoint);return o!=null?o.className:""}},{key:"setEndpointHover",value:function(i,o,s,a){if(i!=null&&(o===!1||!this.currentlyDragging&&!this.isHoverSuspended())){var l=wa(i.endpoint);if(l!=null&&(i.hoverClass!=null&&(o?this.addClass(l,i.hoverClass):this.removeClass(l,i.hoverClass)),s===0||s===1)){var c=s===0?this.hoverSourceClass:this.hoverTargetClass;o?this.addClass(l,c):this.removeClass(l,c)}if(i.hoverPaintStyle!=null&&(i.paintStyleInUse=o?i.hoverPaintStyle:i.paintStyle,this._suspendDrawing||this.renderEndpoint(i,i.paintStyleInUse)),!a)for(var u=0;u<i.connections.length;u++)this.setConnectorHover(i.connections[u].connector,o,i)}}},{key:"setEndpointVisible",value:function(i,o){ME(i.endpoint,o)}},{key:"setGroupVisible",value:function(i,o){for(var s=i.el.querySelectorAll(ye),a=0;a<s.length;a++)o?this.show(s[a],!0):this.hide(s[a],!0)}},{key:"deleteConnection",value:function(i,o){return i!=null&&i.deleted!==!0?(i.endpoints[0].deleted!==!0&&this.setEndpointHover(i.endpoints[0],!1,0,!0),i.endpoints[1].deleted!==!0&&this.setEndpointHover(i.endpoints[1],!1,1,!0),Ce(_e(t.prototype),"deleteConnection",this).call(this,i,o)):!1}},{key:"addSourceSelector",value:function(i,o,s){return this.addDragFilter(i),Ce(_e(t.prototype),"addSourceSelector",this).call(this,i,o,s)}},{key:"removeSourceSelector",value:function(i){this.removeDragFilter(i.selector),Ce(_e(t.prototype),"removeSourceSelector",this).call(this,i)}},{key:"manage",value:function(i,o,s){if(this.containerType===ns.SVG&&!LA(i))throw new Error("ERROR: cannot manage non-svg element when container is an SVG element.");var a=Ce(_e(t.prototype),"manage",this).call(this,i,o,s);return a!=null&&this._resizeObserver!=null&&this._resizeObserver.observe(a.el),a}}]),t}(oR),lR="circle",cR=function(){vg(as.type,{makeNode:function(t,r){return Zn(lR,{cx:t.w/2,cy:t.h/2,r:t.radius})},updateNode:function(t,r){Kn(r,{cx:""+t.w/2,cy:""+t.h/2,r:""+t.radius})}})},Bu=function(e){oe(t,e);var n=se(t);function t(r,i){var o;return R(this,t),o=n.call(this,r,i),f(m(o),"width",void 0),f(m(o),"height",void 0),f(m(o),"type",t.type),i=i||{},o.width=i.width||10,o.height=i.height||10,o}return V(t,null,[{key:"_getParams",value:function(i){return{width:i.width,height:i.height}}}]),t}(ls);f(Bu,"type","Rectangle");var uR={type:Bu.type,cls:Bu,compute:function(n,t,r,i){var o=i.width||n.width,s=i.height||n.height,a=t.curX-o/2,l=t.curY-s/2;return n.x=a,n.y=l,n.w=o,n.h=s,[a,l,o,s]},getParams:function(n){return{width:n.width,height:n.height}}},dR="rect",fR=function(){vg(Bu.type,{makeNode:function(t,r){return Zn(dR,{width:t.w,height:t.h})},updateNode:function(t,r){Kn(r,{width:t.w,height:t.h})}})},Hu=function(e){oe(t,e);var n=se(t);function t(r,i){var o;return R(this,t),o=n.call(this,r,i),f(m(o),"type",t.type),o}return t}(ls);f(Hu,"type","Blank");var hR={type:Hu.type,cls:Hu,compute:function(n,t,r,i){return n.x=t.curX,n.y=t.curY,n.w=10,n.h=0,[t.curX,t.curY,10,0]},getParams:function(n){return{}}},xE={width:10,height:0,fill:"transparent",stroke:"transparent"},pR=function(){vg(Hu.type,{makeNode:function(t,r){return Zn("rect",xE)},updateNode:function(t,r){Kn(r,xE)}})};cR();pR();fR();var zn=function(e){return e[e.top=0]="top",e[e.bottom=1]="bottom",e}(zn||{}),yg=new Map;yg.set(zn.top,[Xn.TopRight,Xn.TopLeft]);yg.set(zn.bottom,[Xn.BottomRight,Xn.BottomLeft]);var gR={deriveAnchor:function(n,t,r,i){return yg.get(n)[t]}},_g="jtk-scrollable-list",mR=Gu(_g),OE="scroll",s9=function(){function e(n,t){var r=this;R(this,e),this.instance=n,f(this,"options",void 0),f(this,"count",void 0),f(this,"lists",void 0),this.count=0,this.lists={},this.options=t||{},this.instance.bind(ob,function(i){for(var o=r.instance.getSelector(i.el,mR),s=0;s<o.length;s++)r.addList(o[s])}),this.instance.bind(ab,function(i){r.removeList(i.el)}),this.instance.bind(tb,function(i,o){if(o==null){var s=r.findParentList(i.target);s?.newConnection(i.connection,i.target,1);var a=r.findParentList(i.source);a?.newConnection(i.connection,i.source,0)}}),this.instance.bind(cb,function(i){var o=i.dropEndpoint.element,s=r.findParentList(o);return s==null||o.offsetTop>=s.domElement.scrollTop&&o.offsetTop+o.offsetHeight<=s.domElement.scrollTop+s.domElement.offsetHeight})}return V(e,[{key:"addList",value:function(t,r){var i=k({},gR);k(i,this.options),r=k(i,r||{});var o=[this.instance._instanceIndex,this.count++].join("_");return this.lists[o]=new vR(this.instance,t,r,o),this.lists[o]}},{key:"getList",value:function(t){var r=this.instance.getAttribute(t,_g);if(r!=null)return this.lists[r]}},{key:"removeList",value:function(t){var r=this.getList(t);r&&(r.destroy(),delete this.lists[r.id])}},{key:"findParentList",value:function(t){for(var r=t.parentNode,i=this.instance.getContainer(),o;r!=null&&r!==i&&r!==document;){if(o=this.getList(r),o!=null)return o;r=r.parentNode}}}]),e}(),vR=function(){function e(n,t,r,i){R(this,e),this.instance=n,this.el=t,this.options=r,this.id=i,f(this,"_scrollHandler",void 0),f(this,"domElement",void 0),f(this,"elId",void 0),this.domElement=t,this.elId=this.instance.getId(t),n.setAttribute(t,_g,i),this._scrollHandler=this.scrollHandler.bind(this),this.domElement._jsPlumbScrollHandler=this._scrollHandler,n.on(t,OE,this._scrollHandler),this._scrollHandler()}return V(e,[{key:"deriveAnchor",value:function(t,r,i,o){return this.options.anchor?this.options.anchor:this.options.deriveAnchor(t,r,i,o)}},{key:"deriveEndpoint",value:function(t,r,i,o){return this.options.deriveEndpoint?this.options.deriveEndpoint(t,r,i,o):this.options.endpoint?this.options.endpoint:i.endpoint.type}},{key:"newConnection",value:function(t,r,i){r.offsetTop<this.el.scrollTop?this._proxyConnection(r,t,i,zn.top):r.offsetTop+r.offsetHeight>this.el.scrollTop+this.domElement.offsetHeight&&this._proxyConnection(r,t,i,zn.bottom)}},{key:"scrollHandler",value:function(){for(var t=this,r=this.instance.getSelector(this.el,ye),i=function(a){if(r[a].offsetTop<t.el.scrollTop)r[a]._jsPlumbProxies=r[a]._jsPlumbProxies||[],t.instance.select({source:r[a]}).each(function(c){t._proxyConnection(r[a],c,0,zn.top)}),t.instance.select({target:r[a]}).each(function(c){t._proxyConnection(r[a],c,1,zn.top)});else if(r[a].offsetTop+r[a].offsetHeight>t.el.scrollTop+t.domElement.offsetHeight)r[a]._jsPlumbProxies=r[a]._jsPlumbProxies||[],t.instance.select({source:r[a]}).each(function(c){t._proxyConnection(r[a],c,0,zn.bottom)}),t.instance.select({target:r[a]}).each(function(c){t._proxyConnection(r[a],c,1,zn.bottom)});else if(r[a]._jsPlumbProxies){for(var l=0;l<r[a]._jsPlumbProxies.length;l++)t.instance.unproxyConnection(r[a]._jsPlumbProxies[l][0],r[a]._jsPlumbProxies[l][1]);delete r[a]._jsPlumbProxies}t.instance.revalidate(r[a])},o=0;o<r.length;o++)i(o)}},{key:"_proxyConnection",value:function(t,r,i,o){var s=this;this.instance.proxyConnection(r,i,this.domElement,function(a,l){return s.deriveEndpoint(o,l,r.endpoints[l],r)},function(a,l){return s.deriveAnchor(o,l,r.endpoints[l],r)}),t._jsPlumbProxies=t._jsPlumbProxies||[],t._jsPlumbProxies.push([r,i])}},{key:"destroy",value:function(){this.instance.off(this.el,OE,this._scrollHandler),delete this.domElement._jsPlumbScrollHandler;for(var t=this.instance.getSelector(this.el,ye),r=0;r<t.length;r++)if(t[r]._jsPlumbProxies){for(var i=0;i<t[r]._jsPlumbProxies.length;i++)this.instance.unproxyConnection(t[r]._jsPlumbProxies[i][0],t[r]._jsPlumbProxies[i][1]);delete t[r]._jsPlumbProxies}}}]),e}(),NE=1e-10;function RE(e){var n=Math.floor(e),t=Math.ceil(e);return e-n<NE?n:t-e<NE?t:e}var Eg=function(e){oe(t,e);var n=se(t);function t(r){var i;R(this,t),i=n.call(this,r),f(m(i),"type",t.segmentType),f(m(i),"cx",void 0),f(m(i),"cy",void 0),f(m(i),"radius",void 0),f(m(i),"anticlockwise",void 0),f(m(i),"startAngle",void 0),f(m(i),"endAngle",void 0),f(m(i),"sweep",void 0),f(m(i),"length",void 0),f(m(i),"circumference",void 0),f(m(i),"frac",void 0),i.cx=r.cx,i.cy=r.cy,i.radius=r.r,i.anticlockwise=r.ac,r.startAngle&&r.endAngle?(i.startAngle=r.startAngle,i.endAngle=r.endAngle,i.x1=i.cx+i.radius*Math.cos(i.startAngle),i.y1=i.cy+i.radius*Math.sin(i.startAngle),i.x2=i.cx+i.radius*Math.cos(i.endAngle),i.y2=i.cy+i.radius*Math.sin(i.endAngle)):(i.startAngle=i._calcAngle(i.x1,i.y1),i.endAngle=i._calcAngle(i.x2,i.y2)),i.endAngle<0&&(i.endAngle+=Or),i.startAngle<0&&(i.startAngle+=Or);var o=i.endAngle<i.startAngle?i.endAngle+Or:i.endAngle;return i.sweep=Math.abs(o-i.startAngle),i.anticlockwise&&(i.sweep=Or-i.sweep),i.circumference=2*Math.PI*i.radius,i.frac=i.sweep/Or,i.length=i.circumference*i.frac,i.extents={xmin:i.cx-i.radius,xmax:i.cx+i.radius,ymin:i.cy-i.radius,ymax:i.cy+i.radius},i}return V(t,[{key:"_calcAngle",value:function(i,o){return EO({x:this.cx,y:this.cy},{x:i,y:o})}},{key:"_calcAngleForLocation",value:function(i,o){if(i.anticlockwise){var s=i.startAngle<i.endAngle?i.startAngle+Or:i.startAngle,a=Math.abs(s-i.endAngle);return s-a*o}else{var l=i.endAngle<i.startAngle?i.endAngle+Or:i.endAngle,c=Math.abs(l-i.startAngle);return i.startAngle+c*o}}},{key:"getPath",value:function(i){var o=this.sweep>Math.PI?1:0,s=this.anticlockwise?0:1;return(i?"M"+this.x1+" "+this.y1+" ":"")+"A "+this.radius+" "+this.radius+" 0 "+o+","+s+" "+this.x2+" "+this.y2}},{key:"getLength",value:function(){return this.length}},{key:"pointOnPath",value:function(i,o){if(i===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(i===1)return{x:this.x2,y:this.y2,theta:this.endAngle};o&&(i=i/length);var s=this._calcAngleForLocation(this,i),a=this.cx+this.radius*Math.cos(s),l=this.cy+this.radius*Math.sin(s);return{x:RE(a),y:RE(l),theta:s}}},{key:"gradientAtPoint",value:function(i,o){var s=this.pointOnPath(i,o),a=_O({x:this.cx,y:this.cy},s);return!this.anticlockwise&&(a===1/0||a===-1/0)&&(a*=-1),a}},{key:"pointAlongPathFrom",value:function(i,o,s){var a=this.pointOnPath(i,s),l=o/this.circumference*2*Math.PI,c=this.anticlockwise?-1:1,u=a.theta+c*l,d=this.cx+this.radius*Math.cos(u),p=this.cy+this.radius*Math.sin(u);return{x:d,y:p}}}]),t}(sg);f(Eg,"segmentType","Arc");var Fb=function(e){oe(t,e);var n=se(t);function t(r,i){var o;return R(this,t),o=n.call(this,r,i),o.connection=r,f(m(o),"showLoopback",void 0),f(m(o),"curviness",void 0),f(m(o),"margin",void 0),f(m(o),"proximityLimit",void 0),f(m(o),"orientation",void 0),f(m(o),"loopbackRadius",void 0),f(m(o),"clockwise",void 0),f(m(o),"isLoopbackCurrently",void 0),f(m(o),"geometry",null),i=i||{},o.showLoopback=i.showLoopback!==!1,o.curviness=i.curviness||10,o.margin=i.margin||5,o.proximityLimit=i.proximityLimit||80,o.clockwise=i.orientation&&i.orientation==="clockwise",o.loopbackRadius=i.loopbackRadius||25,o.isLoopbackCurrently=!1,o}return V(t,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(i,o){var s=o.sourcePos,a=o.targetPos,l=Math.abs(s.curX-a.curX),c=Math.abs(s.curY-a.curY);if(!this.showLoopback||o.sourceEndpoint.elementId!==o.targetEndpoint.elementId)this.isLoopbackCurrently=!1,this._computeBezier(i,o,s,a,l,c);else{this.isLoopbackCurrently=!0;var u=o.sourcePos.curX,d=o.sourcePos.curY-this.margin,p=u,h=d-this.loopbackRadius,g=p-this.loopbackRadius,y=h-this.loopbackRadius;l=2*this.loopbackRadius,c=2*this.loopbackRadius,i.points[0]=g,i.points[1]=y,i.points[2]=l,i.points[3]=c,this._addSegment(Eg,{loopback:!0,x1:u-g+4,y1:d-y,startAngle:0,endAngle:2*Math.PI,r:this.loopbackRadius,ac:!this.clockwise,x2:u-g-4,y2:d-y,cx:p-g,cy:h-y})}}},{key:"exportGeometry",value:function(){return this.geometry==null?null:{controlPoints:[k({},this.geometry.controlPoints[0]),k({},this.geometry.controlPoints[1])],source:k({},this.geometry.source),target:k({},this.geometry.target)}}},{key:"transformGeometry",value:function(i,o,s){return{controlPoints:[{x:i.controlPoints[0].x+o,y:i.controlPoints[0].y+s},{x:i.controlPoints[1].x+o,y:i.controlPoints[1].y+s}],source:this.transformAnchorPlacement(i.source,o,s),target:this.transformAnchorPlacement(i.target,o,s)}}},{key:"importGeometry",value:function(i){return i!=null?i.controlPoints==null||i.controlPoints.length!=2?(Le("jsPlumb Bezier: cannot import geometry; controlPoints missing or does not have length 2"),this.setGeometry(null,!0),!1):i.controlPoints[0].x==null||i.controlPoints[0].y==null||i.controlPoints[1].x==null||i.controlPoints[1].y==null?(Le("jsPlumb Bezier: cannot import geometry; controlPoints malformed"),this.setGeometry(null,!0),!1):i.source==null||i.source.curX==null||i.source.curY==null?(Le("jsPlumb Bezier: cannot import geometry; source missing or malformed"),this.setGeometry(null,!0),!1):i.target==null||i.target.curX==null||i.target.curY==null?(Le("jsPlumb Bezier: cannot import geometry; target missing or malformed"),this.setGeometry(null,!0),!1):(this.setGeometry(i,!1),!0):!1}}]),t}(Wu),bn={subtract:function(n,t){return{x:n.x-t.x,y:n.y-t.y}},dotProduct:function(n,t){return n.x*t.x+n.y*t.y},square:function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},scale:function(n,t){return{x:n.x*t,y:n.y*t}}},Lb=64,yR=Math.pow(2,-Lb-1);function _R(e,n){for(var t=[],r=bR(e,n),i=n.length-1,o=2*i-1,s=qp(r,o,t,0),a=bn.subtract(e,n[0]),l=bn.square(a),c=0,u,d=0;d<s;d++)a=bn.subtract(e,bg(n,i,t[d],null,null)),u=bn.square(a),u<l&&(l=u,c=t[d]);return a=bn.subtract(e,n[i]),u=bn.square(a),u<l&&(l=u,c=1),{location:c,distance:l}}function ER(e,n){var t=_R(e,n);return{point:bg(n,n.length-1,t.location,null,null),location:t.location}}function bR(e,n){for(var t=n.length-1,r=2*t-1,i=[],o=[],s=[],a=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],c=0;c<=t;c++)i[c]=bn.subtract(n[c],e);for(var u=0;u<=t-1;u++)o[u]=bn.subtract(n[u+1],n[u]),o[u]=bn.scale(o[u],3);for(var d=0;d<=t-1;d++)for(var p=0;p<=t;p++)s[d]||(s[d]=[]),s[d][p]=bn.dotProduct(o[d],i[p]);for(var h=0;h<=r;h++)a[h]||(a[h]=[]),a[h].y=0,a[h].x=parseFloat(""+h)/r;for(var g=t,y=t-1,v=0;v<=g+y;v++)for(var _=Math.max(0,v-y),b=Math.min(v,g),E=_;E<=b;E++){var C=v-E;a[E+C].y+=s[C][E]*l[C][E]}return a}function qp(e,n,t,r){var i=[],o=[],s,a,l=[],c=[];switch(CR(e,n)){case 0:return 0;case 1:{if(r>=Lb)return t[0]=(e[0].x+e[n].x)/2,1;if(DR(e,n))return t[0]=wR(e,n),1;break}}bg(e,n,.5,i,o),s=qp(i,n,l,r+1),a=qp(o,n,c,r+1);for(var u=0;u<s;u++)t[u]=l[u];for(var d=0;d<a;d++)t[d+s]=c[d];return s+a}function CR(e,n){var t=0,r,i;r=i=Mu(e[0].y);for(var o=1;o<=n;o++)r=Mu(e[o].y),r!=i&&t++,i=r;return t}function DR(e,n){var t,r,i,o,s,a,l,c,u,d,p,h,g,y,v,_;a=e[0].y-e[n].y,l=e[n].x-e[0].x,c=e[0].x*e[n].y-e[n].x*e[0].y;var b,E;b=E=0;for(var C=1;C<n;C++){var T=a*e[C].x+l*e[C].y+c;T>b?b=T:T<E&&(E=T)}return p=0,h=1,g=0,y=a,v=l,_=c-b,u=p*v-y*h,d=1/u,r=(h*_-v*g)*d,y=a,v=l,_=c-E,u=p*v-y*h,d=1/u,i=(h*_-v*g)*d,o=Math.min(r,i),s=Math.max(r,i),t=s-o,t<yR?1:0}function wR(e,n){var t=1,r=0,i=e[n].x-e[0].x,o=e[n].y-e[0].y,s=e[0].x-0,a=e[0].y-0,l=i*r-o*t,c=1/l,u=(i*a-o*s)*c;return 0+t*u}function bg(e,n,t,r,i){for(var o=[[]],s=0;s<=n;s++)o[0][s]=e[s];for(var a=1;a<=n;a++)for(var l=0;l<=n-a;l++)o[a]||(o[a]=[]),o[a][l]||(o[a][l]={}),o[a][l].x=(1-t)*o[a-1][l].x+t*o[a-1][l+1].x,o[a][l].y=(1-t)*o[a-1][l].y+t*o[a-1][l+1].y;if(r!=null)for(var c=0;c<=n;c++)r[c]=o[c][0];if(i!=null)for(var u=0;u<=n;u++)i[u]=o[n-u][u];return o[n][0]}function TR(e,n){var t=[];e--;for(var r=0;r<=e;r++)t.push(SR(r/e,n));return t}function SR(e,n){var t={x:0,y:0};if(e===0)return n[0];var r=n.length-1;if(e===1)return n[r];var i=n,o=1-e;if(r===0)return n[0];if(r===1)return{x:o*i[0].x+e*i[1].x,y:o*i[0].y+e*i[1].y};if(4>r){var s=o*o,a=e*e,l=0,c,u,d;return r===2?(i=[i[0],i[1],i[2],t],c=s,u=2*(o*e),d=a):r===3&&(c=s*o,u=3*(s*e),d=3*(o*a),l=e*a),{x:c*i[0].x+u*i[1].x+d*i[2].x+l*i[3].x,y:c*i[0].y+u*i[1].y+d*i[2].y+l*i[3].y}}else return t}function IR(e){var n=0;if(!jb(e))for(var t=16,r=TR(t,e),i=0;i<t-1;i++){var o=r[i],s=r[i+1];n+=Vb(o,s)}return n}var kE=new Map;function MR(e){var n=kE.get(e);if(!n){n=[];var t=function(){return function(h){return Math.pow(h,e)}},r=function(){return function(h){return Math.pow(1-h,e)}},i=function(h){return function(g){return h}},o=function(){return function(h){return h}},s=function(){return function(h){return 1-h}},a=function(h){return function(g){for(var y=1,v=0;v<h.length;v++)y=y*h[v](g);return y}};n.push(t());for(var l=1;l<e;l++){for(var c=[i(e)],u=0;u<e-l;u++)c.push(o());for(var d=0;d<l;d++)c.push(s());n.push(a(c))}n.push(r()),kE.set(e,n)}return n}function La(e,n){for(var t=MR(e.length-1),r=0,i=0,o=0;o<e.length;o++)r=r+e[o].x*t[o](n),i=i+e[o].y*t[o](n);return{x:r,y:i}}function Vb(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function jb(e){return e[0].x===e[1].x&&e[0].y===e[1].y}function Bb(e,n,t){if(jb(e))return{point:e[0],location:n};for(var r=La(e,n),i=0,o=n,s=t>0?1:-1,a=null;i<Math.abs(t);)o+=.005*s,a=La(e,o),i+=Vb(a,r),r=a;return{point:a,location:o}}function AR(e,n,t){return Bb(e,n,t).point}function xR(e,n,t){return Bb(e,n,t).location}function OR(e,n){var t=La(e,n),r=La(e.slice(0,e.length-1),n),i=r.y-t.y,o=r.x-t.x;return i===0?1/0:Math.atan(i/o)}function NR(e,n,t,r,i){var o=r-n,s=e-t,a=e*(n-r)+n*(t-e),l=RR(i),c=[o*l[0][0]+s*l[1][0],o*l[0][1]+s*l[1][1],o*l[0][2]+s*l[1][2],o*l[0][3]+s*l[1][3]+a],u=kR.apply(null,c),d=[];if(u!=null)for(var p=0;p<3;p++){var h=u[p],g=Math.pow(h,2),y=Math.pow(h,3),v={x:l[0][0]*y+l[0][1]*g+l[0][2]*h+l[0][3],y:l[1][0]*y+l[1][1]*g+l[1][2]*h+l[1][3]},_=void 0;t-e!==0?_=(v[0]-e)/(t-e):_=(v[1]-n)/(r-n),h>=0&&h<=1&&_>=0&&_<=1&&d.push(v)}return d}function PE(e,n){return[-e[0][n]+3*e[1][n]+-3*e[2][n]+e[3][n],3*e[0][n]-6*e[1][n]+3*e[2][n],-3*e[0][n]+3*e[1][n],e[0][n]]}function RR(e){return[PE(e,"x"),PE(e,"y")]}function kR(e,n,t,r){var i=n/e,o=t/e,s=r/e,a=(3*o-Math.pow(i,2))/9,l=(9*i*o-27*s-2*Math.pow(i,3))/54,c=Math.pow(a,3)+Math.pow(l,2),u,d,p=[0,0,0];if(c>=0)u=Mu(l+Math.sqrt(c))*Math.pow(Math.abs(l+Math.sqrt(c)),1/3),d=Mu(l-Math.sqrt(c))*Math.pow(Math.abs(l-Math.sqrt(c)),1/3),p[0]=-i/3+(u+d),p[1]=-i/3-(u+d)/2,p[2]=-i/3-(u+d)/2,Math.abs(Math.sqrt(3)*(u-d)/2)!==0&&(p[1]=-1,p[2]=-1);else{var h=Math.acos(l/Math.sqrt(-Math.pow(a,3)));p[0]=2*Math.sqrt(-a)*Math.cos(h/3)-i/3,p[1]=2*Math.sqrt(-a)*Math.cos((h+2*Math.PI)/3)-i/3,p[2]=2*Math.sqrt(-a)*Math.cos((h+4*Math.PI)/3)-i/3}for(var g=0;g<3;g++)(p[g]<0||p[g]>1)&&(p[g]=-1);return p}var Cg=function(e){oe(t,e);var n=se(t);function t(r){var i;return R(this,t),i=n.call(this,r),f(m(i),"curve",void 0),f(m(i),"cp1x",void 0),f(m(i),"cp1y",void 0),f(m(i),"cp2x",void 0),f(m(i),"cp2y",void 0),f(m(i),"length",0),f(m(i),"type",t.segmentType),i.cp1x=r.cp1x,i.cp1y=r.cp1y,i.cp2x=r.cp2x,i.cp2y=r.cp2y,i.x1=r.x1,i.x2=r.x2,i.y1=r.y1,i.y2=r.y2,i.curve=[{x:i.x1,y:i.y1},{x:i.cp1x,y:i.cp1y},{x:i.cp2x,y:i.cp2y},{x:i.x2,y:i.y2}],i.extents={xmin:Math.min(i.x1,i.x2,i.cp1x,i.cp2x),ymin:Math.min(i.y1,i.y2,i.cp1y,i.cp2y),xmax:Math.max(i.x1,i.x2,i.cp1x,i.cp2x),ymax:Math.max(i.y1,i.y2,i.cp1y,i.cp2y)},i}return V(t,[{key:"getPath",value:function(i){return(i?"M "+this.x2+" "+this.y2+" ":"")+"C "+this.cp2x+" "+this.cp2y+" "+this.cp1x+" "+this.cp1y+" "+this.x1+" "+this.y1}},{key:"pointOnPath",value:function(i,o){return i=t._translateLocation(this.curve,i,o),La(this.curve,i)}},{key:"gradientAtPoint",value:function(i,o){return i=t._translateLocation(this.curve,i,o),OR(this.curve,i)}},{key:"pointAlongPathFrom",value:function(i,o,s){return i=t._translateLocation(this.curve,i,s),AR(this.curve,i,o)}},{key:"getLength",value:function(){return(this.length==null||this.length===0)&&(this.length=IR(this.curve)),this.length}},{key:"findClosestPointOnPath",value:function(i,o){var s=ER({x:i,y:o},this.curve);return{d:Math.sqrt(Math.pow(s.point.x-i,2)+Math.pow(s.point.y-o,2)),x:s.point.x,y:s.point.y,l:1-s.location,s:this,x1:null,y1:null,x2:null,y2:null}}},{key:"lineIntersection",value:function(i,o,s,a){return NR(i,o,s,a,this.curve)}}],[{key:"_translateLocation",value:function(i,o,s){return s&&(o=xR(i,o>0?0:1,o)),o}}]),t}(sg);f(Cg,"segmentType","Bezier");var Kp=function(e){oe(t,e);var n=se(t);function t(r,i){var o;return R(this,t),o=n.call(this,r,i),o.connection=r,f(m(o),"type",t.type),f(m(o),"majorAnchor",void 0),f(m(o),"minorAnchor",void 0),i=i||{},o.majorAnchor=i.curviness||150,o.minorAnchor=10,o}return V(t,[{key:"getCurviness",value:function(){return this.majorAnchor}},{key:"_findControlPoint",value:function(i,o,s,a,l){var c=a[0]!==l[0]||a[1]===l[1],u={x:0,y:0};return c?(l[0]===0?u.x=s.curX<o.curX?i.x+this.minorAnchor:i.x-this.minorAnchor:u.x=i.x+this.majorAnchor*l[0],l[1]===0?u.y=s.curY<o.curY?i.y+this.minorAnchor:i.y-this.minorAnchor:u.y=i.y+this.majorAnchor*a[1]):(a[0]===0?u.x=o.curX<s.curX?i.x+this.minorAnchor:i.x-this.minorAnchor:u.x=i.x-this.majorAnchor*a[0],a[1]===0?u.y=o.curY<s.curY?i.y+this.minorAnchor:i.y-this.minorAnchor:u.y=i.y+this.majorAnchor*l[1]),u}},{key:"_computeBezier",value:function(i,o,s,a,l,c){var u,d,p=s.curX<a.curX?l:0,h=s.curY<a.curY?c:0,g=s.curX<a.curX?0:l,y=s.curY<a.curY?0:c;this.edited!==!0?(u=this._findControlPoint({x:p,y:h},s,a,i.so,i.to),d=this._findControlPoint({x:g,y},a,s,i.to,i.so)):(u=this.geometry.controlPoints[0],d=this.geometry.controlPoints[1]),this.geometry={controlPoints:[u,d],source:o.sourcePos,target:o.targetPos},this._addSegment(Cg,{x1:p,y1:h,x2:g,y2:y,cp1x:u.x,cp1y:u.y,cp2x:d.x,cp2y:d.y})}}]),t}(Fb);f(Kp,"type","Bezier");function PR(e,n,t,r){return e<=t&&r<=n?1:e<=t&&n<=r?2:t<=e&&r>=n?3:4}function FR(e,n,t,r,i,o,s,a,l){if(a<=l)return{x:e,y:n};if(t===1)return r.curY<=0&&i.curY>=1?{x:e+(r.x<.5?-1*o:o),y:n}:r.curX>=1&&i.curX<=0?{x:e,y:n+(r.y<.5?-1*s:s)}:{x:e+-1*o,y:n+-1*s};if(t===2)return r.curY>=1&&i.curY<=0?{x:e+(r.x<.5?-1*o:o),y:n}:r.curX>=1&&i.curX<=0?{x:e,y:n+(r.y<.5?-1*s:s)}:{x:e+o,y:n+-1*s};if(t===3)return r.curY>=1&&i.curY<=0?{x:e+(r.x<.5?-1*o:o),y:n}:r.curX<=0&&i.curX>=1?{x:e,y:n+(r.y<.5?-1*s:s)}:{x:e+-1*o,y:n+-1*s};if(t===4)return r.curY<=0&&i.curY>=1?{x:e+(r.x<.5?-1*o:o),y:n}:r.curX<=0&&i.curX>=1?{x:e,y:n+(r.y<.5?-1*s:s)}:{x:e+o,y:n+-1*s}}var Zp=function(e){oe(t,e);var n=se(t);function t(r,i){var o;return R(this,t),o=n.call(this,r,i),o.connection=r,f(m(o),"type",t.type),f(m(o),"_controlPoint",void 0),o.curviness=i.curviness||10,o.margin=i.margin||5,o.proximityLimit=i.proximityLimit||80,o.clockwise=i.orientation&&i.orientation==="clockwise",o}return V(t,[{key:"_computeBezier",value:function(i,o,s,a,l,c){var u=s.curX<a.curX?0:l,d=s.curY<a.curY?0:c,p=s.curX<a.curX?l:0,h=s.curY<a.curY?c:0;if(s.x===0&&(u-=this.margin),s.x===1&&(u+=this.margin),s.y===0&&(d-=this.margin),s.y===1&&(d+=this.margin),a.x===0&&(p-=this.margin),a.x===1&&(p+=this.margin),a.y===0&&(h-=this.margin),a.y===1&&(h+=this.margin),this.edited!==!0){var g=(u+p)/2,y=(d+h)/2,v=PR(u,d,p,h),_=Math.sqrt(Math.pow(p-u,2)+Math.pow(h-d,2));this._controlPoint=FR(g,y,v,o.sourcePos,o.targetPos,this.curviness,this.curviness,_,this.proximityLimit)}else this._controlPoint=this.geometry.controlPoints[0];var b,E,C,T;b=this._controlPoint.x,E=this._controlPoint.x,C=this._controlPoint.y,T=this._controlPoint.y,this.geometry={controlPoints:[this._controlPoint,this._controlPoint],source:o.sourcePos,target:o.targetPos},this._addSegment(Cg,{x1:p,y1:h,x2:u,y2:d,cp1x:b,cp1y:C,cp2x:E,cp2y:T})}}]),t}(Fb);f(Zp,"type","StateMachine");Ba.register(Kp.type,Kp);Ba.register(Zp.type,Zp);function FE(e){return e<0?-1:e===0?0:1}function LE(e){return[FE(e[2]-e[0]),FE(e[3]-e[1])]}function VE(e){return Math.sqrt(Math.pow(e[0]-e[2],2)+Math.pow(e[1]-e[3],2))}function jE(e){var n=[];return n.push.apply(n,e),n}var Xp=function(e){oe(t,e);var n=se(t);function t(r,i){var o;return R(this,t),o=n.call(this,r,i),o.connection=r,f(m(o),"type",t.type),f(m(o),"internalSegments",[]),f(m(o),"midpoint",void 0),f(m(o),"alwaysRespectStubs",void 0),f(m(o),"cornerRadius",void 0),f(m(o),"lastx",void 0),f(m(o),"lasty",void 0),f(m(o),"lastOrientation",void 0),f(m(o),"loopbackRadius",void 0),f(m(o),"isLoopbackCurrently",void 0),o.midpoint=i.midpoint==null||isNaN(i.midpoint)?.5:i.midpoint,o.cornerRadius=i.cornerRadius!=null?i.cornerRadius:0,o.alwaysRespectStubs=i.alwaysRespectStubs===!0,o.lastx=null,o.lasty=null,o.lastOrientation=null,o.loopbackRadius=i.loopbackRadius||25,o.isLoopbackCurrently=!1,o}return V(t,[{key:"getDefaultStubs",value:function(){return[30,30]}},{key:"addASegment",value:function(i,o,s){if(!(this.lastx===i&&this.lasty===o)){var a=this.lastx==null?s.sx:this.lastx,l=this.lasty==null?s.sy:this.lasty,c=a===i?"v":"h";this.lastx=i,this.lasty=o,this.internalSegments.push([a,l,i,o,c])}}},{key:"writeSegments",value:function(i){for(var o=null,s,a,l,c=0;c<this.internalSegments.length-1;c++){if(o=o||jE(this.internalSegments[c]),s=jE(this.internalSegments[c+1]),a=LE(o),l=LE(s),this.cornerRadius>0&&o[4]!==s[4]){var u=Math.min(VE(o),VE(s)),d=Math.min(this.cornerRadius,u/2);o[2]-=a[0]*d,o[3]-=a[1]*d,s[0]+=l[0]*d,s[1]+=l[1]*d;var p=a[1]===l[0]&&l[0]===1||a[1]===l[0]&&l[0]===0&&a[0]!==l[1]||a[1]===l[0]&&l[0]===-1,h=s[1]>o[3]?1:-1,g=s[0]>o[2]?1:-1,y=h===g,v=y&&p||!y&&!p?s[0]:o[2],_=y&&p||!y&&!p?o[3]:s[1];this._addSegment(Lr,{x1:o[0],y1:o[1],x2:o[2],y2:o[3]}),this._addSegment(Eg,{r:d,x1:o[2],y1:o[3],x2:s[0],y2:s[1],cx:v,cy:_,ac:p})}else this._addSegment(Lr,{x1:o[0],y1:o[1],x2:o[2],y2:o[3]});o=s}s!=null&&this._addSegment(Lr,{x1:s[0],y1:s[1],x2:s[2],y2:s[3]})}},{key:"_compute",value:function(i,o){var s=this;this.internalSegments.length=0,this.lastx=null,this.lasty=null,this.lastOrientation=null;var a=function(S){return[i.startStubX,i.startStubY,i.endStubX,i.endStubY]},l={perpendicular:a,orthogonal:a,opposite:function(S){var D=i,N=S==="x"?0:1,O={x:function(){return D.so[N]===1&&(D.startStubX>D.endStubX&&D.tx>D.startStubX||D.sx>D.endStubX&&D.tx>D.sx)||D.so[N]===-1&&(D.startStubX<D.endStubX&&D.tx<D.startStubX||D.sx<D.endStubX&&D.tx<D.sx)},y:function(){return D.so[N]===1&&(D.startStubY>D.endStubY&&D.ty>D.startStubY||D.sy>D.endStubY&&D.ty>D.sy)||D.so[N]===-1&&(D.startStubY<D.endStubY&&D.ty<D.startStubY||D.sy<D.endStubY&&D.ty<D.sy)}};return!s.alwaysRespectStubs&&O[S]()?{x:[(i.sx+i.tx)/2,i.startStubY,(i.sx+i.tx)/2,i.endStubY],y:[i.startStubX,(i.sy+i.ty)/2,i.endStubX,(i.sy+i.ty)/2]}[S]:[i.startStubX,i.startStubY,i.endStubX,i.endStubY]}},c=l[i.anchorOrientation](i.sourceAxis),u=i.sourceAxis==="x"?0:1,d=i.sourceAxis==="x"?1:0,p=c[u],h=c[d],g=c[u+2],y=c[d+2];this.addASegment(c[0],c[1],i);var v=i.startStubX+(i.endStubX-i.startStubX)*this.midpoint,_=i.startStubY+(i.endStubY-i.startStubY)*this.midpoint,b={x:[0,1],y:[1,0]},E={perpendicular:function(S,D,N,O,Y){var M=i,ne={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},_t={x:[[M.startStubX,M.endStubX],null,[M.endStubX,M.startStubX]],y:[[M.startStubY,M.endStubY],null,[M.endStubY,M.startStubY]]},tt={x:[[v,M.startStubY],[v,M.endStubY]],y:[[M.startStubX,_],[M.endStubX,_]]},le={x:[[M.endStubX,M.startStubY]],y:[[M.startStubX,M.endStubY]]},lt={x:[[M.startStubX,M.endStubY],[M.endStubX,M.endStubY]],y:[[M.endStubX,M.startStubY],[M.endStubX,M.endStubY]]},$r={x:[[M.startStubX,_],[M.endStubX,_],[M.endStubX,M.endStubY]],y:[[v,M.startStubY],[v,M.endStubY],[M.endStubX,M.endStubY]]},Nt={x:[M.startStubY,M.endStubY],y:[M.startStubX,M.endStubX]},Wr=b[S][0],Ni=b[S][1],Tn=M.so[Wr]+1,zr=M.to[Ni]+1,fn=M.to[Ni]===-1&&Nt[S][1]<Nt[S][0]||M.to[Ni]===1&&Nt[S][1]>Nt[S][0],Kt=_t[S][Tn][0],Jn=_t[S][Tn][1],Rt=ne[S][Tn][zr];if(M.segment===Rt[3]||M.segment===Rt[2]&&fn)return tt[S];if(M.segment===Rt[2]&&Jn<Kt)return le[S];if(M.segment===Rt[2]&&Jn>=Kt||M.segment===Rt[1]&&!fn)return $r[S];if(M.segment===Rt[0]||M.segment===Rt[1]&&fn)return lt[S]},orthogonal:function(S,D,N,O,Y){var M=i,ne={x:M.so[0]===-1?Math.min(D,O):Math.max(D,O),y:M.so[1]===-1?Math.min(D,O):Math.max(D,O)}[S];return{x:[[ne,N],[ne,Y],[O,Y]],y:[[N,ne],[Y,ne],[Y,O]]}[S]},opposite:function(S,D,N,O,Y){var M=i,ne={x:"y",y:"x"}[S],_t={x:"h",y:"w"}[S],tt=M["is"+S.toUpperCase()+"GreaterThanStubTimes2"];if(o.sourceEndpoint.elementId===o.targetEndpoint.elementId){var le=N+(1-o.sourceEndpoint._anchor.computedPosition[ne])*o.sourceInfo[_t]+s.maxStub;return{x:[[D,le],[O,le]],y:[[le,D],[le,O]]}[S]}else{if(!tt||M.so[u]===1&&D>O||M.so[u]===-1&&D<O)return{x:[[D,_],[O,_]],y:[[v,D],[v,O]]}[S];if(M.so[u]===1&&D<O||M.so[u]===-1&&D>O)return{x:[[v,M.sy],[v,M.ty]],y:[[M.sx,_],[M.tx,_]]}[S]}}},C=E[i.anchorOrientation](i.sourceAxis,p,h,g,y);if(C)for(var T=0;T<C.length;T++)this.addASegment(C[T][0],C[T][1],i);this.addASegment(c[2],c[3],i),this.addASegment(i.tx,i.ty,i),this.writeSegments(i)}},{key:"transformGeometry",value:function(i,o,s){return i}}]),t}(Wu);f(Xp,"type","Flowchart");Ba.register(Xp.type,Xp);Ai.registerHandler($N);Ai.registerHandler(uR);Ai.registerHandler(hR);Ba.register(ju.type,ju);function LR(){var e=Math.floor(Math.random()*2e3),n=Math.floor(Math.random()*2e3);return{clientX:e,clientY:n,screenX:e,screenY:n,pageX:e,pageY:n}}var zo={clientX:5e4,clientY:5e4,screenX:5e4,screenY:5e4,pageX:5e4,pageY:5e4},VR=[];for(Yo=0;Yo<256;Yo++)VR[Yo]=(Yo<16?"0":"")+Yo.toString(16);var Yo,jR=1e-11,a9=function(){function e(n,t,r){R(this,e),this._jsPlumb=n,this.ok=t,this.equal=r,f(this,"_divs",[]),f(this,"mottle",void 0),this.mottle=new lg}return V(e,[{key:"_t",value:function(t,r,i,o){this.mottle.trigger(t,r,{pageX:i,pageY:o,screenX:i,screenY:o,clientX:i,clientY:o})}},{key:"addDiv",value:function(t,r,i,o,s,a,l){var c=document.createElement("div");return c.style.position="absolute",c.innerHTML=t,r?r.appendChild(c):this._jsPlumb.getContainer().appendChild(c),c.setAttribute("id",t),c.style.left=(o??Math.floor(Math.random()*1e3))+"px",c.style.top=(s??Math.floor(Math.random()*1e3))+"px",i&&(c.className=i),a&&(c.style.width=a+"px"),l&&(c.style.height=l+"px"),this._divs.push(t),c}},{key:"addDivs",value:function(t,r){for(var i=0;i<t.length;i++)this.addDiv(t[i],r)}},{key:"assertEndpointCount",value:function(t,r){var i=this._jsPlumb.getEndpoints(t),o=i?i.length:0;this.equal(o,r,t.getAttribute("data-jtk-managed")+" has "+r+(r>1||r==0?" endpoints":" endpoint"))}},{key:"_assertManagedEndpointCount",value:function(t,r){var i=this._jsPlumb.getId(t),o=this._jsPlumb._managedElements[i];this.equal(o.endpoints.length,r,i+" has "+r+" endpoints in managed record")}},{key:"_assertManagedConnectionCount",value:function(t,r){var i=this._jsPlumb.getId(t),o=this._jsPlumb._managedElements[i];this.equal(o.connections.length,r,i+" has "+r+" connections in managed record")}},{key:"_registerDiv",value:function(t){this._divs.push(t)}},{key:"makeDragStartEvt",value:function(t){var r=this.makeEvent(t),i=this._jsPlumb.getContainer();return r.clientX+=i.offsetLeft,r.screenX+=i.offsetLeft,r.pageX+=i.offsetLeft,r.clientY+=i.offsetTop,r.screenY+=i.offsetTop,r.pageY+=i.offsetTop,r}},{key:"getAttribute",value:function(t,r){return t.getAttribute(r)}},{key:"dragNodeBy",value:function(t,r,i,o){o=o||{},o.before&&o.before();var s=this.makeEvent(t);this._jsPlumb.trigger(t,ee,s),o.beforeMouseMove&&o.beforeMouseMove(),this._t(document,Ue,s.pageX+r,s.pageY+i),o.beforeMouseUp&&o.beforeMouseUp(),this.mottle.trigger(document,te,null),o.after&&o.after()}},{key:"dragNodeTo",value:function(t,r,i,o){o=o||{};var s=this._jsPlumb.viewport.getPosition(this._jsPlumb.getId(t));o.before&&o.before();var a=this.makeEvent(t);this._jsPlumb.trigger(t,ee,a);var l=this._jsPlumb.getContainer().getBoundingClientRect();o.beforeMouseMove&&o.beforeMouseMove(),this._t(document,Ue,l.x+r+s.w/2,l.y+i+s.h/2),o.beforeMouseUp&&o.beforeMouseUp(),this.mottle.trigger(document,te,null),o.after&&o.after()}},{key:"dragToGroup",value:function(t,r,i){var o=this._jsPlumb.getGroup(r),s=this._jsPlumb.viewport.getPosition(o.elId),a=s.x+s.w/2,l=s.y+s.h/2;this.dragNodeTo(t,a,l,i)}},{key:"aSyncDragNodeBy",value:function(t,r,i,o){var s=this;o=o||{},o.before&&o.before();var a=this.makeEvent(t);this._jsPlumb.trigger(t,ee,a),o.beforeMouseMove&&o.beforeMouseMove(),setTimeout(function(){s._t(document,Ue,a.pageX+r,a.pageY+i),o.beforeMouseUp&&o.beforeMouseUp(),setTimeout(function(){s.mottle.trigger(document,te,null),o.after&&o.after()},45)},45)}},{key:"dragANodeAround",value:function(t,r,i){this._jsPlumb.trigger(t,ee,this.makeEvent(t));for(var o=Math.random()*50,s=0;s<o;s++){var a=LR();t.style.left=a.screenX+"px",t.style.top=a.screenY+"px",this._jsPlumb.trigger(document,Ue,a)}r&&this.ok(r(),i||"while dragging assert"),this._jsPlumb.trigger(document,te,zo)}},{key:"dragConnection",value:function(t,r,i,o){var s=this.getCanvas(t),a=this.getCanvas(r),l=this.makeEvent(s),c=this.makeEvent(a);o=o||{};var u=this._jsPlumb.select().length;return this._jsPlumb.trigger(s,ee,l),o.beforeMouseMove&&o.beforeMouseMove(),this._jsPlumb.trigger(i?a:document,Ue,c),o.beforeMouseUp&&o.beforeMouseUp(),this._jsPlumb.trigger(i?a:document,te,c),this._jsPlumb.select().get(u)}},{key:"aSyncDragConnection",value:function(t,r,i){var o=this;i=i||{};var s=this.getCanvas(t),a=this.getCanvas(r),l=this.makeEvent(s),c=this.makeEvent(a),u=this._jsPlumb.select().length;this._jsPlumb.trigger(s,ee,l),setTimeout(function(){i.beforeMouseMove&&i.beforeMouseMove(),o._jsPlumb.trigger(document,Ue,c),setTimeout(function(){i.beforeMouseUp&&i.beforeMouseUp(),o._jsPlumb.trigger(a,te,c),i.after&&i.after(o._jsPlumb.select().get(u))},5)},5)}},{key:"dragAndAbortConnection",value:function(t){var r=this.getCanvas(t),i=this.makeEvent(r);this._jsPlumb.trigger(r,ee,i),this._jsPlumb.trigger(document,Ue,zo),this._jsPlumb.trigger(document,te,zo)}},{key:"detachConnection",value:function(t,r){r=r||{};var i=this.getEndpointCanvas(t),o=this.makeEvent(i);r.before&&r.before(),this._jsPlumb.trigger(i,ee,o),r.beforeMouseMove&&r.beforeMouseMove(),this._jsPlumb.trigger(document,Ue,zo),r.beforeMouseUp&&r.beforeMouseUp(),this._jsPlumb.trigger(document,te,zo),r.after&&r.after()}},{key:"detachAndReattachConnection",value:function(t,r){r=r||{};var i=this.getEndpointCanvas(t),o=this.makeEvent(i);r.before&&r.before(),this._jsPlumb.trigger(i,ee,o),r.beforeMouseMove&&r.beforeMouseMove(),this._jsPlumb.trigger(document,Ue,zo),this._jsPlumb.trigger(document,Ue,o),r.beforeMouseUp&&r.beforeMouseUp(),this._jsPlumb.trigger(document,te,o),r.after&&r.after()}},{key:"detachConnectionByTarget",value:function(t,r){this.detachConnection(t.endpoints[1],r)}},{key:"relocateTarget",value:function(t,r,i){this.relocate(t,1,r,i)}},{key:"relocate",value:function(t,r,i,o){o=o||{},i=this.getCanvas(i);var s=this.getEndpointCanvas(t.endpoints[r]),a=this.makeEvent(s),l=this.makeEvent(i);o.before&&o.before(),this._jsPlumb.trigger(s,ee,a),o.beforeMouseMove&&o.beforeMouseMove(),this._jsPlumb.trigger(document,Ue,l),o.beforeMouseUp&&o.beforeMouseUp(),this._jsPlumb.trigger(i,te,l),o.after&&o.after()}},{key:"relocateSource",value:function(t,r,i){this.relocate(t,0,r,i)}},{key:"makeEvent",value:function(t){var r=t.getBoundingClientRect(),i=r.x+r.width/2,o=r.y+r.height/2;return{clientX:i,clientY:o,screenX:i,screenY:o,pageX:i,pageY:o}}},{key:"getCanvas",value:function(t){return t.endpoint?this.getEndpointCanvas(t):t}},{key:"getEndpointCanvas",value:function(t){return t.endpoint.canvas}},{key:"getConnectionCanvas",value:function(t){return t.connector.canvas}},{key:"getEndpointCanvasPosition",value:function(t){var r=this.getEndpointCanvas(t);return{x:parseInt(r.style.left,10),y:parseInt(r.style.top,10),w:r.getAttribute("width"),h:r.getAttribute("height")}}},{key:"within",value:function(t,r,i){this.ok(Math.abs(t-r)<jR,i+"[expected: "+r+" got "+t+"] [diff:"+Math.abs(t-r)+"]")}},{key:"assertManagedEndpointCount",value:function(t,r){var i=this._jsPlumb.getId(t),o=this._jsPlumb._managedElements[i];this.equal(o.endpoints.length,r,i+" has "+r+" endpoints in managed record")}},{key:"assertManagedConnectionCount",value:function(t,r){var i=this._jsPlumb.getId(t),o=this._jsPlumb._managedElements[i];this.equal(o.connections.length,r,i+" has "+r+" connections in managed record")}},{key:"fireEventOnEndpoint",value:function(t){for(var r=this.getEndpointCanvas(t),i=0;i<(arguments.length<=1?0:arguments.length-1);i++)this._jsPlumb.trigger(r,i+1<1||arguments.length<=i+1?void 0:arguments[i+1])}},{key:"fireEventOnElement",value:function(t){for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++)this._jsPlumb.trigger(t,r+1<1||arguments.length<=r+1?void 0:arguments[r+1])}},{key:"fireEventOnConnection",value:function(t){for(var r=this.getConnectionCanvas(t),i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];this.fireEventOnElement.apply(this,[r].concat(o))}},{key:"clickOnConnection",value:function(t){this.fireEventOnConnection(t,vt)}},{key:"dblClickOnConnection",value:function(t){this.fireEventOnConnection(t,Ot)}},{key:"tapOnConnection",value:function(t){this.fireEventOnConnection(t,ee),this.fireEventOnConnection(t,te)}},{key:"dblTapOnConnection",value:function(t){this.fireEventOnConnection(t,ee),this.fireEventOnConnection(t,te),this.fireEventOnConnection(t,ee),this.fireEventOnConnection(t,te)}},{key:"clickOnElement",value:function(t,r){this._jsPlumb.trigger(t,vt,null,null,r??1)}},{key:"dblClickOnElement",value:function(t){this._jsPlumb.trigger(t,Ot)}},{key:"tapOnElement",value:function(t){this._jsPlumb.trigger(t,ee),this._jsPlumb.trigger(t,te)}},{key:"dblTapOnElement",value:function(t){this._jsPlumb.trigger(t,ee),this._jsPlumb.trigger(t,te),this._jsPlumb.trigger(t,ee),this._jsPlumb.trigger(t,te)}},{key:"getOverlayCanvas",value:function(t){return t.canvas||t.path}},{key:"fireEventOnOverlay",value:function(t,r,i){var o=t.getOverlay(r),s=this.getOverlayCanvas(o);this._jsPlumb.trigger(s,i)}},{key:"clickOnOverlay",value:function(t,r){this.fireEventOnOverlay(t,r,vt)}},{key:"dblClickOnOverlay",value:function(t,r){this.fireEventOnOverlay(t,r,Ot)}},{key:"tapOnOverlay",value:function(t,r){this.fireEventOnOverlay(t,r,ee),this.fireEventOnOverlay(t,r,te)}},{key:"dblTapOnOverlay",value:function(t,r){this.fireEventOnOverlay(t,r,ee),this.fireEventOnOverlay(t,r,te),this.fireEventOnOverlay(t,r,ee),this.fireEventOnOverlay(t,r,te)}},{key:"cleanup",value:function(){var t=this._jsPlumb.getContainer();this._jsPlumb.destroy();for(var r in this._divs){var i=document.getElementById(this._divs[r]);i&&i.parentNode.removeChild(i)}this._divs.length=0;var o=this._jsPlumb.select().length,s=this._jsPlumb.selectEndpoints().length,a=t.querySelectorAll(".jtk-endpoint").length,l=t.querySelectorAll(".jtk-connector").length;for(var c in t.__ta)for(var u in t.__ta[c])throw"Container event bindings not empty for key "+c;if(o>0)throw"there are connections in the data model!";if(s>0)throw"there are endpoints in the data model!";if(a>0)throw"there are "+a+" endpoints left in the dom!";if(l>0)throw"there are "+l+" connections left in the dom!"}},{key:"makeContent",value:function(t){var r=document.createElement("div");return r.innerHTML=t,r.firstChild}},{key:"length",value:function(t){var r=0;for(var i in t)t.hasOwnProperty(i)&&r++;return r}},{key:"head",value:function(t){for(var r in t)return t[r]}},{key:"uuid",value:function(){return Ve()}}]),e}();var BE=0;function BR(){var e=BE+1;return BE++,e}function Hb(e){return new aR(BR(),e)}var zu=class e{scsDragEnd=new it;element=w(rt);dragging=!1;offset={x:0,y:0};onMouseDown(n){this.dragging=!0;let t=this.element.nativeElement.getBoundingClientRect();this.offset.x=n.clientX-t.left,this.offset.y=n.clientY-t.top,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}onMouseMove=n=>{if(!this.dragging)return;let t=this.element.nativeElement.parentElement?.getBoundingClientRect();if(!t)return;let r=n.clientX-t.left-this.offset.x,i=n.clientY-t.top-this.offset.y;this.element.nativeElement.style.left=`${r}px`,this.element.nativeElement.style.top=`${i}px`};onMouseUp=n=>{if(!this.dragging)return;this.dragging=!1,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp);let t=this.element.nativeElement.getBoundingClientRect(),r=this.element.nativeElement.parentElement?.getBoundingClientRect();if(!r)return;let i=t.left-r.left,o=t.top-r.top;this.scsDragEnd.emit({x:i,y:o})};static \u0275fac=function(t){return new(t||e)};static \u0275dir=an({type:e,selectors:[["","scsDraggable",""]],hostBindings:function(t,r){t&1&&J("mousedown",function(o){return r.onMouseDown(o)})},outputs:{scsDragEnd:"scsDragEnd"}})};function HR(e,n){e&1&&Q(0,"span",4)}function GR(e,n){e&1&&Q(0,"span",5)}function UR(e,n){e&1&&Q(0,"div",14)}function $R(e,n){e&1&&Q(0,"div",15)}function WR(e,n){if(e&1&&Q(0,"div",17)(1,"div",18),e&2){let t=re();gi("width",t.productionPercentage(),"%"),L(),gi("width",t.consumptionPercentage(),"%")}}var Yu=class e{productionRecord=jn.required();productionPercentage=st(()=>{let n=this.productionRecord(),t=Math.max(n.amount,n.consumption);return t===0?0:n.amount/t*100});consumptionPercentage=st(()=>{let n=this.productionRecord(),t=Math.max(n.amount,n.consumption);return t===0?0:n.consumption/t*100});barState=st(()=>{let n=this.productionRecord();return n.consumption===0&&n.amount>0?"production-only":n.amount===0&&n.consumption>0?"consumption-only":"balanced"});isShortage=st(()=>this.productionRecord().consumption>this.productionRecord().amount);static \u0275fac=function(t){return new(t||e)};static \u0275cmp=ot({type:e,selectors:[["scs-prodaction-statistics"]],inputs:{productionRecord:[1,"productionRecord"]},decls:27,vars:9,consts:[[1,"production-statistics"],[1,"resource-icon"],["loading","lazy",1,"img-fluid",3,"src","alt"],[1,"resource-name"],[1,"bi","bi-hand-thumbs-down-fill","me-1"],[1,"bi","bi-hand-thumbs-up-fill","me-1"],[1,"rates-container","d-flex","gap-3","justify-content-end"],[1,"production-rate","text-end"],[1,"bi","bi-box-arrow-down","me-1"],[1,"text-muted","small"],[1,"consumption-rate","text-end"],[1,"bi","bi-box-arrow-in-up","me-1"],[1,"progress-container"],[1,"progress"],[1,"progress-bar","bg-success",2,"width","100%"],[1,"progress-bar","bg-danger",2,"width","100%"],[1,"progress-divider"],[1,"progress-bar","bg-success"],[1,"progress-bar","bg-danger"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1),Q(2,"img",2),x(),A(3,"div",3),ft(4,HR,1,0,"span",4)(5,GR,1,0,"span",5),A(6,"span"),X(7),x()(),A(8,"div",6)(9,"div",7),Q(10,"span",8),A(11,"span"),X(12),x(),A(13,"span",9),X(14,"/min"),x()(),A(15,"div",10),Q(16,"span",11),A(17,"span"),X(18),x(),A(19,"span",9),X(20,"/min"),x()()(),A(21,"div",12)(22,"div",13),ft(23,UR,1,0,"div",14)(24,$R,1,0,"div",15)(25,WR,2,4),Q(26,"div",16),x()()()),t&2&&(L(2),me("src",r.productionRecord().resource.getSmallIconUrl(),hi)("alt",r.productionRecord().resource.displayName),L(2),ht(r.isShortage()?4:5),L(3),gt(r.productionRecord().resource.displayName),L(5),gt(r.productionRecord().amount),L(6),gt(r.productionRecord().consumption),L(4),gr("progress-"+r.barState()),L(),ht(r.barState()==="production-only"?23:r.barState()==="consumption-only"?24:25))},dependencies:[Ht],styles:[".production-statistics[_ngcontent-%COMP%]{padding:.75rem 0;display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto auto;gap:.5rem}.production-statistics[_ngcontent-%COMP%]   .resource-icon[_ngcontent-%COMP%]{grid-row:1/3;grid-column:1;width:40px;height:40px;align-self:start}.production-statistics[_ngcontent-%COMP%]   .resource-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.production-statistics[_ngcontent-%COMP%]   .resource-name[_ngcontent-%COMP%]{grid-row:1;grid-column:2;align-self:center}.production-statistics[_ngcontent-%COMP%]   .resource-name[_ngcontent-%COMP%]   .bi-hand-thumbs-down-fill[_ngcontent-%COMP%]{color:#dc3545}.production-statistics[_ngcontent-%COMP%]   .resource-name[_ngcontent-%COMP%]   .bi-hand-thumbs-up-fill[_ngcontent-%COMP%]{color:#28a745}.production-statistics[_ngcontent-%COMP%]   .rates-container[_ngcontent-%COMP%]{grid-row:2;grid-column:2;align-self:center}.production-statistics[_ngcontent-%COMP%]   .production-rate[_ngcontent-%COMP%], .production-statistics[_ngcontent-%COMP%]   .consumption-rate[_ngcontent-%COMP%]{min-width:70px}.production-statistics[_ngcontent-%COMP%]   .production-rate[_ngcontent-%COMP%]   .bi[_ngcontent-%COMP%]{color:#28a745}.production-statistics[_ngcontent-%COMP%]   .consumption-rate[_ngcontent-%COMP%]   .bi[_ngcontent-%COMP%]{color:#dc3545}.production-statistics[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{grid-row:3;grid-column:1/-1;width:100%}.production-statistics[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:12px;background-color:#e9ecef;border-radius:6px;overflow:hidden;border:1px solid #dee2e6;position:relative}.production-statistics[_ngcontent-%COMP%]   .progress.progress-production-only[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background-color:#28a745!important}.production-statistics[_ngcontent-%COMP%]   .progress.progress-consumption-only[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background-color:#dc3545!important}.production-statistics[_ngcontent-%COMP%]   .progress.progress-balanced[_ngcontent-%COMP%]{display:flex}.production-statistics[_ngcontent-%COMP%]   .progress.progress-balanced[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]:first-child{background-color:#28a745!important}.production-statistics[_ngcontent-%COMP%]   .progress.progress-balanced[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]:last-child{background-color:#dc3545!important}.production-statistics[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{transition:width .3s ease-in-out;border:none}.production-statistics[_ngcontent-%COMP%]   .progress-divider[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;transform:translate(-50%);width:3px;height:100%;background-color:#343a40;z-index:10}"],changeDetection:0})};var Gb=(e,n)=>n.resource.className;function zR(e,n){if(e&1&&(A(0,"div",12)(1,"div",16),Q(2,"img",17),A(3,"span",18),X(4),x()(),A(5,"div")(6,"span"),X(7),x(),A(8,"span",19),X(9,"/min"),x()()()),e&2){let t=n.$implicit,r=re();L(2),me("src",r.getResourceIconUrl(t.resource),hi)("alt",r.getResourceName(t.resource)),L(2),gt(r.getResourceName(t.resource)),L(3),gt(t.amount)}}function YR(e,n){if(e&1&&Q(0,"scs-prodaction-statistics",15),e&2){let t=n.$implicit;me("productionRecord",t)}}var qu=class e{locationsService=w(En);location=jn.required();consumption=st(()=>this.location().consumption||[]);production=st(()=>this.location().production||[]);getResourceName(n){return n?.displayName||""}getResourceIconUrl(n){return n?.getSmallIconUrl()||""}onEditClick(){this.locationsService.editLocation(this.location())}onDeleteClick(){let n=this.location();confirm(`Are you sure you want to delete "${n.name}"? This action cannot be undone.`)&&this.locationsService.deleteLocation(n)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=ot({type:e,selectors:[["scs-location-card"]],inputs:{location:[1,"location"]},decls:23,vars:1,consts:[[1,"location-card","card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"fs-4","mb-0"],[1,"action-buttons","d-flex","gap-2"],["aria-label","Edit location",1,"btn","btn-sm","rounded-circle","edit-button",3,"click"],[1,"bi","bi-pencil-fill"],["aria-label","Delete location",1,"btn","btn-sm","rounded-circle","delete-button",3,"click"],[1,"bi","bi-trash-fill"],[1,"card-body"],[1,"input-section","mb-4"],[1,"section-title"],[1,"resource-list"],[1,"resource-item","d-flex","align-items-center","justify-content-between","mb-2"],[1,"my-3"],[1,"production-section"],[3,"productionRecord"],[1,"d-flex","align-items-center"],["width","32","height","32",1,"resource-icon","me-2",3,"src","alt"],[1,"resource-name"],[1,"text-muted","small"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h2",2),X(3),x(),A(4,"div",3)(5,"button",4),J("click",function(){return r.onEditClick()}),Q(6,"i",5),x(),A(7,"button",6),J("click",function(){return r.onDeleteClick()}),Q(8,"i",7),x()()(),A(9,"div",8)(10,"div",9)(11,"h3",10),X(12,"INPUT"),x(),A(13,"div",11),Mt(14,zR,10,4,"div",12,Gb),x(),Q(16,"hr",13),x(),A(17,"div",14)(18,"h3",10),X(19,"PRODUCTION"),x(),A(20,"div",11),Mt(21,YR,1,1,"scs-prodaction-statistics",15,Gb),x()()()()),t&2&&(L(3),gt(r.location().name),L(11),At(r.consumption()),L(7),At(r.production()))},dependencies:[Ht,Yu],styles:[".location-card[_ngcontent-%COMP%]{border-radius:.5rem;overflow:hidden;box-shadow:0 4px 10px #0000001a;border:2px solid var(--bs-border-color)}.location-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--bs-white);border-bottom:1px solid var(--bs-border-color);padding:.5rem .75rem}.location-card[_ngcontent-%COMP%]   h2.fs-4[_ngcontent-%COMP%]{font-size:1rem!important;margin-bottom:0}.location-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:32px;height:32px;padding:0;display:flex;align-items:center;justify-content:center;border:0}.location-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.location-card[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{background-color:transparent;color:var(--bs-primary)}.location-card[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]:hover{background-color:var(--bs-primary-bg-subtle);color:var(--bs-primary)}.location-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{background-color:transparent;color:var(--bs-danger)}.location-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{background-color:var(--bs-danger-bg-subtle);color:var(--bs-danger)}.location-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.5rem .75rem}.location-card[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;margin-bottom:.5rem;letter-spacing:.03em}.location-card[_ngcontent-%COMP%]   .resource-icon[_ngcontent-%COMP%]{object-fit:contain;margin-right:.5rem}.location-card[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:var(--bs-border-color)}"]})};var qR=["board"],KR=(e,n)=>n.id;function ZR(e,n){if(e&1){let t=Ct();A(0,"div",3),J("scsDragEnd",function(i){let o=pe(t).$implicit,s=re();return ge(s.onCardDragEnd(o,i))}),Q(1,"scs-location-card",4),x()}if(e&2){let t=n.$implicit,r=n.$index,i=re();gi("left",t.cardPositionX??i.getDefaultX(r),"px")("top",t.cardPositionY??i.getDefaultY(r),"px"),me("id",Vh("loc-",t.id)),L(),me("location",t)}}var Ku=class e{board;locationsService=w(En);locations=this.locationsService.locations;jsPlumbInstance;debouncedSavePosition=nu((n,t,r)=>{this.saveCardPosition(n,t,r)},300);constructor(){mr(()=>{let n=this.locations();this.jsPlumbInstance&&setTimeout(()=>{this.updateConnections()},0)})}ngAfterViewInit(){this.jsPlumbInstance=Hb({container:this.board.nativeElement}),this.updateConnections()}updateConnections(){if(!this.jsPlumbInstance)return;this.jsPlumbInstance.deleteEveryConnection(),this.locations().forEach(t=>{if(t.resourceSources&&t.resourceSources.length>0){let r=document.getElementById("loc-"+t.id);if(!r)return;t.resourceSources.forEach(i=>{let o=document.getElementById("loc-"+i);o&&this.jsPlumbInstance.connect({source:o,target:r,anchor:["Right","Left"],connector:"Bezier",endpoint:"Blank",overlays:[{type:"Arrow",options:{location:1,width:12,length:12,foldback:.8}}],paintStyle:{stroke:"#007bff",strokeWidth:2}})})}})}onCardDragEnd(n,t){this.debouncedSavePosition(n.id,t.x,t.y)}saveCardPosition(n,t,r){this.locationsService.updateCardPosition(n,t,r)}getDefaultX(n){return 50+n%3*300}getDefaultY(n){return 50+Math.floor(n/3)*200}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=ot({type:e,selectors:[["scs-board"]],viewQuery:function(t,r){if(t&1&&Vn(qR,5),t&2){let i;jt(i=Bt())&&(r.board=i.first)}},decls:4,vars:0,consts:[["board",""],[1,"board-container"],["scsDraggable","",1,"position-absolute",2,"width","280px","z-index","1000",3,"id","left","top"],["scsDraggable","",1,"position-absolute",2,"width","280px","z-index","1000",3,"scsDragEnd","id"],[3,"location"]],template:function(t,r){t&1&&(A(0,"div",1,0),Mt(2,ZR,2,7,"div",2,KR),x()),t&2&&(L(2),At(r.locations()))},dependencies:[zu,qu],styles:[".board-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100vh;overflow:auto;background-color:#f8f9fa;border:1px solid #dee2e6;border-radius:.375rem}[_nghost-%COMP%]     scs-location-card{cursor:move}[_nghost-%COMP%]     scs-location-card:hover{border-radius:1rem;box-shadow:0 4px 8px #00000026}[_nghost-%COMP%]     .jtk-connector{z-index:999}[_nghost-%COMP%]     .jtk-overlay{z-index:1000}.jtk-connector[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#007bff;stroke-width:2}.jtk-endpoint[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#007bff}.jtk-overlay[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#007bff;stroke:#007bff}"],changeDetection:0})};var Zu=class e{title="Satisfactory Chain Stat";locationsService=w(En);resourcesService=w(Fo);selectedResource=ke(null);createNewLocation(){this.locationsService.newLocation()}exportData(){try{this.locationsService.exportLocations()}catch(n){console.error("Export failed:",n),alert("Failed to export data. Please try again.")}}importData(){let n=document.createElement("input");n.type="file",n.accept=".json",n.style.display="none",n.onchange=async t=>{let i=t.target.files?.[0];if(i)try{let s=`This will replace all current locations (${this.locationsService.locations().length}). Are you sure?`;if(confirm(s)){await this.locationsService.importLocations(i);let a=this.locationsService.locations();alert(`Successfully imported ${a.length} location(s).`)}}catch(o){console.error("Import failed:",o),alert("Failed to import data. Please check the file format and try again.")}finally{document.body.removeChild(n)}},document.body.appendChild(n),n.click()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=ot({type:e,selectors:[["scs-root"]],decls:26,vars:1,consts:[[1,"bg-light"],[1,"navbar","bg-body-tertiary"],[1,"container-fluid"],["href","#",1,"navbar-brand"],[1,"btn","btn-success","me-auto",3,"click"],[1,"bi","bi-plus-circle","me-2"],["ngbDropdown","",1,"dropdown"],["type","button","ngbDropdownToggle","","aria-haspopup","true","aria-expanded","false",1,"btn","btn-light"],[1,"bi","bi-three-dots-vertical"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["type","button",1,"dropdown-item",3,"click"],[1,"bi","bi-file-earmark-arrow-down","me-2"],[1,"bi","bi-file-earmark-arrow-up","me-2"],["role","main",1,"container-fluid","mt-4","mb-4"],[1,"footer","mt-auto","py-3","bg-light"],[1,"container","text-center"],[1,"text-muted"]],template:function(t,r){t&1&&(A(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),X(4),x(),A(5,"button",4),J("click",function(){return r.createNewLocation()}),Q(6,"i",5),X(7,"Create Location "),x(),A(8,"div",6)(9,"button",7),Q(10,"i",8),x(),A(11,"ul",9)(12,"li")(13,"button",10),J("click",function(){return r.importData()}),Q(14,"i",11),X(15," Import data ... "),x()(),A(16,"li")(17,"button",10),J("click",function(){return r.exportData()}),Q(18,"i",12),X(19," Export data ... "),x()()()()()()(),A(20,"main",13),Q(21,"scs-board"),x(),A(22,"footer",14)(23,"div",15)(24,"span",16),X(25,"\xA9 2023 My Application"),x()()()),t&2&&(L(4),gt(r.title))},dependencies:[Ku,Ht,tu,Ei,N0,ma],styles:[".dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none!important}"]})};Xh(Zu,a0).catch(e=>console.error(e));
